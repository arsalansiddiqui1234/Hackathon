webpackJsonp([4],[,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17);t.default=function(){return![i.KLARNA_BOOTSTRAP_CLASS,i.CITY_BOOTSTRAP_CLASS,i.COMPLETED_ORDERS_BOOTSTRAP_CLASS,i.CHECKOUT_BOOTSTRAP_CLASS,i.HOME_BOOTSTRAP_CLASS,i.SELF_SERVICE_BOOTSTRAP_CLASS,i.VENDOR_LISTING_BOOTSTRAP_CLASS,i.VENDOR_BOOTSTRAP_CLASS,i.OTP_BOOTSTRAP_CLASS,i.PROFILE_BOOTSTRAP_CLASS].some(function(e){return document.body.classList.contains(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CITY_BOOTSTRAP_CLASS="js-page-city",t.CHECKOUT_BOOTSTRAP_CLASS="checkout",t.HOME_BOOTSTRAP_CLASS="home",t.VENDOR_LISTING_BOOTSTRAP_CLASS="js-page-vendor-listing",t.VENDOR_BOOTSTRAP_CLASS="menu",t.KLARNA_BOOTSTRAP_CLASS="klarna",t.OTP_BOOTSTRAP_CLASS="order-status-page",t.SELF_SERVICE_BOOTSTRAP_CLASS="self-service",t.PROFILE_BOOTSTRAP_CLASS="profile-page",t.COMPLETED_ORDERS_BOOTSTRAP_CLASS="completed-orders"},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.ExpeditionType=void 0;!function(e){e.DELIVERY="delivery",e.PICKUP="pickup"}(i||(t.ExpeditionType=i={}));var r=t.ParticipantStatus=void 0;!function(e){e.OPEN="open",e.LOCKED="locked"}(r||(t.ParticipantStatus=r={}));var o=t.GroupOrderStatus=void 0;!function(e){e.ACTIVE="active",e.DELETED="deleted",e.COMPLETED="completed",e.CHECKOUT="checkout"}(o||(t.GroupOrderStatus=o={}));var a=t.ErrorCodes=void 0;!function(e){e[e.TIMEOUT=404]="TIMEOUT",e[e.EXPIRED=405]="EXPIRED",e[e.HOSTLEFT=450]="HOSTLEFT",e[e.BACKENDDISABLE=403]="BACKENDDISABLE",e[e.HOSTINCHECKOUT=400]="HOSTINCHECKOUT"}(a||(t.ErrorCodes=a={}));var s=t.ErrorMismatchMessages=void 0;!function(e){e.B2C_TO_B2B="NEXTGEN_GROUPORDER_JOIN_B2C_TO_B2B",e.B2B_TO_B2C="NEXTGEN_GROUPORDER_JOIN_B2B_TO_B2C",e.COMPANY_MISMATCH="NEXTGEN_GROUPORDER_NOTICE_UNABLE_MESSAGE"}(s||(t.ErrorMismatchMessages=s={}));t.OrderTimeNow="now"},,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return void 0===t?{type:e}:{type:e,payload:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.createCommonMiddlewares=t.stubReducer=void 0,t.createAction=r;var o=n(56),a=i(o),s=n(12),l=n(57),c=i(l),u=(t.stubReducer=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.compose);t.createCommonMiddlewares=function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return u(s.applyMiddleware.apply(void 0,[c.default,(0,a.default)(e,t)].concat(i)))}},function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.mapperGroupOrderCalculatePayload=t.mapperProductCheckout=t.isMatch=t.objectsEqual=t.mapProductsToParticipants=t.mapperProductGroupByParticipants=t.mapperParticipants=t.mapperToastMessage=t.mapperCreateCartWebGroupOrder=t.mapperCreateCartGroupOrder=t.mapperUpdateGroupOrderMeta=t.mapperCreateGroupOrder=t.mapperDeliveryAddress=t.mapperExpeditionFulfilment=t.getOrderTimeText=t.EXPEDITION_TIME_DEFAULT=t.FULFILMENT_TIME_NOW=t.GROUP_ORDER_USER_CODE_DIVIDER=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(37),a=i(o),s=n(41),l=i(s),c=n(30),u=i(c),d=n(22),p=i(d),f=n(19),h=n(45),m=n(11),v=t.GROUP_ORDER_USER_CODE_DIVIDER="|||",g=(t.FULFILMENT_TIME_NOW="now",t.EXPEDITION_TIME_DEFAULT="ASAP",t.getOrderTimeText=function(e){return e===f.OrderTimeNow?(0,a.default)().toISOString():e}),_=t.mapperExpeditionFulfilment=function(e,t,n,i){var r=(0,h.deliveryTimeText)(t,n,i),o=e.get("expedition_type"),s=e.get("order_time");return s!==f.OrderTimeNow&&(r=(0,a.default)(s).format("dddd, MMM D(HH:mm)")),{expedition_type:o,fulfilment_time:g(s),fulfilment_time_text:o+" "+r}},y=t.mapperDeliveryAddress=function(){var e=(0,m.getLocationAddress)()||{};return{fulfilment_address:e.address||"",additional_parameters:{address:{country_code:e.countryCode,formatted_customer_address:e.formattedAddress||"",latitude:e.latitude,longitude:e.longitude,type:3},address_web:Object.assign({},e,{address_line1:e.address||""})}}},b=(t.mapperCreateGroupOrder=function(e,t,n,i,r,o){var a=_(e,i,r,o),s=y();return Object.assign({host:{name:t.getFullName()},vendor:{name:n.name,code:n.code}},a,s)},t.mapperUpdateGroupOrderMeta=function(e,t,n,i,r){var o=_(e,t,n,i),a=y();return Object.assign({groupie_id:r},o,a)},t.mapperCreateCartGroupOrder=function(t,n,i){var r=(0,m.getCart)()||"{}";return{groupie_id:t,customer_name:n,products:e.get(JSON.parse(r),"vendor_cart[0].products",[]).reduce(function(e,t){if(!i||t.special_instructions.indexOf(v)<0){var n=t.product_variations.find(function(e){return e.id===t.variation_id||e.id===t.product_variation_id}),r=n&&n.price?n.price:0,o=n&&n.price_before_discount?n.price_before_discount:0,a=r,s=t.toppings.length>0?t.toppings.map(function(e){return a+=e.price*e.quantity,{id:e.id,name:e.name,price:e.price,original_price:e.original_price||e.price,extra_information:{quantity:e.quantity}}}):[];e.push({id:t.id,name:t.name||t.variation_name,quantity:t.quantity,toppings:s,total_price:a,comments:t.special_instructions||"",additional_parameters:Object.assign({menu_category_id:t.menu_category_id?Number(t.menu_category_id):0,is_alcoholic_item:t.is_alcoholic_item,menu_id:t.menu_id?Number(t.menu_id):0,variation_original_price:o,variation_price:r,variation_id:t.variation_id||t.product_variation_id},t.variation_name?{variation_name:t.variation_name}:{},t.sold_out_option?{sold_out_option:t.sold_out_option}:{},t.vat_percentage?{vat_percentage:Number(t.vat_percentage)}:{},t.packaging_charge?{packaging_charge:t.packaging_charge}:{})})}return e},[])}},t.mapperCreateCartWebGroupOrder=function(e,t,n,i){var r=$("li[data-product-id='"+e.id+"']").attr("data-object")||$("li[data-variation-id='"+e.id+"']").attr("data-object");if(r){var o=JSON.parse(r);e.additional_parameters&&e.additional_parameters.sold_out_option&&(o.sold_out_option=e.additional_parameters.sold_out_option),o.price=e.price||e.total_price,o.special_instructions=""+i+v+e.comments;var a=e.additional_parameters&&e.additional_parameters.variation_id,s=u.default.createFromMenuItem(o,t,a);s.set("special_instructions",o.special_instructions);var c=e.toppings?e.toppings.map(function(e){return e.id}):[],d=[],p={};return s.topping_ids.forEach(function(t){if(n&&n.hasOwnProperty("toppings")&&n.toppings[t]&&n.toppings[t].options)n.toppings[t].options.forEach(function(i){var r=e.toppings.find(function(e){return e.id===i.id}),o=r&&r.extra_information;r?(i.selected=!0,i.optionsVisible=!0,i.quantity=o&&o.quantity?o.quantity:1,p[t]||(d.push(n.toppings[t]),p[t]=!0)):i.selected=!1});else if(c.indexOf(t)&&!p[t]){var i=e.toppings.find(function(e){return e.id===t}),r=i&&i.extra_information;p[t]=!0,d.push(Object.assign({},n.toppings[t],{quantity:r&&r.quantity?r.quantity:1}))}}),s.set("toppings",[]),s.toppings=new l.default(d),s}return null},t.mapperToastMessage=function(e,t,n,i){var r=[],o=e&&e.guests?e.guests:[];return t&&t.guests&&t.guests.forEach(function(t){var a=void 0;if(o.length>0&&(o=o.filter(function(e){return e.code!==t.code||(a=e,!1)})),a)a.state!==t.state&&t.state===f.ParticipantStatus.LOCKED&&(r.push(n.guestReadyToHostToast.replace("%name%",t.name)),i.push({event:"group_order_guest_ready.shown",pageUrlPath:window.location.href,pageType:"shop_details",groupOrderUserType:"host",groupOrderUserCount:(0,m.getGroupOrderParticipantsCountFromView)("cart")}));else if(e){r.push(n.guestJoinToHostToast.replace("%name%",t.name));var s=(0,m.isHost)(VOLO.customer&&VOLO.customer.get("code")),l={event:"group_order_guest_joined.shown",pageUrlPath:window.location.href,pageType:"shop_details",groupOrderUserType:s?"host":"guest"};s&&(l.groupOrderUserCount=(0,m.getGroupOrderParticipantsCountFromView)("cart")+1),i.push(l)}}),o.length>0&&o.forEach(function(e){r.push(n.guestLeftToHostToast.replace("%name%",e.name))}),r},t.mapperParticipants=function(e){var t=[],n=e.host.name.split(" ");return t.push({allowance:0,apiId:"user",email:"",firstName:n[0],isCurrentUser:!0,lastName:n[1]||""}),e.guests&&e.guests.forEach(function(e){if(e.state===f.ParticipantStatus.LOCKED){var n=e.name.split(" ");t.push({allowance:0,apiId:e.code,email:"",firstName:n[0],isCurrentUser:!1,lastName:n[1]||""})}}),t},t.mapperProductGroupByParticipants=function(e,t){var n={};return t.forEach(function(e){n[e.apiId]=[]}),e.products&&e.products.forEach(function(e){var t=e.get("special_instructions"),i="user";if(t){var r=t.split(v);r.length>1&&(i=r[0])}n[i]&&n[i].push(e)}),n},t.mapProductsToParticipants=function(e){var t={};return e.products&&e.products.forEach(function(e){var n=e.special_instructions,i=VOLO.customer&&VOLO.customer.get("code")||"user";if(n){var r=n.split(v);r.length>1&&(i=r[0])}t[i]?t[i].push(e):t[i]=[e]}),t},t.objectsEqual=function e(t,n){return t&&n&&"object"===(void 0===t?"undefined":r(t))&&Object.keys(t).length>0?Object.keys(t).length===Object.keys(n).length&&Object.keys(t).every(function(i){return e(t[i],n[i])}):Array.isArray(t)&&Array.isArray(n)?O(t,n):t===n}),O=t.isMatch=function(e,t){return e&&t&&e.length>0&&t.length>0&&Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(function(e,n){return b(e,t[n])}):Array.isArray(e)&&Array.isArray(t)?0===e.length&&0===t.length:e===t};t.mapperProductCheckout=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.sort(function(e,t){var n=e.special_instructions||"";return(t.special_instructions||"").indexOf(v)>=0?-1:n.indexOf(v)<0?1:0}).reduce(function(e,n){if(n.group_order_user_id=VOLO.customer&&(0,p.default)()?VOLO.customer.get("id"):null,n.special_instructions){var i=n.special_instructions;if(i.indexOf(v)>=0){var r=i.split(v);r.length>1&&(n.special_instructions=r[1],Array.isArray(t)&&t.forEach(function(e){n.group_order_user_id=e.customer_code===r[0]&&(0,p.default)()?e.apiId:null}))}var o=e.find(function(e){return e.variation_id===n.variation_id&&O(e.toppings,n.toppings)&&e.special_instructions===n.special_instructions});o&&(n.quantity+=o.quantity,e=e.filter(function(e){return e.variation_id!==o.variation_id||!O(e.toppings,o.toppings)||e.special_instructions!==n.special_instructions}))}return e.push(n),e},[])},t.mapperGroupOrderCalculatePayload=function(e){return e?{id:e,additional_data:"{}"}:{}}}).call(t,n(1))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(16);Object.defineProperty(t,"isBootstrapPage",{enumerable:!0,get:function(){return i(r).default}});var o=n(32);Object.defineProperty(t,"addMainScriptLoadListeners",{enumerable:!0,get:function(){return o.addMainScriptLoadListeners}}),Object.defineProperty(t,"addPageScriptLoadListeners",{enumerable:!0,get:function(){return o.addPageScriptLoadListeners}}),Object.defineProperty(t,"addXMLHttpRequestListener",{enumerable:!0,get:function(){return o.addXMLHttpRequestListener}});var a=n(17);Object.defineProperty(t,"KLARNA_BOOTSTRAP_CLASS",{enumerable:!0,get:function(){return a.KLARNA_BOOTSTRAP_CLASS}}),Object.defineProperty(t,"CHECKOUT_BOOTSTRAP_CLASS",{enumerable:!0,get:function(){return a.CHECKOUT_BOOTSTRAP_CLASS}}),Object.defineProperty(t,"CITY_BOOTSTRAP_CLASS",{enumerable:!0,get:function(){return a.CITY_BOOTSTRAP_CLASS}}),Object.defineProperty(t,"HOME_BOOTSTRAP_CLASS",{enumerable:!0,get:function(){return a.HOME_BOOTSTRAP_CLASS}}),Object.defineProperty(t,"VENDOR_BOOTSTRAP_CLASS",{enumerable:!0,get:function(){return a.VENDOR_BOOTSTRAP_CLASS}}),Object.defineProperty(t,"VENDOR_LISTING_BOOTSTRAP_CLASS",{enumerable:!0,get:function(){return a.VENDOR_LISTING_BOOTSTRAP_CLASS}}),Object.defineProperty(t,"OTP_BOOTSTRAP_CLASS",{enumerable:!0,get:function(){return a.OTP_BOOTSTRAP_CLASS}}),Object.defineProperty(t,"SELF_SERVICE_BOOTSTRAP_CLASS",{enumerable:!0,get:function(){return a.SELF_SERVICE_BOOTSTRAP_CLASS}}),Object.defineProperty(t,"PROFILE_BOOTSTRAP_CLASS",{enumerable:!0,get:function(){return a.PROFILE_BOOTSTRAP_CLASS}}),Object.defineProperty(t,"COMPLETED_ORDERS_BOOTSTRAP_CLASS",{enumerable:!0,get:function(){return a.COMPLETED_ORDERS_BOOTSTRAP_CLASS}});var s=n(33);Object.defineProperty(t,"APP_VERSION_COOKIE_NAME",{enumerable:!0,get:function(){return s.APP_VERSION_COOKIE_NAME}}),Object.defineProperty(t,"LD_CHECKSUM_COOKIE_NAME",{enumerable:!0,get:function(){return s.LD_CHECKSUM_COOKIE_NAME}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=t.removeFromCart=t.addToCart=t.initCart=t.initActiveProduct=void 0;var i=n(24),r=n(43),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),a=t.initActiveProduct=function(e){return(0,i.createAction)(o.INIT_ACTIVE_PRODUCT,e)},s=t.initCart=function(e){return(0,i.createAction)(o.INIT_CART,e)},l=t.addToCart=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,i.createAction)(o.ADD_TO_CART,{product:e,quantity:t})},c=t.removeFromCart=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,i.createAction)(o.REMOVE_FROM_CART,{product:e,quantity:t})};t.Actions={initActiveProduct:a,initCart:s,addToCart:l,removeFromCart:c}},,,,,function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.addXMLHttpRequestListener=t.addPageScriptLoadListeners=t.addMainScriptLoadListeners=void 0;var r=n(1),o=n(18),a=n(16),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){e?document.dispatchEvent(new CustomEvent("main:load",{detail:{pageKey:e.detail.pageKey}})):document.dispatchEvent(new Event("main:load"))},c=function(e,t){(0,s.default)()||(document.removeEventListener("page-script:init",l),document.addEventListener("page-script:init",l),$(document).one("page:before-unload",function(){t(),document.dispatchEvent(new Event("main:unload"))}),e(),l())};t.addMainScriptLoadListeners=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c;$(document).on("page:load page:restore",function(){r(t,n)}),document.addEventListener("DOMContentLoaded",e),"complete"===document.readyState&&r(t,n)},t.addPageScriptLoadListeners=function(e,t,n){document.addEventListener("main:load",function(i){(0,r.get)(i,"detail.pageKey",e)===e&&(n&&document.addEventListener("main:unload",function(){document.body.classList.contains(e)&&n()}),document.body.classList.contains(e)&&t())}),document.dispatchEvent(new CustomEvent("page-script:init",{detail:{pageKey:e}}))},t.addXMLHttpRequestListener=function(e,t,n){XMLHttpRequest.prototype.open=function(t,i){for(var r=arguments.length,a=Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];e.call.apply(e,[this,t,i].concat(a));var l=(0,o.shouldAttachDpsSessionHeader)(i);if(i&&l){var c=(0,o.getDpsSessionHeader)(n.locationModel,i);this.setRequestHeader(VOLO.configuration.dpsSessionIdCookieName,c)}},window.fetch=function(){var e=Array.prototype.slice.call(arguments),r=e[0],a=e[1],s=(0,o.shouldAttachDpsSessionHeader)(r);if(r&&s){var l=(0,o.getDpsSessionHeader)(n.locationModel,r);a.headers=Object.assign({},a.headers,i({},VOLO.configuration.dpsSessionIdCookieName,l))}return t.apply(this,[r,a])}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.pageReloader=t.getPageReloaderParams=t.LD_CHECKSUM_COOKIE_NAME=t.APP_VERSION_COOKIE_NAME=void 0;var r=n(10),o=i(r),a=n(14),s=i(a),l=n(1),c=t.APP_VERSION_COOKIE_NAME="AppVersion";t.LD_CHECKSUM_COOKIE_NAME="ld_flags_sum",t.getPageReloaderParams=function(e,t){return{url:(0,l.get)(e,"originalEvent.data.url",null),appVersion:t.appVersion||null}},t.pageReloader=function(e,t){t!==(s.default.get(c)||t)&&((0,o.default)(document).off(),window.location.assign(e))}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Overlay=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(0),c=i(l),u=n(40),d=i(u),p=n(98);t.Overlay=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return c.default.createElement(p.Modaled,{blockScrolling:!0,elementId:this.props.elementId},c.default.createElement("div",{className:"product-overlay"},c.default.createElement(d.default,{show:!0,onClose:this.props.onClose},c.default.createElement(d.default.Body,null,this.props.children))))}}]),t}(c.default.Component)},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(39);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(44);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(o).default}});var a=n(97);Object.defineProperty(t,"createStore",{enumerable:!0,get:function(){return i(a).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.types=void 0;var i=n(95);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var r=n(96);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(54),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o);t.types=a},,,function(e,t,n){"use strict";(function(e,i){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.toppingsViewParams,n=e.context;t.store.dispatch(O.Actions.initActiveProduct(t.model.toJSON())),n.toppingsView=new V(t),n.listenTo(n.toppingsView,"nutritionView:create",n._createNutritionView),n.nutritionView&&n.nutritionView.unbind(),b.ios&&(n.decoratedToppingsView=(0,y.decorateInputInModal)(n.toppingsView))}Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantsAssignmentView=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.createToppingsView=o;var s=n(85),l=n(86),c=r(l),u=n(22),d=r(u),p=n(15),f=n(87),h=n(88),m=n(89),v=n(41),g=r(v),_=n(23),y=n(69),b=n(20),O=n(27),w=n(29),C=n(90),k=n(5),T=r(k),S=e.View.extend({className:"topping__header__comment",initialize:function(e){var t=e.template;this.template=t||i.template($("#template-topping-comment").html())},render:function(){var e=this.model.areOptionsVisible();return this.$el.html(this.template(this.model.toJSON())),this.$("#topping-comment-help-text").toggle(e||0===this.model._getSelectedItems().length),this.$("#topping-comment-select-more-text").toggle(!e),this.$("#topping-comment-selected-items-list").toggle(!e),this}}),E=t.ParticipantsAssignmentView=e.View.extend({events:{"click .topping__header":"_toggleDetail"},initialize:function(e){var t=e.participants,n=e.isCollapsible,r=e.numberInputViewFactory,o=e.template,a=e.quantityMap;this.template=o||i.template($("#template-participants-assignment").html()),this.participants=i.cloneDeep(t),this.isCollapsible=n,this.numberInputViewFactory=r,this.quantityMap=a,this.isOpen=!1,this.subviews=[]},render:function(){var e=this;return this.$el.html(this.template({participants:this.participants,isCollapsible:this.isCollapsible})),this.subviews=[],this.$(".js-quantity").each(function(t,n){var i=$(n).data("id"),r=e.numberInputViewFactory.createView({quantity:e.quantityMap?e.quantityMap[i]:0,id:i});n.appendChild(r.render().el),e.subviews.push(r)}),this},remove:function(){this.subviews.forEach(function(e){return e.remove()});for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];e.View.prototype.remove.apply(this,n)},_toggleDetail:function(){this.isCollapsible&&(this.isOpen=!this.isOpen,this.$(".topping__options").toggleClass("hide",!this.isOpen),$(".js-section-arrow").removeClass("icon-up-open-big icon-down-open-big").addClass(this.isOpen?"icon-up-open-big":"icon-down-open-big"))}}),P=e.View.extend({className:"topping",initialize:function(e){i.bindAll(this),this.template=e.template||i.template($("#template-topping").html()),this.templateComment=e.templateComment||i.template($("#template-topping-comment").html()),this.templateOptions=e.templateOptions||$("#template-topping-option").html(),this.optionClassName=e.optionClassName,this.subViews=[],this.headerCommentSubView=null,this.gtmService=e.gtmService,this.productId=e.productId,this.appConfig=e.appConfig,this.mode=e.mode,this.isMultiToppingsEnabled=e.isMultiToppingsEnabled,this.listenTo(this.model,"topping:validateOptions",this._validateTopping),this.listenTo(this.model,"change:reachedLimit",this._updateReachedLimit)},events:{"click .topping__header":"_toggleOptions"},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.toggleClass("topicOptionCheckbox",this.model.isCheckBoxList()),this.$el.toggleClass("selection-required",this.model.isSelectionRequired()),this._initToppingOptions(),this._showOptions(this.model.areOptionsVisible()),this._renderToppingHeaderCommentView(),this._validateTopping(),this._updateReachedLimit(),this},_updateReachedLimit:function(){var e=this.model.get("reachedLimit")||!1;this.$el.toggleClass("reached-limit",e)},_initToppingOptions:function(){this.model.options.each(this._renderToppingOptionView,this),this.model.options.length>5&&this.$(".product-toppings-more").length>0&&"create"===this.mode&&!this.model.attributes.expandOptions&&(0,h.createToppingViewMoreView)({el:this.$(".product-toppings-more"),optionsCount:this.model.options.length-5,$toppingElement:this.$(".js-topping-options"),toppingDisplayLimit:5})},_renderToppingOptionView:function(e){var t=(0,f.createToppingOptionView)({model:e,isMultipleOptionsOrToggle:this.model.isCheckBoxList(),isMultipleToppingsCandidate:this.model.isMultipleToppingsCandidate(),gtmService:this.gtmService,productId:this.productId,isDishInfoEnabled:i.get(this.appConfig,"features.flags.dish-detailed-information",!1),isMultipleToppingsEnabled:this.isMultiToppingsEnabled,tpl:this.templateOptions,className:this.optionClassName});this.listenTo(t,"toppingOption:updateSelection",this.model.toggleToppingOptionSelection),this.subViews.push(t),this.$(".js-topping-options").append(t.render().el)},_renderToppingHeaderCommentView:function(){this._removeHeaderCommentSubView(),this.headerCommentSubView=new S({model:this.model,template:this.templateComment}),this.$(".js-topping-info").append(this.headerCommentSubView.render().el)},_toggleOptions:function(){this.setOptionsVisibility(!this.model.areOptionsVisible())},setOptionsVisibility:function(e){e!==this.model.areOptionsVisible()&&(e&&this.trigger("topping:openingOptions"),this.model.setOptionsVisibility(e,!0),this._showOptions(e),this._renderToppingHeaderCommentView(),this.$(".topping__header__arrow").toggleClass("icon-down-open-big icon-up-open-big"))},_showOptions:function(e){this.$el.toggleClass("optionsVisible",e),this.$(".topping__options").toggle(e),$(".portlet-header").toggleClass("ui-icon-plus ui-icon-minus")},_validateTopping:function(){this.$(".topping__header").toggleClass("valid invalid",this.model.isValid()),this.trigger("toppings:validateToppings"),this.model.isValid()&&this.$(".product-topping-list").removeClass("invalid-list")},_removeHeaderCommentSubView:function(){this.headerCommentSubView&&i.isFunction(this.headerCommentSubView.remove)&&this.headerCommentSubView.remove()},remove:function(){this.model.options.reset(null),i.invoke(this.subViews,"remove"),this._removeHeaderCommentSubView(),this.undelegateEvents(),e.View.prototype.remove.apply(this,arguments)}}),M=e.View.extend({initialize:function(e){var t=e.template;this.template=t||i.template($("#topping-special-instructions").html())},events:{"click .topping__header":"_toggleInstructions","change .js-topping-special-instructions":"_memorizeInstructions"},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},_memorizeInstructions:function(){this.model.set("special_instructions",this.$(".js-topping-special-instructions").val().trim()),this.trigger("special_instructions:validate")},_toggleInstructions:function(){var e,t;this.$(".topping__options").toggleClass("hide"),e=this.$(".topping__options").hasClass("hide"),this.$(".topping__header__arrow").toggleClass("icon-down-open-big",e),this.$(".topping__header__arrow").toggleClass("icon-up-open-big",!e),t=""!==this.model.get("special_instructions"),this.$(".topping__comment__help-text").toggleClass("hide",t),this.$(".topping__comment__special-instructions").toggleClass("hide",!t),this.$(".topping__comment__special-instructions").html(i.escape(this.model.get("special_instructions")))},remove:function(){this.undelegateEvents(),e.View.prototype.remove.apply(this,arguments)}}),V=e.View.extend({initialize:function(e){this.appConfig=e.appConfig,this.store=e.store,this.selectedToppings=e.selectedToppings||{},this.itemModifierVersion=i.get(this.appConfig,"features.flags.item-modifier-redesign","v1"),this.isItemModifierRedesignEnabled="item-modifier-redesign-off"!==this.itemModifierVersion;var t="#template-choices-toppings",n="#template-toppings-content",r=$("#template-product-variations").html();this.isItemModifierRedesignEnabled&&(t="#item-modifier-modal",n="#item-modifier-content",r=$("#item-modifier-product-variations").html()),this.template=i.template($(t).html()),this.templateContent=i.template($(n).html()),this.cartModel=e.cartModel,this.locationModel=e.locationModel,this.vendorCartModel=this.cartModel.getFirstVendorCart(),this.vendor=e.vendor,this.subViews=[],this.toppingsViews=[],this.specialInstructionsView=null,this.productToUpdate=e.productToUpdate||null,this.originalQuantity=this.productToUpdate?this.productToUpdate.get("quantity"):0,this.gtmService=e.gtmService,this.productId=e.productId,this.mode=e.mode,this.isDishInfoEnabled=i.get(this.appConfig,"features.flags.dish-detailed-information",!1),this.variationsView=(0,m.createVariationsView)(this.model.get("product_variations"),this.isDishInfoEnabled,r,this.selectedToppings),this.numberInputViewFactory=new s.NumberInputViewFactory,this.gtmShopDetailsService=new p.GTMShopDetailsTracker(e.gtmService,this.appConfig.currencySymbol);var o=$("[data-vendor]");this.toppings=i.cloneDeep(o.data("toppings")||o.data("vendor").toppings),this.initialEventOrigin=e.initialEventOrigin,this.multiToppingsFlag=this.appConfig.features.flags["multiple-toppings"],this.isMultiToppingsEnabled="Variation1"===this.multiToppingsFlag&&this.vendor.multiple_toppings,this.popularProductsTracking=e.popularProductsTracking,this._initItemQuantityStore(e.quantityMap),this._shouldDisplayQuantitySection()&&this._initParticipantsAssignmentView(e.quantityMap),this.listenTo(this.model,"change:quantity",this._updateAddToCartButtonStatus),this.listenTo(this.variationsView,"product-variations:change",this._selectProductVariation),this.variationsView.checkIfVariationSelected()},events:{"click .js-toppings-add-to-cart":"_addToCart","hide.bs.modal":"_closeModal","click .topping-allergens-icon":"_createNutritionView",numberChange:"_groupOrderQuantityChange"},render:function(e){e||(this.$el.html(this.template({itemModifierVersion:this.itemModifierVersion})),$("#choices-toppings-modal").modal(),this.addHashRoute());var t=this.store.getState().activeProduct;return t.isDishInfoEnabled=this.isDishInfoEnabled,t.shouldDisplaySuperscript=!i.isEmpty(t.additives),t.isAllergensEnabled=i.get(this.appConfig,"allergensEnabled",!1),t.itemModifierVersion=this.itemModifierVersion,this.$(".modal-content").html(this.templateContent(t)),this.$(".modal-error-message").hide(),this.variationsView.product_variations=this.model.get("product_variations"),this.$(".product-variations").html(this.variationsView.render().el),this.model.isVariationSelected()&&this._initToppings(),this._shouldDisplayQuantitySection()?(this.$el.addClass("is-group-order"),this.$(".participant-assignment").html(this.participantsAssignmentView.render().el)):this._renderQuantitySelector(),this._updateAddToCartButtonStatus(),this.vendor.accepts_instructions&&this._initSpecialInstructions(),0!==t.sold_out_options.length&&this._initSoldOutOptions(t.sold_out_options),this.subViews.length>0&&this.subViews[0].setOptionsVisibility(!0),window.blazy.revalidate(),(this.vendor.multiple_toppings&&"Control"===this.multiToppingsFlag||this.isMultiToppingsEnabled)&&this.gtmService.trackTestParticipated("multiple-toppings",this.multiToppingsFlag,{screenType:"shop_details",userID:this.gtmService.customerModel.get("id"),locationCountry:this.appConfig.countryCode.toUpperCase()}),this},addHashRoute:function(){(0,w.bindBackButton)(w.MODAL_HASHES.TOPPINGS,this._closeModal.bind(this))},_selectProductVariation:function(e){(0,T.default)().emit("itemModifier:toggleToppings",{clear:!0}),this.model.updateFromProductVariation(e),i.invoke(this.toppingsViews,"remove"),this.$(".toppings").empty(),this._initToppings()},_createNutritionView:function(e){this.trigger("nutritionView:create",{event:e,id:this.productId})},_initItemQuantityStore:function(e){var t=this,n=void 0===e?{}:e;this.vendorCartModel.getParticipantsWithCurrentUser().forEach(function(e){var i=e.apiId;void 0===n[i]&&(n[i]=t._shouldDisplayQuantitySection()?0:1)}),this.itemQuantityStore=new c.default(n)},_initParticipantsAssignmentView:function(e){var t=i.template($("#template-participants-assignment").html());this.isItemModifierRedesignEnabled&&(t=i.template($("#item-modifier-participants-assignment").html()));var n=this.vendorCartModel.getParticipantsWithCurrentUser();this.participantsAssignmentView=new E({participants:n,isCollapsible:!this._isNoTopping()||this.productToUpdate,numberInputViewFactory:this.numberInputViewFactory,quantityMap:e,template:t,className:"participants-assignment"})},_mapToppings:function(e){var t=this,n={};e.get("toppings").forEach(function(e){n[e.id]=e});var i=e.topping_ids.map(function(e){return a({},t.toppings[e])});return i.map(function(e){e.options&&e.options.length&&e.options.map(function(i){var r=i.id,o=t.selectedToppings[r],a=void 0!==o;o&&(e.expandOptions=!0),i.selected=a?o:!!n[r],i.selected&&n[r]&&(i.quantity=n[r].quantity)})}),new g.default(i)},_initToppings:function(){this.model.toppings=this._mapToppings(this.model),this.model.toppings.map(this._initToppingView,this),this._updateAddToCartButtonStatus()},_initSpecialInstructions:function(){var e="topping__container",t=i.template($("#topping-special-instructions").html());this.isItemModifierRedesignEnabled&&(e="",t=i.template($("#item-modifier-special-instructions").html())),this.specialInstructionsView=new M({model:this.model,className:e,template:t}),this.$(".toppings__special-instructions").html(this.specialInstructionsView.render().el)},_initSoldOutOptions:function(e){var t=this,n=document.getElementById("product-sold-out-options"),i=e.find(function(e){return e.default});""!==this.model.get("sold_out_option")?i=e.find(function(e){return e.option===t.model.get("sold_out_option")}):this.model.set("sold_out_option",i.option);var r=this.model.toJSON(),o=a({},(0,_.locationModelGTMAdapter)(this.locationModel),{vendorId:this.vendor.id,vendorCode:this.vendor.code,vendorName:this.vendor.name,productName:r.name,productSKU:r.product_id,productCategory:r.menu_category,productVariant:r.product_variations.find(function(e){return e.id===r.product_variation_id}),productUnitPrice:r.total_price,screenType:"shop_details"}),s=null!==this.productToUpdate?this.productToUpdate:this.model;s.set("sold_out_option_updated",!1),null!==n&&(0,C.setupSoldOutOptions)(n,e,i,s,o,this.gtmService)},_renderQuantitySelector:function(){var e=i.template($("#template-number-input").html()),t="number-input",n=".modal-footer";this.isItemModifierRedesignEnabled&&(e=i.template($("#item-modifier-quantity").html()),t="",n=".quantity-selector");var r=this.vendorCartModel.getParticipantsWithCurrentUser()[0],o=this.numberInputViewFactory.createView({id:r.apiId,minimum:this.productToUpdate?0:1,quantity:this.vendorCartModel.isNewGroupOrderFlow()&&this.productToUpdate?this.productToUpdate.get("quantity"):this.itemQuantityStore.get(r.apiId),template:e,className:t});this.quantitySelectorView=o,this.isItemModifierRedesignEnabled?this.$(n).html(o.render().el):this.$(n).append(o.render().el)},_initToppingView:function(e){var t=i.template($("#template-topping").html()),n=null,r=null,o="topping-option";this.isItemModifierRedesignEnabled&&(t=i.template($("#item-modifier-topping").html()),n=i.template($("#item-modifier-topping-comment").html()),r=$("#item-modifier-topping-option").html(),o="");var a=new P({model:e,gtmService:this.gtmService,productId:this.productId,appConfig:this.appConfig,mode:this.mode,template:t,templateComment:n,templateOptions:r,optionClassName:o,isMultiToppingsEnabled:this.isMultiToppingsEnabled});this.listenTo(a,"toppings:validateToppings",this._updateAddToCartButtonStatus,this),this.listenTo(a,"topping:openingOptions",this._closeAllTopicOptions,this),this.toppingsViews.push(a),this.subViews.push(a),this.$(".toppings").append(a.render().el)},_isNoTopping:function(){return 0===this.model.toppings.length},_isValidAddToCart:function(){return this._shouldDisplayQuantitySection()&&!this.productToUpdate?this.model.isValid()&&this.model.isVariationSelected()&&this.itemQuantityStore.isNoSelection():this.model.isValid()&&this.model.isVariationSelected()},_updateAddToCartButtonStatus:function(){var e=this._isValidAddToCart();this.$(".js-toppings-add-to-cart").toggleClass("disabled",!e),e&&this.$(".modal-error-message").slideUp("fast")},_updateToppingValidity:function(){this.$(".product-topping-list").removeClass("invalid-list");var e=null,t=this.model.getNotValidToppingsIds();this.model.isVariationSelected()?t.length>0?e=$('[data-topping-id="'+t[0]+'"]'):this.itemQuantityStore.isNoSelection()||(e=$(".js-participants-assignment")):e=$(".js-variation-selector"),e&&e.length&&this.isItemModifierRedesignEnabled&&this._scrollToInvalidElement(e,t)},_scrollToInvalidElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];$(".item-modifier-modal, .modal-body").animate({scrollTop:e[0].offsetTop},200,function(){e.addClass("invalid-list"),t.map(function(e){$('[data-topping-id="'+e+'"]').addClass("invalid-list")})})},_closeAllTopicOptions:function(){i.invoke(this.subViews,"setOptionsVisibility",!1)},_addToCart:function(){if(this._updateToppingValidity(),!this._isValidAddToCart()){var e=this.$(".modal-error-message"),t=this.model.isValid()?e.data("quantity-error"):e.data("topping-error"),n=this.model.toJSON();return void this.gtmShopDetailsService.productChoiceFailedGtmEvent(this.locationModel,this.vendor,n,1,"compulsory",t)}var r=this.cartModel.getCart(this.vendor.id),o=this.itemQuantityStore.toJSON();if(this.productToUpdate){r.updateItems(this.productToUpdate,this.model,o);var a=i.sum(o),s=a-this.originalQuantity;this.model.set("sold_out_options",this.productToUpdate.get("sold_out_options")),this.model.set("sold_out_option",this.productToUpdate.get("sold_out_option")),this.model.set("sold_out_option_updated",this.productToUpdate.get("sold_out_option_updated")),s>0?this.store.dispatch(O.Actions.addToCart(this.model.toJSON(),Math.abs(s))):this.store.dispatch(O.Actions.removeFromCart(this.model.toJSON(),Math.abs(s)));var l=this.quantitySelectorView?this.quantitySelectorView.quantity:a;(l||0===l)&&(l-this.originalQuantity>0?this._fireAddOrRemoveCartEvent(this.model.get("product_variation_id"),i.sum(o)):0!==s&&this._fireAddOrRemoveCartEvent(this.model.get("product_variation_id"),i.sum(o),!0))}else r.addItems(this.model,o),this.store.dispatch(O.Actions.addToCart(this.model.toJSON(),i.sum(o))),this._fireAddOrRemoveCartEvent(this.model.get("product_variation_id"),i.sum(o));this._closeModal()},_fireAddOrRemoveCartEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2],r=this.cartModel.getCart(this.vendor.id),o=i.findWhere(r.products.models,{attributes:{product_variation_id:e}});if(!o)return!1;var s=o.toJSON(),l=void 0;try{l=JSON.parse(localStorage.getItem("crossSellProductIds")).cross_sell_cart.find(function(t){return t.variationId===String(e)})}catch(e){l=null}var c=l?l.eventOrigin:"product choice";this.gtmShopDetailsService.addOrRemoveCartClickedGtmEvent(this.locationModel,n?"remove_cart":"add_cart",this.vendor,t,s,c,this.popularProductsTracking,l?"shop_details":void 0,l?l.requestId:void 0);var u=a({},(0,_.locationModelGTMAdapter)(this.locationModel),{vendorId:this.vendor.id,vendorCode:this.vendor.code,vendorName:this.vendor.name,productName:this.model.get("name"),productSKU:this.model.get("product_id"),productCategory:this.model.get("menu_category"),productVariant:s,productUnitPrice:this.model.get("total_price"),screenType:"shop_details"});this.model.get("sold_out_option_updated")&&this.gtmService.push(a({event:"replacement_option.submitted"},u,{customerPreference:this.model.get("sold_out_option")}))},_closeModal:function(){this.undelegateEvents(),i.invoke(this.subViews,"remove"),this._isNoTopping()&&!this.productToUpdate||this.specialInstructionsView&&this.specialInstructionsView.remove(),this._shouldDisplayQuantitySection()?this.participantsAssignmentView&&this.participantsAssignmentView.remove():this.quantitySelectorView&&this.quantitySelectorView.remove(),this.$("#choices-toppings-modal").modal("hide"),window.location.hash===w.MODAL_HASHES.TOPPINGS&&(0,w.unbindBackButton)(!0),(0,T.default)().emit("itemModifier:toggleToppings",{clear:!0})},_groupOrderQuantityChange:function(e,t,n){this.itemQuantityStore.set(t,n),this._updateAddToCartButtonStatus(),this._updateToppingValidity()},_shouldDisplayQuantitySection:function(){return!this.vendorCartModel.isNewGroupOrderFlow()&&this.vendorCartModel.isGroupOrder()&&(0,d.default)()},unbind:function(){this.stopListening(),this.undelegateEvents()}})}).call(t,n(2),n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_ACTIVE_PRODUCT="@volo/order-details/init-active-product",t.INIT_CART="@volo/order-details/init-cart",t.ADD_TO_CART="@volo/order-details/add-to-cart",t.REMOVE_FROM_CART="@volo/order-details/remove-from-cart"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.quickReorder=void 0;var i=n(12),r=n(39),o={returned_count:0,available_count:0,items:[],cartItems:[]},a=t.quickReorder=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case r.types.GET_QUICK_REORDERS:case r.types.SET_QUICK_REORDERS:return Object.assign({},t.payload);case r.types.SET_CART_ITEMS:return Object.assign({},e,{cartItems:t.payload});default:return e}};t.default=(0,i.combineReducers)({quickReorder:a})},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.isAllParticipantsLocked=t.addItemToCart=t.deleteProductByGuest=t.getCartChanges=t.didCartSettingsChanged=t.didMetaDataChange=t.deliveryTimeText=t.getCustomerFlag=void 0;var i=n(1),r=n(19),o=n(11),a=n(25),s=(t.getCustomerFlag=function(e,t){var n=e.host,i=e.guests,o=i&&i.filter(function(e){return e.code===t});return{isHost:t===n.code,didJoin:t===n.code||i&&o.length>0,state:t===n.code?e.state:o&&o.length>0?o[0].state:r.ParticipantStatus.OPEN}},t.deliveryTimeText=function(t,n,i){var r=+e.get(n,"features.flags.time-range",0),o=t.deliveryTime,s=a.EXPEDITION_TIME_DEFAULT;return i&&(s=i+" "+o,[5,10].includes(r)&&(s=(5===r?i-r:i)+"-"+(i+r)+" "+o)),s},t.didMetaDataChange=function(e,t,n){return e.fulfilment_time!==t.fulfilment_time||e.fulfilment_address!==t.fulfilment_address||e.expedition_type!==t.expedition_type||e.state!==t.state||n&&!(0,i.isEqual)(e.guests,t.guests)},t.didCartSettingsChanged=function(e,t,n,i){if(e&&e.isHost&&t&&n){var r=(0,o.getLocationAddress)();if(t.order_time&&t.order_time!==a.FULFILMENT_TIME_NOW&&t.order_time!==n.fulfilment_time)return!0;if(r&&r.address!==n.fulfilment_address)return!0;if(t.expedition_type&&t.expedition_type!==n.expedition_type)return!0;if(t.expedition_time&&(t.expedition_time!==i||!n.fulfilment_time_text))return!0}return!1},t.getCartChanges=function(e,t,n,i,o,c){var u={};return t.guests?(t.guests.forEach(function(t){if(t.state===r.ParticipantStatus.OPEN&&e[t.code])s(t.code,c);else if(t.state===r.ParticipantStatus.LOCKED)if(n.carts&&n.carts.length>0)s(t.code,c),n.carts.forEach(function(e){e.customer_code===t.code&&(e.products.map(function(e){var n=(0,a.mapperCreateCartWebGroupOrder)(e,i,o,t.code);n&&l(n,c,e.quantity)}),u[e.customer_code]=e)});else if(e[t.code]){var d=e[t.code];s(t.code,c),d.products.map(function(e){var n=(0,a.mapperCreateCartWebGroupOrder)(e,i,o,t.code);n&&l(n,c,e.quantity)}),u[d.customer_code]=d}}),Object.keys(e).forEach(function(e){0===t.guests.filter(function(t){return e===t.code}).length&&s(e,c)})):Object.keys(e).forEach(function(e){s(e,c)}),c.trigger("cart:calculate"),u},t.deleteProductByGuest=function(e,t){var n=t.findProductByUser(e);n&&n.length>0&&t.products.remove(n)}),l=t.addItemToCart=function(e,t,n){var i=e.clone();i.transformToppingsToServerFormat(),i.set("group_order_user_id","user");var r=t.findSimilarProduct(i);void 0!==r?r.set("quantity",n):t._addItem(e,"user",n)};t.isAllParticipantsLocked=function(e){return!(e.guests&&e.guests.length>0)||!e.guests.some(function(e){return e.state!==r.ParticipantStatus.LOCKED})}}).call(t,n(1))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.setupCategoriesReactComponent=t.setupDishReactComponent=t.setupReactCartComponent=t.setupVendorPageReactComponent=void 0;var o=n(20),a=n(0),s=r(a),l=n(3),c=r(l),u=n(8),d=n(134),p=i(d),f=n(5),h=i(f),m=n(18),v=n(51),g=n(136),_=i(g),y=n(137),b=i(y);t.setupVendorPageReactComponent=function(){var e=document.getElementById("order-details-react-root");e&&c.render(s.createElement(_.default,{translations:window.VOLO.orderDetailsProps.translations,phone_number:window.VOLO.orderDetailsProps.phone_number,is_mobile:o.mobile}),e)},t.setupReactCartComponent=function(e){var t=document.getElementById("cart"),n=e.locationService.getModel(),i=n.city,r=n.postcode,o=n.countryCode,a=n.latitude,s=n.longitude,l=n.formattedAddress,c=(0,m.getDynamicPricingParam)();t&&v.isCartLibAvailable&&VOLO.libraries.cart.setUpCart({isSticky:!0,vendor:e.vendor,expeditionType:e.expeditionType,showExpeditionType:e.showExpeditionType,translations:Object.assign({},VOLO.cartTranslations,VOLO.DPSTranslation),cutleryConfig:VOLO.configuration.cutlery,showAddDrink:!0,showRiderTip:e.showRiderTip,priceFormatter:e.formatCurrency,riderTipPercentActive:e.riderTipPercentActive,getEvents:h.default,cartRoot:t,riderTipChoices:e.riderTipChoices,isDishDetailedInformationVisible:e.isDishDetailedInformationVisible,crossSellConfig:e.crossSellConfig,isVatIncludedInProductPrice:e.isVatIncludedInProductPrice,location:{latitude:a,longitude:s,city:i,postcode:r,countryCode:o,address:l},isVendorVatVisible:e.vendor.is_vat_visible,minimumOrderValueSetting:e.minimumOrderValueSetting,platform:e.platform,gtmService:e.gtmService,isPXFlagEnabled:e.isPXFlagEnabled,countryCode:o,globalEntityId:e.globalEntityId,currencySymbol:e.currencySymbol,dynamicPricing:c.dynamic_pricing,user:VOLO.customer?Object.assign({},VOLO.customer.toJSON(),{corporateUser:VOLO.corporateCustomerInfo?{email:VOLO.corporateCustomerInfo.email,sharedAllowanceEnabled:VOLO.corporateCustomerInfo.shared_allowance_enabled,isAllowedFlexibleAddress:VOLO.corporateCustomerInfo.allow_flexible_locations,paymentEnabled:VOLO.corporateCustomerInfo.payment_enabled}:{}}):null,view:1})},t.setupDishReactComponent=function(e,t,n,i,r,o,a){c.render(s.createElement(u.Provider,{store:e},s.createElement(b.default,{item:n,config:i,translations:VOLO.orderDetailsProps.translations,hasPricedTopping:r,intlService:o,isVendorOpen:a})),t)},t.setupCategoriesReactComponent=function(e,t){c.render(s.createElement(p.default,{categories:t}),e)}},,,,,,function(e,t,n){"use strict";function i(e){var t=e.options.filter(function(t){return t.key!==e.selectedOption.key}),n=t.map(function(t,n){return o.default.createElement(a.DropdownOption,{key:n,option:t,selectOption:e.selectOption})});return o.default.createElement("div",{className:"dropdown-menu"},n)}Object.defineProperty(t,"__esModule",{value:!0}),t.DropdownMenu=i;var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(53)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DropdownOption=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(s);t.DropdownOption=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.selectOption=n.selectOption.bind(n),n}return o(t,e),a(t,[{key:"render",value:function(){return l.default.createElement("div",{className:"dropdown-option",onClick:this.selectOption},this.props.option.value)}},{key:"selectOption",value:function(){this.props.selectOption(this.props.option)}}]),t}(l.default.PureComponent)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GET_QUICK_REORDERS="@volo/quick-reorder/get-quick-reorders",t.SET_QUICK_REORDERS="@volo/quick-reorder/set-quick-reorders",t.SET_CART_ITEMS="@volo/quick-reorder/set-cart-items"},function(e,t){e.exports='<svg class="svg-stroke-container" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n    <path fill="#D70F64" fill-rule="evenodd" d="M8 9.016l6.886 6.795a.658.658 0 0 0 .923 0 .637.637 0 0 0 0-.91L9.01 8l6.799-6.902a.637.637 0 0 0 0-.91.659.659 0 0 0-.923 0L8 6.983 1.114.188a.659.659 0 0 0-.923 0 .637.637 0 0 0 0 .911L6.99 8 .19 14.9a.637.637 0 0 0 0 .911.658.658 0 0 0 .923 0L8 9.016z"/>\n</svg>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){window.requestIdleCallback?window.requestIdleCallback(e):setTimeout(e,1)};t.default=function(e,t){return function(n){var r=n.getState;return function(n){return function(o){var a=n(o);return t[o.type]&&i(function(){var n=t[o.type](r());n&&e.push(Object.assign({},n))}),a}}}}},function(e,t,n){"use strict";function i(e){return function(t){var n=t.dispatch,i=t.getState;return function(t){return function(r){return"function"==typeof r?r(n,i,e):t(r)}}}}t.__esModule=!0;var r=i();r.withExtraArgument=i,t.default=r},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.getQuantity=t.quantityById=t.activeProduct=void 0;var r=n(12),o=n(43),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),s=t.activeProduct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case a.INIT_ACTIVE_PRODUCT:return Object.assign({},t.payload);default:return e}},l=t.quantityById=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=void 0,r=void 0;switch(t.type){case a.INIT_CART:var o={};return t.payload.map(function(e){return o[e.product_id]=e.quantity}),Object.assign({},o);case a.ADD_TO_CART:return n=t.payload.product.product_id,r=t.payload.quantity,Object.assign({},e,i({},n,(e[n]||0)+r));case a.REMOVE_FROM_CART:return n=t.payload.product.product_id,r=t.payload.quantity,Object.assign({},e,i({},n,Math.max((e[n]||0)-r,0)));default:return e}};t.getQuantity=function(e,t){return e.quantityById[t]||0};t.default=(0,r.combineReducers)({activeProduct:s,quantityById:l})},function(e,t){e.exports='<svg width="12" height="14" xmlns="http://www.w3.org/2000/svg">\n    <path class="svg-stroke-container" stroke-linejoin="round" stroke-linecap="round" fill-rule="evenodd" fill="none" d="m3.5,1.5l5,5.5l-5,5.5"/>\n</svg>\n'},function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(9),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}l((i=i.apply(e,t||[])).next())})},l=function(){function t(e){i(this,t),this.xhrService=new a.default({appConfig:e})}return r(t,[{key:"fetchQuickReorders",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,void 0,void 0,e.mark(function n(){var i,r,o,a;return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.xhrService.prepareQueryString(t),r=this.xhrService.createAPIUrl("orders/reorder?"+i),e.next=4,this.xhrService.fetch(r,{method:"GET"});case 4:if(o=e.sent,!o.ok){e.next=12;break}return e.next=8,o.json();case 8:return a=e.sent,e.abrupt("return",Promise.resolve(a.data));case 12:return e.abrupt("return",Promise.reject(o));case 13:case"end":return e.stop()}},n,this)}))}},{key:"fetchOrderCart",value:function(t,n){return s(this,void 0,void 0,e.mark(function i(){var r,o,a;return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.xhrService.createAPIUrl("orders/"+t+"/reorder"),e.next=3,this.xhrService.fetch(r,{method:"POST",body:JSON.stringify(n)});case 3:if(o=e.sent,!o.ok){e.next=11;break}return e.next=7,o.json();case 7:return a=e.sent,e.abrupt("return",Promise.resolve(a.data.cart));case 11:return e.abrupt("return",Promise.reject(o));case 12:case"end":return e.stop()}},i,this)}))}}]),t}();t.default=l}).call(t,n(4))},,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(0),c=i(l),u=n(40),d=i(u),p=n(129),f=i(p),h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.openModal=function(){n.setState({showModal:!0})},n.closeModal=function(){n.setState({showModal:!1})},n.closeModalWithoutDefault=function(e){e.preventDefault(),n.closeModal()},n.state={showModal:!1},n.translations=VOLO.Translations.header,n}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.ariaLabelledby,n=e.bannerText,i=e.bannerIcon,r=e.className,o=e.classNameIdentifier,a=e.show,s=this.state.showModal;return c.default.createElement(l.Fragment,null,c.default.createElement(d.default,{ariaLabelledby:t,onClose:this.closeModal,show:s},c.default.createElement(d.default.Body,null,c.default.createElement(d.default.Header,null,c.default.createElement(d.default.CloseButton,{onClick:this.closeModalWithoutDefault})),c.default.createElement(d.default.Description,null,n))),c.default.createElement(f.default,{text:n,icon:i,className:r,classNameIdentifier:o,onMoreClick:this.openModal,show:a,translations:this.translations}))}}]),t}(l.Component);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CURRENT_VENDOR_ID_KEY=void 0;var i=n(1),r=n(111),o=n(5),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(179),l=n(180),c=n(181),u=n(18),d=t.CURRENT_VENDOR_ID_KEY="CURRENT_VENDOR_ID_KEY";t.default=function(e,t,n,o,p){var f=e.latitude,h=e.longitude,m=void 0;return new Promise(function(e,v){if((document.body.classList.contains("menu")||document.body.classList.contains("js-page-vendor-listing"))&&f&&h){var g=Object.assign({latitude:f,longitude:h,include:"metadata",language_id:n,opening_type:t?"pickup":"delivery",vertical:p},(0,u.getDynamicPricingParam)()),_=$("[data-vendor]").data(),y=document.body.classList.contains("menu")&&(0,i.has)(_,"vendor.id");if(y){var b=_.vendor.id;m=o.getAPIVendor(b,g)}else m=o.getAPIVendors(g);m.then(function(t){if(VOLO.locationEventTracking=(0,i.get)(t,"data.location_event",null),y){(0,a.default)().emit(r.SHOP_LOADED_EVENT_NAME,{data:t.data});if((0,s.findIfAllowUserDuringEvent)("shrink",_.vendor.code))return void e({shouldBeShown:!1,shouldBeClose:!1})}var n=(0,l.findActionsWithMessageType)(t.data),o=!1;y&&(o=(0,c.findVendorIsClosed)(t.data.metadata),o?window.sessionStorage.removeItem(d):window.sessionStorage.setItem(d,_.vendor.code)),e(n&&!(0,i.isEmpty)((0,i.trim)(n.message))?{message:n.message,shouldBeShown:!0,shouldBeClose:o}:{shouldBeShown:!1,shouldBeClose:o})},function(t){"abort"!==t&&(0,a.default)().emit(r.SHOP_LOADED_EVENT_NAME,{}),e({shouldBeShown:!1,shouldBeClose:!1})})}else f&&h||(0,a.default)().emit(r.SHOP_LOADED_EVENT_NAME,{noAddress:!0}),e({shouldBeShown:!1,shouldBeClose:!1})})}},function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){(0,l.default)(e,["cartModel","locationModel","$postalCodeBar","gtmService","appConfig","store","userId"]);var t=(0,b.get)(e,"el",".menu__list-wrapper"),n=(0,b.get)(e,"$menu",$(".header")),i=(0,b.get)(e,"$body",$("body"));return new T({el:t,cartModel:e.cartModel,locationModel:e.locationModel,$header:n,$postalCodeBar:e.$postalCodeBar,$body:i,gtmService:e.gtmService,intlService:e.intlService,appConfig:e.appConfig,store:e.store,vendorGeocodingView:e.vendorGeocodingView,dishMenuView:e.dishMenuView,userId:e.userId,expeditionType:e.expeditionType,locationService:e.locationService})}Object.defineProperty(t,"__esModule",{value:!0}),t.MenuView=t.POPULAR=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.createMenuView=o;var s=n(13),l=i(s),c=n(133),u=n(149),d=n(94),p=i(d),f=n(112),h=n(150),m=n(159),v=n(99),g=n(161),_=n(46),y=n(23),b=n(1),O=n(5),w=i(O),C=n(100),k=t.POPULAR="popular",T=t.MenuView=e.View.extend({events:{"click .anchorNavigation":"_navigateToAnchor","click .menu__icon-legend__link":"showAllergyModal"},initialize:function(e){var t=this;this.cartModel=e.cartModel,this.locationModel=e.locationModel,this.locationService=e.locationService,this.domObjects={},this.navigateToAnchorBuffer=30,this.domObjects.$header=e.$header,this.domObjects.$postalCodeBar=e.$postalCodeBar,this.domObjects.$el=e.$el,this.subViews=[],this.vendor=$(".vendor-section").data().vendor,this.nextAvailableTime=this.$el.data().vendorNextAvailable,this.vendor.variant=this.$el.data().vendorIsOpen,this.gtmService=e.gtmService,this.intlService=e.intlService,this.appConfig=e.appConfig,this.store=e.store,this.dishMenuView=e.dishMenuView,this.expeditionType=e.expeditionType,this.isTimedMenusEnabled=this.appConfig.features.flags["timed-menus"],this.popularProductsEnabled="Variation1"===(0,b.get)(VOLO.configuration.features.flags,"popularproductsonrdp"),(0,b.each)(this.$(".menu__item"),this.initSubViews,this),this.toppings=this.vendor.toppings,this.timezone=this.vendor.timezone,this.dishCategoryListTemplate=(0,b.template)($("#dish-category-template").html()),this.selectedToppings={},this.userId=e.userId,this.firedPopularProductsParticipationEvent=!1;var n=this.cartModel.getCart(this.vendor.id);if("v2"===this.appConfig.features.flags["quick-reorder-in-rdp"]){var i=a({},(0,y.locationModelGTMAdapter)(this.locationModel),{userId:this.userId,vendorId:this.vendor.id,vendorCode:this.vendor.code}),r=document.getElementById("vendor-quick-reorder");null!==r&&(0,h.setupReorderComponent)(r,this.appConfig,this.intlService,this.store,n,this.gtmService,i);var o=localStorage.getItem("reorderId"),s=document.getElementById("quick-reorder-overview-provider");null!==s&&(0,h.setupReorderReviewScreen)(s,this.appConfig,this.intlService,this.store,n,this.gtmService,i,o)}this.coordinates={latitude:this.locationModel.latitude,longitude:this.locationModel.longitude};var l=document.getElementById("vendor-closed-root");if(l){var c={name:this.vendor.name,time:this.nextAvailableTime};(0,C.setupVendorClosedModal)(l,c,this.coordinates,"RDP"),this._updateMenus(!0)}(0,w.default)().on("flood-banner:close",function(){t.hasCloseEvent=!0,t.unbind()}),(0,w.default)().on("vendor:closed",function(){return t.unbind()}),(0,w.default)().on("vendor:loadMenu",function(e){return t._updateMenus(e)}),(0,w.default)().on("itemModifier:toggleToppings",function(e){return t.toggleIMToppings(e)}),this.locationService.isValid()&&this.isTimedMenusEnabled||this._updateMenus()},_buildDishMenuViews:function(){if(this.$(".dish-menu-category-list").length<1)return!1;var e=new p.default,t=(0,f.createDishMenuNav)({el:".dish-menu-category-list",model:e});this.dishMenuNav&&this.dishMenuNav.unbind(),this.dishMenuNav=t,$("body").hasClass("not-mobile")&&(0,m.topStickerDecorator)(t.$el),(0,v.createButtonLogicDecorator)({model:e,view:t,nextButton:".next",prevButton:".prev"}),(0,g.highlighterDecorator)(t,e)},_updateMenus:function(e){var t=this,n=this._getSelectedTime(),i=this._datifyTime(n),r={vendorId:this.vendor.code,include:"menus,menu_categories",order_time:i,language_id:this.appConfig.languageId,opening_type:this.expeditionType};if(n!==this.lastMenuLoadingTime){var o=void 0;try{o=Routing.generate("_vendor_details",r)}catch(e){return void this._toggleMenuSections()}this._toggleMenuSections(!0),$.ajax({url:o,method:"GET",headers:{Accept:"application/json","X-PD-Language-ID":VOLO.configuration.languageId}}).done(function(i){var r=i.menus,o=i.toppings,a=r[0];a&&a.tags&&(t[k]=a.tags[k],t.triggerPopularProductsParticipationEvent()),$("[data-vendor]").data("toppings",o),t.lastMenuLoadingTime=n,t._toggleMenuSections(),a&&t._renderMenuCategories(a),(e||t.hasCloseEvent)&&t.unbind()}).fail(function(){t._toggleMenuSections()})}},_toggleMenuSections:function(e){var t=$(".menu__dish-placeholder"),n=$(".dish-menu-category-list"),i=$(".menu__items *");e?(t.removeClass("hide"),n.add(i).addClass("hide")):(t.addClass("hide"),n.add(i).removeClass("hide"),(0,w.default)().emit("cart-view:group-order-cart-item-loaded"))},_getSelectedTime:function(){var e="now";if(this.isTimedMenusEnabled){var t=$('[name="time-picker"]:checked').val()||"",n=$('[name="day-picker"]:checked').val()||"";"now"!==t&&(e=""+n+t||e)}return e},_datifyTime:function(e){var t=void 0;return t="now"===e?moment().tz(this.timezone):moment.tz(e,"YYYY-MM-DDHH:mm",this.timezone),t.format("YYYY-MM-DDTHH:mm:ssZZ")},unbind:function(){(0,b.invoke)(this.subViews,"unbind"),this.subViews.length=0,this.stopListening(),this.undelegateEvents(),this.domObjects={}},initSubViews:function(e){var t=this.$(e).data().object;t.menu_category=this.$(e).data("menu-category"),t.menu_id=Number(this.$(e).data("menu-id"))||void 0,t.menu_category_id=Number(this.$(e).data("menu-category-id"))||void 0,t.menu_category_code=String(this.$(e).data("menu-category-code")),this.subViews.push((0,c.createMenuItemView)({el:$(e),model:(0,u.createMenuItemModel)(t,{appConfig:this.appConfig}),cartModel:this.cartModel,locationModel:this.locationModel,vendor:this.vendor,gtmService:this.gtmService,intlService:this.intlService,appConfig:this.appConfig,store:this.store,selectedToppings:this.selectedToppings}))},_navigateToAnchor:function(e){var t,n;return e.target&&(t=this.$($.attr(e.target,"href")).offset(),n=(0,b.get)(t,"top")),!!n&&($("html, body").animate({scrollTop:n+this.navigateToAnchorBuffer-this.domObjects.$header.outerHeight()},VOLO.configuration.anchorScrollSpeed),!1)},showAllergyModal:function(){this.$("#allergyModal").modal()},_hasPricedTopping:function(e){var t=this;return e.reduce(function(e,n){return[].concat(r(e),r(n.topping_ids.map(function(e){return t.toppings[e]})))},[]).some(function(e){return e.options.some(function(e){return e.price>0})})},_renderMenuCategories:function(e){var t=e.menu_categories,n=e.id,i=(0,b.get)(this.appConfig,"features.flags.variations",!0),o=(0,b.get)(this.appConfig,"allergensEnabled",!1),a=(0,b.get)(this.appConfig,"features.flags.item-counter",!0),s=(0,b.get)(this.appConfig,"features.flags.dish-detailed-information",!1),l=(0,b.get)(this.appConfig,"features.flags.show-price-from-with-non-zero-topping-price",!1),c=(0,b.get)(this.appConfig,"features.flags.showim","Variant"),u="Variant"===c,d=".dish-menu-category-list .dish-control-holder .nav-holder",p=t;if(this.popularProductsEnabled&&this[k]){p=[this.createPopularCategory(t)].concat(r(t))}this.$(d)[0]&&(0,_.setupCategoriesReactComponent)(this.$(d)[0],p),this.$(".menu__items").html(this.dishCategoryListTemplate({isVariationsEnabled:i,isAllergensEnabled:o,isItemCounterEnabled:a,isDishInformationEnabled:s,isShowPriceFromZeroEnabled:l,isAlwaysDisplayItemModifierEnabled:u,categories:p,hasPricedTopping:this._hasPricedTopping.bind(this),menuId:n})),(0,b.invoke)(this.subViews,"unbind"),this.subViews.length=0,(0,b.each)(this.$(".menu__item"),this.initSubViews,this),window.blazy&&window.blazy.revalidate(),this._buildDishMenuViews()},toggleIMToppings:function(e){var t=e.toppingId,n=e.selected;if(e.clear)for(var i in this.selectedToppings)this.selectedToppings.hasOwnProperty(i)&&delete this.selectedToppings[i];else this.selectedToppings[t]=n},createPopularCategory:function(e){var t=this[k].translation_keys,n=t.title,i=t.description,r={id:"popular-cat-section",popular:!0,products:[],name:VOLO.popular[n],description:VOLO.popular[i]};return e.forEach(function(e){e.products.forEach(function(t){if(t.tags&&t.tags[0]===k){var n=a({},t);n.category=e.name,delete n.tags,r.products.push(n)}})}),r},triggerPopularProductsParticipationEvent:function(){if(!this.firedPopularProductsParticipationEvent&&this[k]){var e=(0,b.get)(VOLO.configuration.features.flags,"popularproductsonrdp"),t=(VOLO.configuration.countryCode||"N/A").toUpperCase();"Control"!==e&&"Variation1"!==e||(this.gtmService.trackTestParticipated("popular-products",e,{screenType:"shop_details",userID:this.userId,locationCountry:t}),this.firedPopularProductsParticipationEvent=!0)}}})}).call(t,n(2))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decorateInputInModal=t.decorateFormWithInputListener=void 0;var i=n(10),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.decorateFormWithInputListener=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(t){if(13!==t.keyCode&&9!==t.keyCode){e.$el.children(".error-message, .form__success-message").each(function(e,t){(0,r.default)(t).addClass("hide")})}},i=function(e){13===e.keyCode&&e.preventDefault()};return e.$el.on("keyup",".input-box",n),t&&e.$el.on("keypress",".input-box",i),{unbind:function(){e.$el.off("keyup",n),t&&e.$el.off("keypress",i)}}},t.decorateInputInModal=function(e){var t=function(){window.scrollTo(0,window.pageYOffset)};return e.$el.on("input",".js-input-in-modal",t),{unbind:function(){e.$el.off("input",t)}}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(51),r=n(1);t.default=function(){function t(t){e.bindAll(this),this.domObjects={},this.domObjects.$container=t.$container,this.$window=$(window),this.domObjects.$target=null,this.stickOnTopValueGetter=t.stickOnTopValueGetter,this.startingPointGetter=t.startingPointGetter,this.endPointGetter=t.endPointGetter,this.isActiveGetter=t.isActiveGetter,this.stickingOnTopClass="sticking-on-top",this.redrawCallback=e.throttle(this.redraw,16),this.targetHeight=null,this.windowScrollTop=null,this._originalLeft=0}return t.prototype.init=function(e){this.domObjects.$target=e,this.updateCoordinates(),this.$window.off("resize",this.updateCoordinates).on("resize",this.updateCoordinates),this.$window.off("scroll",this.redrawCallback).on("scroll",this.redrawCallback),this.redraw()},t.prototype._canUpdateCoordinates=function(){var t=(0,r.get)(VOLO.configuration.features.flags,"react-cart",!0),n=(0,r.get)(VOLO.configuration.features.flags,"cartapi",!0);return!(i.isCartLibAvailable&&t&&n)&&(!(this.isActiveGetter&&!this.isActiveGetter())&&(this.isVisible()&&e.isFunction(this.stickOnTopValueGetter)&&e.isFunction(this.startingPointGetter)))},t.prototype.updateCoordinates=function(){if(!this._canUpdateCoordinates())return void this._removeSticking();this._removeSticking(),this.stickOnTopValue=this.stickOnTopValueGetter(),this.startingPoint=this.startingPointGetter(),this.endpoint=this.endPointGetter?this.endPointGetter():null,this.maxHeight=this.$window.outerHeight()-this.stickOnTopValue,this.domObjects.$target&&(this._originalLeft=this.domObjects.$target.offset().left),this.redraw()},t.prototype._setTargetTop=function(e){this.domObjects.$target&&this.domObjects.$target.css({top:e})},t.prototype._checkElementVisibility=function(e){var t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&0!==parseInt(t.opacity,10)},t.prototype._isElementVisible=function(e){return!e||e===document||!!this._checkElementVisibility(e)&&this._isElementVisible(e.parentNode)},t.prototype.isVisible=function(){var t=e.get(this.domObjects,"$target[0]")||e.get(this.domObjects,"$container[0]");return this._isElementVisible(t)},t.prototype.redraw=function(){if(this.isActiveGetter&&!this.isActiveGetter())return!1;this.windowScrollTop=this.$window.scrollTop(),this.windowScrollTop+this.stickOnTopValue>this.startingPoint?(this._addSticking(),this.domObjects.$target&&this.domObjects.$target.length&&(this.targetHeight=this.domObjects.$target.outerHeight(),this.endpoint&&(this.endpoint>this.windowScrollTop+this.stickOnTopValue+this.targetHeight?this._setTargetTop(this.stickOnTopValue):this._setTargetTop(-(this.targetHeight-(this.endpoint-this.windowScrollTop)))))):this._removeSticking()},t.prototype._canChangeSticking=function(t){var n=!!t;return e.get(this.domObjects,"$target.length")&&this.domObjects.$container&&this.domObjects.$container.hasClass(this.stickingOnTopClass)!==n},t.prototype._addSticking=function(){this.isActiveGetter&&!this.isActiveGetter()||this._canChangeSticking(!0)&&(this.domObjects.$container.addClass(this.stickingOnTopClass),this.domObjects.$target.css({position:"fixed",top:this.stickOnTopValue,"max-height":this.maxHeight,width:this.domObjects.$target.innerWidth(),left:this._originalLeft}),this.domObjects.$target.scrollTop(0))},t.prototype._removeSticking=function(){this._canChangeSticking()&&(this.domObjects.$container.removeClass(this.stickingOnTopClass),this.domObjects.$target.css({position:"",top:"","max-height":"",width:"",left:""}))},t.prototype.remove=function(){this._removeSticking(),this.$window.off("resize",this.updateCoordinates),this.$window.off("scroll",this.redraw),this.domObjects={},this.stickOnTopValueGetter=null,this.startingPointGetter=null,this.endPointGetter=null},t}()}).call(t,n(1))},,,,,,function(e,t,n){"use strict";(function(e,i){function r(e){var t=e.nutritionInfos,n=e.isDishInformationEnabled;return new c({el:".modal-dialogs",nutritionInfos:t,isDishInformationEnabled:n})}function o(e){var t=e.event,n=e.context,i=e.productId,o=e.productName,a=e.productPrice,s=e.productDescription,l=e.isToggleMode,c=e.isDishInformationEnabled;t.stopPropagation(),n.toppingsView&&n.toppingsView.unbind(),n.nutritionView=r({nutritionInfos:{},isDishInformationEnabled:c}),l||n.nutritionView.render(l),n.allergensService.getAllergensData({productId:i}).then(function(e){n.nutritionView.handleSuccess({context:n,result:e,productName:o,productPrice:a,productDescription:s,isToggleMode:l,isDishInformationEnabled:c})},function(e){n.nutritionView.showError({isToggleMode:l,error:e.responseJSON||{}}),n.listenTo(n.nutritionView.nutritionErrorView,"toppingsView:create",n._showToppingsView)})}Object.defineProperty(t,"__esModule",{value:!0}),t.createNutritionView=r,t.initNutritionView=o;var a=n(84),s=n(5),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=e.View.extend({initialize:function(e){var t=e.nutritionInfos,n=e.isDishInformationEnabled,r=n?$("#template-dish-detailed-body"):$("#template-nutrition-body");this.nutritionInfos=t,this.isDishInformationEnabled=n,this.template=i.template($("#template-nutrition-info").html()),this.templateNutritionBody=i.template(r.html())},events:{"hide.bs.modal":"_closeModal","click .nutrition__header":"_toggleInfo","click .nutrition-product__back":"_createToppingsView"},_toggleInfo:function(e){e?($(e.target).parents(".nutrition").find(".nutrition-details").toggle(),$(e.target).parents(".nutrition").find(".nutrition__header__arrow").toggleClass("icon-down-open-big icon-up-open-big")):($(".nutrition-details").first().toggle(),$(".nutrition__header__arrow").first().toggleClass("icon-down-open-big icon-up-open-big"))},_createToppingsView:function(e){this.trigger("toppingsView:create",e)},_createSpinner:function(){var e=this.$(".modal-body");this._spinner=new Spinner,this._spinner.spin(e[0])},_handleModal:function(e){e?(this.$(".modal-footer").empty(),this._spinner&&this._spinner.stop()):(this.$el.html(this.template()),$("#nutrition-info-modal").modal(),this._createSpinner())},render:function(e){var t=!i.isEmpty(this.nutritionInfos);return this._handleModal(t),t&&(this.$(".modal-body").html(this.templateNutritionBody(this.nutritionInfos)),this._toggleInfo(),e||this.$(".nutrition-product__back").remove()),this},showError:function(e){var t=e.isToggleMode,n=e.error;this._spinner&&this._spinner.stop(),this.$(".modal-footer").empty(),this.nutritionErrorView=(0,a.createNutritionErrorView)(this.$(".modal-body"),n),this.nutritionErrorView.render(t)},handleSuccess:function(e){var t=e.context,n=e.result,i=e.productName,r=e.productPrice,o=e.productDescription,a=e.isToggleMode,s=e.isDishInformationEnabled,l={name:i,price:r,description:o};s?(l.additives=n.data.additives,l.allergens=n.data.allergens,l.nutrition_facts=n.data.nutrition_facts,l.product_info=n.data.product_info,l.warnings=n.data.warnings):l.nutrition=n.data.items,t.nutritionView.nutritionInfos=l,t.listenTo(t.nutritionView,"toppingsView:create",t._showToppingsView),t.nutritionView.render(a)},_closeModal:function(){this.undelegateEvents(),this.$("#nutrition-info-modal").modal("hide"),(0,l.default)().emit("itemModifier:toggleToppings",{clear:!0})},unbind:function(){this.stopListening(),this.undelegateEvents(),this.nutritionErrorView&&this.nutritionErrorView.unbind()}})}).call(t,n(2),n(1))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(9),s=i(a),l=n(13),c=i(l),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(0,c.default)(t,["appConfig","$"]),this.languageId=t.appConfig.languageId,this.xhrService=new s.default({appConfig:t.appConfig,$:t.$})}return o(e,[{key:"getAllergensData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.default)(e,["productId"]),this.xhrService.send({url:this.xhrService.createFoodprintUrl("categories"),data:{product_id:e.productId,language_id:this.languageId}})}}]),e}();t.default=u},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.generateInviteLink=t.getCartGroupOrder=t.createCartGroupOrder=t.deleteCartGroupOrder=t.leaveGroupOrder=t.joinGroupOrder=t.getGroupOrder=t.updateGroupOrderMeta=t.getGroupOrderMeta=t.createGroupOrder=t.requestProvider=void 0;var i=n(11),r=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}l((i=i.apply(e,t||[])).next())})},o=t.requestProvider=function(e,t){return t.send(Object.assign({},e,{url:t.createAPIUrl("groupie")+"/"+e.route},e.data?{data:JSON.stringify(e.data)}:{},{headers:{"Content-Type":"application/json"}}))};t.createGroupOrder=function(t,n){return r(void 0,void 0,void 0,e.mark(function i(){return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({method:"POST",route:"initiate",data:t},n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i,this)}))},t.getGroupOrderMeta=function(e,t){return o({method:"GET",route:"metadata/"+e},t)},t.updateGroupOrderMeta=function(e,t){return o({method:"PUT",route:"metadata",data:e},t)},t.getGroupOrder=function(e,t){return o({method:"GET",route:"order/code/"+e},t)},t.joinGroupOrder=function(e,t,n){return o({method:"POST",route:"join",data:{groupie_id:e,customer_name:t}},n)},t.leaveGroupOrder=function(e,t){return o({method:"DELETE",route:"order",data:{groupie_id:e}},t)},t.deleteCartGroupOrder=function(e,t){return o({method:"DELETE",route:"cart",data:{groupie_id:e}},t)},t.createCartGroupOrder=function(e,t){return o({method:"POST",route:"cart",data:e},t)},t.getCartGroupOrder=function(e,t,n){return o({method:"GET",route:"updated_carts/"+e+"/"+t},n)},t.generateInviteLink=function(t){var n=t.gid,o=t.brand,a=t.vendorName,s=t.vendorCode,l=t.countryCode,c=t.vendorId,u=t.iosAppStoreId,d=t.firebaseApiKey,p=t.deepLinkUrl,f=t.iosBuildId,h=t.androidBuildId;return r(void 0,void 0,void 0,e.mark(function t(){var r,m,v,g,_,y,b;return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.location.origin+window.location.pathname,m=-1!==r.indexOf("www-st")?"-st":"",v="https%3A%2F%2F"+o+m+".com%3Fc%3D"+l+"%26s%3Ds%26v%3D"+c+"%26groupId%3D"+n,g=r+"?groupOrderId="+n,_=a+" | Order food you love from "+o,y="https://images.deliveryhero.io/image/fd-"+l+"/LH/"+s+"-listing.jpg?width=300",e.next=8,fetch("https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key="+d,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({longDynamicLink:p+"?link="+v+"&ofl="+g+"&apn="+h+"&ibi="+f+"&isi="+u+"&st="+_+"&si="+y})}).then(function(e){return e.json()});case 8:return b=e.sent,(0,i.setGroupOrderInviteLink)(b.shortLink),(0,i.setGroupOrderId)(n),e.abrupt("return",b.shortLink);case 12:case"end":return e.stop()}},t,this)}))}}).call(t,n(4))},function(e,t){e.exports='<svg class="svg-stroke-container" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#D70F64" fill-rule="evenodd" d="M8 9.016l6.886 6.795a.658.658 0 0 0 .923 0 .637.637 0 0 0 0-.91L9.01 8l6.799-6.902a.637.637 0 0 0 0-.91.659.659 0 0 0-.923 0L8 6.983 1.114.188a.659.659 0 0 0-.923 0 .637.637 0 0 0 0 .911L6.99 8 .19 14.9a.637.637 0 0 0 0 .911.658.658 0 0 0 .923 0L8 9.016z"></path></svg>'},,,,function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.get(VOLO,"configuration.smallScreenMaxSize",i);return t.width()<=r};var n=$(window)}).call(t,n(1))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$("#template-nutrition-error").html();return new u({el:e,error:t,tpl:n})}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.createNutritionErrorView=a;var l=n(2),c=n(1),u=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"initialize",value:function(e){var t=e.error,n=e.tpl;this.error=t,this.template=(0,c.template)(n)}},{key:"events",value:function(){return{"click .nutrition-product__back":this.createToppingsView}}},{key:"render",value:function(e){return $(this.el).html(this.template({error:this.error})),e||this.$(".nutrition-product__back").remove(),this}},{key:"unbind",value:function(){this.stopListening(),this.undelegateEvents()}},{key:"createToppingsView",value:function(e){this.trigger("toppingsView:create",e)}}]),t}(l.View)},function(e,t,n){"use strict";(function(e,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=t.NumberInputView=e.View.extend({events:{"click .js-increase":"_increase","click .js-decrease":"_decrease"},initialize:function(e){var t=e.id,i=e.template,r=e.minimum,o=void 0===r?0:r,a=e.quantity,s=void 0===a?0:a;this.quantity=s,this.minimum=o,this.id=t,this.template=i||n.template($("#template-number-input").html()),this.$el.html(this.template({quantity:s})),this.$number=this.$(".js-number")},render:function(){return this.$number.html(this.quantity),this},_changeNumber:function(e){this.quantity=e,this.render(),$(this.el).trigger("numberChange",[this.id,this.quantity]),this.quantity>=999?this.$(".js-increase").attr("disabled",!0):this.$(".js-increase").attr("disabled",!1),this.quantity<=this.minimum?this.$(".js-decrease").attr("disabled",!0):this.$(".js-decrease").attr("disabled",!1)},_increase:function(){this.quantity<999&&this._changeNumber(this.quantity+1)},_decrease:function(){this.quantity>this.minimum&&this._changeNumber(this.quantity-1)}});t.NumberInputViewFactory=function(){function e(){i(this,e)}return r(e,[{key:"createView",value:function(e){return new o(e)}}]),e}()}).call(t,n(2),n(1))},function(e,t,n){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function t(i){n(this,t),this.quantityStore=e.cloneDeep(i)}return i(t,[{key:"set",value:function(e,t){if(void 0===this.quantityStore[e])throw new Error("user id("+e+") is not defined in ItemQuantityStore");this.quantityStore[e]=t}},{key:"get",value:function(e){if(void 0===this.quantityStore[e])throw new Error("user id("+e+") is not defined in ItemQuantityStore");return this.quantityStore[e]}},{key:"toJSON",value:function(){return e.cloneDeep(this.quantityStore)}},{key:"isNoSelection",value:function(){var e=this;return Object.keys(this.quantityStore).some(function(t){return e.quantityStore[t]>0})}}]),t}();t.default=r}).call(t,n(1))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createToppingOptionView=t.ToppingOptionView=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),l=n(1),c=t.ToppingOptionView=function(e){function t(e){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"initialize",value:function(e){this.template=(0,l.template)(e.tpl||$("#template-topping-option").html()),this.$el.toggleClass("selected",this.model.isSelected()),this.$("input").prop("checked",this.model.isSelected()),this.gtmService=e.gtmService,this.productId=e.productId,this.isMultipleOptionsOrToggle=e.isMultipleOptionsOrToggle,this.isMultipleToppingsCandidate=e.isMultipleToppingsCandidate,this.isDishInfoEnabled=e.isDishInfoEnabled,this.isMultipleToppingsEnabled=e.isMultipleToppingsEnabled,this.isAllergensEnabled=e.isAllergensEnabled,this.multipleToppingsLimit=this.model.getPrice()>0?3:1,this.listenTo(this.model,"change:selected",this.updateVisualization),this.listenTo(this.model,"change:quantity",this.updateVisualization)}},{key:"events",value:function(){return{"click .product-topping-item":"updateSelection","click .topping__stepper__item__plus":"increaseToppingQuantity","click .topping__stepper__item__minus":"decreaseToppingQuantity"}}},{key:"render",value:function(){var e=this.model.toJSON();return e.isDishInfoEnabled=this.isDishInfoEnabled,e.isMultipleToppingsEnabled=this.isMultipleToppingsEnabled,e.isMultipleToppingsCandidate=this.isMultipleToppingsCandidate,e.shouldDisplaySuperscript=!(0,l.isEmpty)(e.additives),e.isAllergensEnabled=this.isAllergensEnabled,this.$el.html(this.template(e)),this.isMultipleOptionsOrToggle?(this.$el.addClass("with-multiple-toppings"),this.$(".js-topping-option-checkbox").removeClass("hide")):this.$(".js-topping-option-radio").length>0&&this.$(".js-topping-option-radio").removeClass("hide"),this.updateVisualization(),this}},{key:"updateVisualization",value:function(){this.$el.toggleClass("selected",this.model.isSelected()),this.$("input").prop("checked",this.model.isSelected());var e=this.model.getQuantity();if(this.isMultipleToppingsEnabled){this.$(".toppings__add__more").toggleClass("hide",!this.model.isSelected()),this.$(".topping__item__plus").toggleClass("hide",this.model.isSelected());var t=this.$(".topping__stepper__item__plus"),n=this.$(".topping__stepper__item__minus"),i=t.hasClass("disabled"),r=n.hasClass("disabled"),o=this.$(".product-topping-price");e>0&&this.$(".topping__stepper__count").text(this.model.getQuantity()),e!==this.multipleToppingsLimit||i||t.addClass("disabled"),e<this.multipleToppingsLimit&&i&&t.removeClass("disabled"),1===e&&this.model.getRequired()&&!r&&n.addClass("disabled"),e>1&&r&&n.removeClass("disabled"),e>1?o.text(VOLO.IntlService.formatCurrency(this.model.getQuantity()*this.model.get("price"))):o.text(VOLO.IntlService.formatCurrency(this.model.get("price")))}this.sendGtmEvent()}},{key:"updateSelection",value:function(e){$(e.target).hasClass("topping-allergens-icon")||(this.isMultipleToppingsEnabled&&this.isMultipleToppingsCandidate?this.model.isSelected()||this.trigger("toppingOption:updateSelection",this.model):this.trigger("toppingOption:updateSelection",this.model))}},{key:"increaseToppingQuantity",value:function(e){e.stopPropagation();var t=this.model.getQuantity();t<this.multipleToppingsLimit&&this.model.setQuantity(t+1)}},{key:"decreaseToppingQuantity",value:function(e){e.stopPropagation();var t=this.model.getQuantity(),n=this.model.getRequired();if(t>0&&!n||t>1&&n){var i=t-1;this.model.setQuantity(i),0===i&&this.trigger("toppingOption:updateSelection",this.model)}}},{key:"sendGtmEvent",value:function(){var e=this.model.toJSON(),t=this.model.isSelected()?"menu_add_topping_select":"menu_substract_topping_select";this.gtmService.push({event:t,event_menu_topping_name:e.name,event_menu_topping_id:e.id,event_menu_topping_product_id:this.productId,event_menu_topping_price:e.price})}}]),t}(s.View);t.createToppingOptionView=function(e){var t=e.model,n=e.isMultipleOptionsOrToggle,i=e.gtmService,r=e.productId,o=e.isDishInfoEnabled,a=e.isMultipleToppingsEnabled,s=e.tpl,l=e.className,u=e.isMultipleToppingsCandidate;return new c({className:l,model:t,isMultipleOptionsOrToggle:n,isMultipleToppingsCandidate:u,gtmService:i,productId:r,isDishInfoEnabled:o,isMultipleToppingsEnabled:a,tpl:s})}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createToppingViewMoreView=t.ToppingViewMoreView=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),l=t.ToppingViewMoreView=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"initialize",value:function(e){var t=e.optionsCount,n=e.$toppingElement,i=e.toppingDisplayLimit;this.$toppingElement=n,this.$el.removeClass("hide"),this.$(".product-toppings-count").html(""+t),this.$toppingElement.find("> div:nth-child(n+"+(i+1)+")").css("display","none")}},{key:"events",value:function(){return{click:this.updateToppingsVisualization}}},{key:"updateToppingsVisualization",value:function(){return this.$el.addClass("hide"),this.$toppingElement.find("> div").css("display","block"),!1}}]),t}(s.View);t.createToppingViewMoreView=function(e){var t=e.el,n=e.optionsCount,i=e.$toppingElement,r=e.toppingDisplayLimit;return new l({el:t,optionsCount:n,$toppingElement:i,toppingDisplayLimit:r})}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createVariationsView=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),l=n(1),c=n(5),u=function(e){return e&&e.__esModule?e:{default:e}}(c),d=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"initialize",value:function(e){var t=e.tpl,n=e.variations,i=e.isDishInfoEnabled,r=e.selectedVariations;this.template=(0,l.template)(t),this.productVariations=(0,l.cloneDeep)(n),this.isDishInfoEnabled=i,this.selectedVariations=r}},{key:"events",value:function(){return{"click .variation":this.updateVariation}}},{key:"render",value:function(){return this.$el.html(this.template({variations:this.productVariations,isDishInfoEnabled:this.isDishInfoEnabled})),this}},{key:"checkIfVariationSelected",value:function(){var e=this;this.selectedVariations&&!$.isEmptyObject(this.selectedVariations)&&this.productVariations.forEach(function(t){var n=t.id,i=e.selectedVariations[n];i&&(t.selected=i,e.updateVariation(void 0,n))})}},{key:"updateVariation",value:function(e,t){var n=t||$(e.currentTarget).data("variation-id"),i=null;this.productVariations.forEach(function(e){var t={toppingId:e.id,selected:!1};e.selected=!1,e.id===n&&(e.selected=!0,i=e,t.selected=!0),(0,u.default)().emit("itemModifier:toggleToppings",t)}),this.render(),this.trigger("product-variations:change",i)}}]),t}(s.View);t.createVariationsView=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$("#template-product-variations").html(),i=arguments[3];return new d({tpl:n,variations:e,isDishInfoEnabled:t,selectedVariations:i})}},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.setupSoldOutOptions=void 0;var r=n(0),o=i(r),a=n(3),s=i(a),l=n(91);t.setupSoldOutOptions=function(e,t,n,i,r,a){s.render(o.createElement(l.SoldOutOptions,{soldOutOptions:t,selectedOption:n,translations:VOLO.soldOutOptionsTranslations,model:i,trackingData:r,gtmService:a}),e)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SoldOutOptions=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),c=n(92);t.SoldOutOptions=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.formatOptions=n.formatOptions.bind(n),n.getSelectedOption=n.getSelectedOption.bind(n),n.selectOption=n.selectOption.bind(n),n.trackEvent=n.trackEvent.bind(n),n}return o(t,e),a(t,[{key:"formatOptions",value:function(){var e=this;return this.props.soldOutOptions.map(function(t){return{key:t.option,value:e.props.translations[t.text]}})}},{key:"getSelectedOption",value:function(){return{key:this.props.selectedOption.option,value:this.props.translations[this.props.selectedOption.text]}}},{key:"selectOption",value:function(e){var t=this,n=this.props.soldOutOptions.map(function(n){return n.default=n.option===e.key,n.default&&t.props.model.set("sold_out_option",n.option),n});this.props.model.set("sold_out_option_updated",!0),this.props.model.set("sold_out_options",n)}},{key:"trackEvent",value:function(e,t){if("clicked"===e){var n=document.getElementById("choices-toppings-modal");if(n){var i=n.getElementsByClassName("modal-body");i[0].scrollTop=i[0].scrollHeight}}this.props.gtmService.push(Object.assign({event:"replacement_option."+e},this.props.trackingData,{customerPreference:t}))}},{key:"render",value:function(){var e=this.formatOptions(),t=this.getSelectedOption();return l.createElement("div",{className:"product-sold-out-options-wrapper"},l.createElement("h3",{className:"product-sold-out-title"},this.props.translations.soldOutOptionTitle),l.createElement(c.Dropdown,{options:e,selectedOption:t,selectOption:this.selectOption,trackEvent:this.trackEvent}))}}]),t}(l.PureComponent)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(93);Object.defineProperty(t,"Dropdown",{enumerable:!0,get:function(){return i.Dropdown}});var r=n(52);Object.defineProperty(t,"DropdownMenu",{enumerable:!0,get:function(){return r.DropdownMenu}});var o=n(53);Object.defineProperty(t,"DropdownOption",{enumerable:!0,get:function(){return o.DropdownOption}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Dropdown=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(6),c=i(l),u=n(0),d=i(u),p=n(52);t.Dropdown=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showMenu:!1,selectedOption:e.selectedOption},n.toggleMenu=n.toggleMenu.bind(n),n.selectOption=n.selectOption.bind(n),n.nodeRef=d.default.createRef(),n.handleOutsideClick=n.handleOutsideClick.bind(n),n.handleClick=n.handleClick.bind(n),n}return a(t,e),s(t,[{key:"toggleMenu",value:function(){this.state.showMenu||this.props.trackEvent("clicked",this.state.selectedOption.key),this.setState({showMenu:!this.state.showMenu})}},{key:"handleOutsideClick",value:function(){this.state.showMenu&&this.props.trackEvent("closed",this.state.selectedOption.key),this.setState({showMenu:!1})}},{key:"selectOption",value:function(e){this.setState({selectedOption:Object.assign({},e),showMenu:!1}),this.props.selectOption(e)}},{key:"componentWillMount",value:function(){document.addEventListener("mousedown",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick)}},{key:"handleClick",value:function(e){this.nodeRef.current.contains(e.target)||this.handleOutsideClick()}},{key:"render",value:function(){var e=this.state.showMenu,t=(0,c.default)("dropdown-root",{isOpen:e,isClosed:!e});return d.default.createElement("div",{className:t,ref:this.nodeRef},d.default.createElement("div",{className:"dropdown-control",onClick:this.toggleMenu},d.default.createElement("div",{className:"dropdown-placeholder"},this.state.selectedOption.value),d.default.createElement("span",{className:"bs-caret"},d.default.createElement("span",{className:"caret"}))),e&&d.default.createElement(p.DropdownMenu,{options:this.props.options,selectedOption:this.state.selectedOption,selectOption:this.selectOption}))}}]),t}(d.default.PureComponent)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createHorizontalSliderModel=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),l=n(1),c=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"defaults",value:function(){return{width:0,position:0,minPosition:0,maxPosition:0,items:[],containerWidth:0,useSwipe:!0}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.on("change:containerWidth",this.updateBoundaries),this.on("change:width",this.updateBoundaries),void 0!==e.useSwipe&&this.set("useSwipe",e.useSwipe)}},{key:"getNextPosOutOfBounds",value:function(){if(this.get("position")>=this.get("maxPosition"))return this.get("maxPosition");var e=this.get("position")+this.get("containerWidth"),t=(0,l.sortedLastIndex)(this.get("items"),{right:e},"right");return Math.min(this.get("items")[t].left,this.get("maxPosition"))}},{key:"getPrevPosOutOfBounds",value:function(){if(this.get("position")<=this.get("minPosition"))return this.get("minPosition");var e=(0,l.sortedIndex)(this.get("items"),{left:this.get("position")},"left"),t=this.get("items")[e-1].right-this.get("containerWidth");return Math.max(t,this.get("minPosition"))}},{key:"isFirstPage",value:function(){return this.get("position")===this.get("minPosition")}},{key:"isLastPage",value:function(){return this.get("position")===this.get("maxPosition")}},{key:"prev",value:function(){this.set("position",this.getPrevPosOutOfBounds())}},{key:"next",value:function(){this.set("position",this.getNextPosOutOfBounds())}},{key:"updateBoundaries",value:function(){this.set("maxPosition",this.get("width")-this.get("containerWidth"))}}]),t}(s.Model);t.default=c;t.createHorizontalSliderModel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new c(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setOrderCart=t.setQuickReorders=void 0;var i=n(24),r=n(54),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.setQuickReorders=function(e){return(0,i.createAction)(o.SET_QUICK_REORDERS,Object.assign({},e,{cartItems:[]}))},t.setOrderCart=function(e){return(0,i.createAction)(o.SET_CART_ITEMS,e)}},function(e,t,n){"use strict";(function(e){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.addItemsToVendorCart=t.fetchOrderCart=t.fetchQuickReorders=void 0;var r=n(30),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(39),s=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}l((i=i.apply(e,t||[])).next())})};t.fetchQuickReorders=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(i){return s(void 0,void 0,void 0,e.mark(function r(){var o,s;return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=null!=n?{vendor_id:n}:{},e.next=3,t(o);case 3:return s=e.sent,e.abrupt("return",i((0,a.setQuickReorders)(s)));case 5:case"end":return e.stop()}},r,this)}))}},t.fetchOrderCart=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){return s(void 0,void 0,void 0,e.mark(function o(){var s,l,c,u=this;return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n,i);case 2:return s=e.sent,l=s.vendor_cart[0].products,c=l.map(function(e){var t=e;t.product_variation={id:e.product_variation_id,name:e.name,quantity:e.quantity,is_available:e.is_available,choices:e.choices,toppings:e.toppings};try{var n=u.isNewCartAPI?document.querySelector("[data-variation-id*='"+e.product_id+"']"):document.querySelector("[data-product-id='"+e.product_id+"']");if(n){var i=n.dataset.object?JSON.parse(n.dataset.object):null;null!=i&&(t.is_alcoholic_item=i.is_alcoholic_item)}}catch(e){return t}return t}),e.abrupt("return",r((0,a.setOrderCart)(c)));case 6:case"end":return e.stop()}},o,this)}))}},t.addItemsToVendorCart=function(e,t){return function(){var n=e.getParticipantsWithCurrentUser()[0],r=!0,a=!1,s=void 0;try{for(var l,c=t[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;u.product_variations=[u.product_variation];var d=o.default.createFromMenuItem(u);e.addItems(d,i({},n.apiId,u.product_variation.quantity))}}catch(e){a=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw s}}}}}).call(t,n(4))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),r=n(44),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){return(0,i.createStore)(o.default,e,t)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Modaled=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(0),c=i(l),u=n(3),d=i(u);t.Modaled=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"componentDidMount",value:function(){!0===this.props.blockScrolling&&document.getElementsByTagName("body")[0].classList.add("modal-open")}},{key:"componentWillUnmount",value:function(){!0===this.props.blockScrolling&&document.getElementsByTagName("body")[0].classList.remove("modal-open")}},{key:"render",value:function(){return d.default.createPortal(c.default.createElement("div",{className:"modaled modaled-"+(this.props.stacking||"middle")},this.props.children),document.getElementById(this.props.elementId))}}]),t}(c.default.Component)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.createButtonLogicDecorator=t.ButtonLogicDecorator=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(13),s=i(a),l=n(64),c=i(l),u="768",d=t.ButtonLogicDecorator=function(){function e(t,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u;r(this,e),this.model=t,this.view=n,this.isTouch=(0,c.default)(),this.nextButton=i,this.prevButton=o,this.breakpoint=a,this.updateButtons(),this.model.on("change:containerWidth",this.updateButtons,this),this.model.on("change:position",this.updateButtons,this)}return o(e,[{key:"updateButtons",value:function(){this.nextButton.toggleClass("hide",this.shouldHideNextButton()),this.prevButton.toggleClass("hide",this.shouldHidePrevButton()),this.model.isLastPage()||this.view.updateDimensions()}},{key:"shouldHideNextButton",value:function(){return this.shouldHideAllButtons()||this.model.isLastPage()}},{key:"shouldHidePrevButton",value:function(){return this.shouldHideAllButtons()||this.model.isFirstPage()}},{key:"shouldHideAllButtons",value:function(){return this.isTouch&&window.innerWidth<this.breakpoint||this.model.get("width")<=this.model.get("containerWidth")}},{key:"unbind",value:function(){this.model.off("change:containerWidth",this.updateButtons)}}]),e}();t.createButtonLogicDecorator=function(e){(0,s.default)(e,["model","view","nextButton","prevButton"]);var t=e.model,n=e.view,i=e.nextButton,r=e.prevButton,o=e.breakpoint;return new d(t,n,n.$(i),n.$(r),o)}},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.setupVendorClosedModal=void 0;var r=n(0),o=i(r),a=n(3),s=i(a),l=n(101);t.setupVendorClosedModal=function(e,t,n,i){s.render(o.createElement(l.VendorClosedModalWrapper,{closedDetails:t,address:n,originPage:i}),e)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.VendorClosedModalWrapper=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),c=n(34),u=n(102);t.VendorClosedModalWrapper=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showModal:!0},n.hideModal=n.hideModal.bind(n),n}return o(t,e),a(t,[{key:"render",value:function(){return l.createElement("div",{className:"vendor-closed-modal-wrapper"},this.state.showModal&&l.createElement(c.Overlay,{elementId:"vendor-closed-modal",onClose:this.hideModal},l.createElement(u.VendorClosedModal,{onClose:this.hideModal,translations:VOLO.restaurantClosedTranslations,closedDetails:this.props.closedDetails,address:this.props.address,originPage:this.props.originPage})))}},{key:"hideModal",value:function(){this.setState({showModal:!1})}}]),t}(l.PureComponent)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.VendorClosedModal=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(55),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c);t.VendorClosedModal=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.formatTitle=n.formatTitle.bind(n),n.formatDescription=n.formatDescription.bind(n),n.redirectToOtherRestaurants=n.redirectToOtherRestaurants.bind(n),n}return o(t,e),a(t,[{key:"formatTitle",value:function(){var e=this.props.translations.restaurantClosedTitle,t=e.replace("%RestaurantName%",this.props.closedDetails.name);return"RDP"===this.props.originPage?t.replace("%Time%",this.props.closedDetails.time):t}},{key:"formatDescription",value:function(){var e=this.props.translations.restaurantClosedDescription,t=this.props.closedDetails.time;if("CHECKOUT"===this.props.originPage){var n=$(".checkout__steps").data("vendor"),i=n&&n.metadata&&n.metadata.available_in||new Date,r=new Date(i);t=VOLO.IntlService.formatDate(r).toUpperCase()+" - "+VOLO.IntlService.formatTime(r)}return"CHECKOUT"===this.props.originPage?e.replace("%Time%",t):e}},{key:"redirectToOtherRestaurants",value:function(){var e=this.props.address,t=e.latitude,n=e.longitude;if(null!==t&&null!==n){var i=window.location.origin;window.location.href=i+"/restaurants/lat/"+t+"/lng/"+n}else window.location.href="/"}},{key:"render",value:function(){return u.createElement("section",{className:"vendor-closed-disclaimer"},u.createElement("div",{className:"vendor-closed-header"},u.createElement("h3",{className:"vendor-closed-heading"},this.formatTitle()),u.createElement("button",{onClick:this.props.onClose,className:"icon-close",dangerouslySetInnerHTML:{__html:l.default}})),u.createElement("div",{className:"vendor-closed-description"},this.formatDescription()),u.createElement("button",{className:"button check-other-restautants",onClick:this.redirectToOtherRestaurants},this.props.translations.checkOtherButton),"RDP"===this.props.originPage&&u.createElement("button",{className:"check-menu",onClick:this.props.onClose},this.props.translations.checkMenuButton))}}]),t}(u.PureComponent)},,,,,,,,,function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){e.cartView&&e.cartView.render(),e.vendorGeocodingView&&e.vendorGeocodingView.render(),$(e.vendorGeocodingView.el).hasClass("hide")||e.vendorGeocodingView.submitAddress(),e.cartPreviewView&&e.cartPreviewView.render(),e.vendorAddressView&&e.vendorAddressView.render(),e.allowanceView&&e.allowanceView.render(),e.stickyCartButtonView&&e.stickyCartButtonView.render(),e.locationInput&&e.locationInput.render(),e.inviteParticipantsButtonView&&(e.inviteParticipantsButtonView.setElement(".js-invite-participant-button"),e.inviteParticipantsButtonView.render()),(0,I.setupVendorPageReactComponent)(),(0,A.setupLoyaltyPercentageOnVendor)()}function a(e){if(window.location.pathname.includes("/chain")){var t=(0,x.get)(e.appConfig,"features.flags.web-lists","Original");e.gtmService.trackTestParticipated("web-lists",t)}}function s(e){var t={};return t.vendorPageGtmService=(0,S.createVendorPageGTMService)(e.cartModel.getCart($(".vendor-section").data("vendor").id),e.gtmService),t}function l(e,t,n,i,r,o,a){var s=new T.default({allColleagues:[],el:".modal-dialogs",vendorCart:t,corporateService:a});e.inviteParticipantsModalView=s,s.listenTo(t,"colleagues-allowance:update",function(e){s.updateParticipants(e.participants),s.updateAllColleagues(e.newColleagueList)}),s.on("confirm",function(e){t.trigger("cart-allowance:update",e),o.groupOrderCreatedGtmEvent(n,e)}),s.on("show",function(){s.updateParticipants(t.get("participants"))});var l=new C.default({model:t});return l.on("click",function(){null!==s&&(s.show(),o.groupOrderClickedGtmEvent(n,i,r))}),l}function c(t){var n=void 0,i=t.product.variation_id,o=$('.menu__item[data-product-id="'+t.product.id+'"]');0===o.length&&(o=$('.menu__item[data-variation-id*="'+i+'"]'));var a=o.data("object"),s=O.default.createFromMenuItem(a,t.appConfig,i);if("create"===t.mode)n={el:".modal-dialogs",model:s,cartModel:t.cartModel,locationModel:t.locationModel,vendor:t.vendor,gtmService:t.gtmService,appConfig:t.appConfig,store:t.store,productIndex:-1,mode:"edit",initialEventOrigin:t.eventOrigin};else{var l=a.product_variations,c=a.sold_out_options,u=e.where(l,{id:i})[0].toppings;e.each(l,function(e){e.selected=!1,e.id===i&&(e.selected=!0,s.set("topping_ids",e.topping_ids))}),s.set("product_variations",l),s.set("product_variation_id",t.product.variation_id),s.set("special_instructions",t.product.special_instructions),s.set("sold_out_option",t.product.sold_out_option),s.set("sold_out_options",c),s.set("sold_out_option_updated",t.product.sold_out_option_updated),s.set("quantity",t.product.quantity),s.set("toppings",t.product.toppings),s.set("productIndex",t.productIndex),s.set("group_order_user_id","user"),t.product.toppings.forEach(function(e){e.type="full",e.original_price=e.price}),s.toppings=new V.default(t.product.toppings);var d=s.clone();d.transformToppingsToMenuFormat(u),n={el:".modal-dialogs",model:d,cartModel:t.cartModel,locationModel:t.locationModel,vendor:t.vendor,gtmService:t.gtmService,appConfig:t.appConfig,store:t.store,productId:a.id,selectedToppings:t.selectedToppings,productToUpdate:s,mode:"edit"},t.product.hasOwnProperty("group_order_user_code")||(n.quantityMap=r({},t.product.group_order_user_id,t.product.quantity))}(0,_.createToppingsView)({toppingsViewParams:n,context:t.context}),t.context.toppingsView.render(!1)}function u(t){var n=e.get(t,"$postalCodeBar",$(".menu__postal-code-bar")),i=e.get(t,"$header",$(".header")),r=e.get(t,"$body",$("body")),o=e.get(t,"$mobilePreviewCart",$(".mobile-cart__preview-container")),a=e.get(t,"vendor",$("[data-vendor]").data("vendor")),s=e.get(t,"userId",$("[data-user-id]").data("user-id")),u=(VOLO.configuration.countryCode||"N/A").toUpperCase(),_={},b=t.cartModel.getCart(a.id),O="delivery"===b.get("expedition_type")&&$("#cart").data("is-active"),w="pickup"===b.get("expedition_type")&&$("#cart").data("is-active"),C=new E.GTMShopDetailsTracker(t.gtmService,t.appConfig.currencySymbol),k=t.locationModel,T={locationAddress:k.address,locationLat:k.latitude,locationLon:k.longitude,locationCity:k.city,locationArea:k.postcode,locationCountry:u,userId:s,vendorCode:a.code,chainId:a.chain.id,pageType:VOLO.tagManager.pageType,vendorDeliveryTime:t.expeditionType,vendorType:"restaurants"},S=!1,P=function e(n){var i=n.data,r=n.noAddress,o=d({},$(".vendor-section").data("vendor"));i&&(o.minOrder=i.minimum_order_amount,o.deliveryFee=i.minimum_delivery_fee),(r||i&&i.metadata.available_in&&(!VOLO.configuration.isCountryPreorderEnabled||!o.is_preorder_enabled))&&(o.minOrder=null,o.deliveryFee=null),i&&S&&(S=!1),S||C.shopDetailsLoadedGtmEvent(t.locationModel,s,o,""),r&&(S=!0),r||S||(0,N.default)().removeListener(H,e)};(0,N.default)().on(H,P),O||w?($("#cart").add($(".menu__dish-placeholder")).removeClass("hide"),_.menuView=(0,p.createMenuView)({$header:i,$postalCodeBar:n,$body:r,cartModel:t.cartModel,locationModel:t.locationModel,gtmService:t.gtmService,intlService:t.intlService,appConfig:t.appConfig,store:t.store,vendorGeocodingView:t.vendorGeocodingView,dishMenuView:_.dishMenuNav,userId:t.userId,locationService:t.locationService,expeditionType:t.expeditionType}),_.cartPreviewView=(0,f.createCartPreviewView)({el:o,vendorCart:b}),(0,N.default)().on("cart-lib:edit-product",function(e){c({product:e.product,appConfig:t.appConfig,cartModel:t.cartModel,locationModel:t.locationModel,vendor:a,gtmService:t.gtmService,store:t.store,toppingsView:t.toppingsView,context:_.menuView,selectedToppings:e.product.toppings,productIndex:e.productIndex,mode:e.mode,eventOrigin:e.eventOrigin}),C.productChoiceOpenedGtmEvent(t.locationModel,a,e.product,e.eventOrigin||void 0)}),(0,N.default)().on("cart-lib:track-cross-sell-add-quick-addon",function(e,n,i,r,o,s){C.addOrRemoveCartClickedGtmEvent(t.locationModel,"add_cart",a,1,e,o,!1,r,s)}),(0,N.default)().on("cart-lib:track-cross-sell.loaded",function(e){t.gtmService.push(d({},e,T))}),(0,N.default)().on("cart-lib:track-cross-sell-ab-test.participated",function(e){t.gtmService.trackTestParticipated(e.id,e.variation,{pageType:VOLO.tagManager.pageType,userId:s})}),(0,N.default)().on("cart-lib:track-cross-sell-product-swipe",function(e){t.gtmService.push(d({},e,T))})):$(".menu__items *").add($(".dish-menu-category-list")).removeClass("hide"),$(".hero-menu__info-extra").length>0&&(_.vendorAddressView=(0,h.createVendorAddressView)(t)),$(".desktop-cart__special-instructions-tutorial").length>0&&(_.specialInstructionsTutorialView=(0,v.createSpecialInstructionsTutorialView)()),t.appConfig.apiKey===VOLO.configuration.apiKeyCorporate&&(_.inviteParticipantsButtonView=l(_,b,t.locationModel,a.id,s,C,t.corporateService)),_.stickyCartButtonView=(0,g.createStickyCartButtonView)({cartModel:t.cartModel,formatCurrency:t.formatCurrency});var M=document.getElementById("start-group-order-cta");if(M){var V=new B.default({appConfig:t.appConfig}),L=VOLO.groupOrderTranslations,A=L.groupOrderStartCta,D=L.groupOrderInviteCta,R=L.groupOrderStartTooltipHeader,G=L.groupOrderStartTooltipMessage,F=L.groupOrderInviteHeader,z=L.groupOrderInviteMessage,U=L.groupOrderInviteLinkCopied,q=L.groupOrderInviteCopyCta,K=L.groupOrderHostDeliveryIntro,W=L.groupOrderHostPickupIntro,Q=L.deliveryTime;(0,j.setUpStartGroupOrder)({rootElement:M,xhr:V,vendorName:a.name,vendorCode:a.code,vendorId:a.id,brand:t.appConfig.brand,iosAppStoreId:t.appConfig.iosAppStoreId,countryCode:t.appConfig.countryCode,vendorCart:b,firebaseApiKey:t.appConfig.firebaseApiKey,translations:{groupOrderStartCta:A,groupOrderInviteCta:D,groupOrderStartTooltipHeader:R,groupOrderStartTooltipMessage:G,groupOrderInviteHeader:F,groupOrderInviteMessage:z,groupOrderInviteLinkCopied:U,groupOrderInviteCopyCta:q,groupOrderHostDeliveryIntro:K,groupOrderHostPickupIntro:W,deliveryTime:Q},customerModel:t.customerModel,vendor:a,appConfig:t.appConfig,cartView:t.cartView,gtmService:t.gtmService,deepLinkUrl:t.appConfig.deepLinkUrl,iosBuildId:t.appConfig.iosBuildId,androidBuildId:t.appConfig.androidBuildId})}var J=(0,x.get)(VOLO.configuration.features.flags,"react-cart",!0);if((0,x.get)(VOLO.configuration.features.flags,"cartapi",!0)&&J){var Y=t.riderTip.enabled,X=t.riderTip.showOnMenuPage,Z=t.expeditionType,ee=Y&&X,te=VOLO.configuration.pickupEnabled,ne=te&&a.is_pickup_available&&a.is_delivery_available,ie=VOLO.configuration.features.flags["dish-detailed-information"],re=VOLO.isVatIncludedInProductPrice,oe=VOLO.configuration.minimum_order_value_setting;(0,I.setupReactCartComponent)({vendor:a,expeditionType:Z,formatCurrency:t.formatCurrency,showRiderTip:ee,showExpeditionType:ne,riderTipPercentActive:t.riderTip.percentActive,riderTipChoices:t.riderTip.choices,crossSellConfig:{featureFlags:{"cs-cart":VOLO.configuration.features.flags["cs-cart"],"cs-backend":VOLO.configuration.features.flags["cs-backend"],"x-sell-discounts":VOLO.configuration.features.flags["x-sell-discounts"],"x-sell-show-featured-tag":VOLO.configuration.features.flags["x-sell-show-featured-tag"],"cs-bottom-sheet":VOLO.configuration.features.flags["cs-bottom-sheet"],"cs-item-modifier-bottom-sheet":VOLO.configuration.features.flags["cs-item-modifier-bottom-sheet"],"cs-bottom-sheet-backend":VOLO.configuration.features.flags["cs-bottom-sheet-backend"],"cs-filter":VOLO.configuration.features.flags["cs-filter"],"cs-sorting":VOLO.configuration.features.flags["cs-sorting"]},customer_code:VOLO.customer.get("code"),brand:VOLO.configuration.brand,country_code:VOLO.configuration.countryCode,language_id:VOLO.configuration.languageId,apiKey:VOLO.configuration.apiKey,discoApiBaseUrl:VOLO.configuration.discoApiBaseUrl},isDishDetailedInformationVisible:ie,isVatIncludedInProductPrice:re,locationService:t.locationService,minimumOrderValueSetting:oe,platform:t.appConfig.platform,gtmService:t.gtmService,isPXFlagEnabled:VOLO.configuration.features.flags.perimeterx,globalEntityId:VOLO.configuration.global_entity_id,currencySymbol:VOLO.configuration.currencySymbol})}if($(".restaurants__location").length>0){var ae=VOLO.customer&&VOLO.customer.toJSON();ae&&VOLO.corporateCustomerInfo&&(ae.corporateUser={email:VOLO.corporateCustomerInfo.email,sharedAllowanceEnabled:VOLO.corporateCustomerInfo.shared_allowance_enabled,isAllowedFlexibleAddress:VOLO.corporateCustomerInfo.allow_flexible_locations}),_.locationInput=VOLO.libraries.location.setupWhereComponentView({appConfig:t.appConfig,expeditionType:t.expeditionType,vendorCart:b,locationService:t.locationService,googleMapScriptLoader:t.googleMapScriptLoader,translations:e.get(VOLO,"locationInput.translations",{}),isFlexibleAddressAllowed:e.get(VOLO,"corporateCustomerInfo.allow_flexible_locations",!1),linkedAccount:e.get(VOLO,"configuration.linkedAccount",null),addressCollection:t.addressCollection,user:ae})}return $(".vendor-info-page .nav-tabs").each(function(e,t){_.vendorInfoPageTabView=(0,y.createTabView)({el:t}),_.vendorInfoPageTabView.start()}),_.vendorInfoView=(0,m.createVendorInfoView)($("#rich-description"),C,a,t.locationModel,s),_}Object.defineProperty(t,"__esModule",{value:!0}),t.setupVendorPageComponent=t.SHOP_LOADED_EVENT_NAME=void 0;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p=n(68),f=n(162),h=n(163),m=n(164),v=n(165),g=n(166),_=n(42),y=n(167),b=n(30),O=i(b),w=n(168),C=i(w),k=n(169),T=i(k),S=n(171),E=n(15),P=n(7),M=n(41),V=i(M),I=n(46),j=n(172),L=n(212),A=n(176),x=n(1),D=n(5),N=i(D),R=n(9),B=i(R),H=t.SHOP_LOADED_EVENT_NAME="vendor-data-loaded";t.setupVendorPageComponent=function(e){(0,P.validateComponentDependencies)(e,"config","models.locationModel","models.cartModel","models.customerModel","services.gtmService","services.intlService","views.selectComponent","collections.userAddressCollection");var t=d({},e.views,e.models,e.services,{appConfig:e.config,chains:e.config.chains,timePickerValues:e.config.timePickerValues,riderTip:e.config.riderTip,expeditionType:e.config.expeditionType,formatCurrency:e.config.formatCurrency,userEmail:e.models.customerModel.get("email"),userId:e.models.customerModel.get("id"),customerModel:e.models.customerModel,selectComponent:e.views.selectComponent,addressSearchView:e.views.addressSearchView,store:e.store,addressCollection:e.collections.userAddressCollection}),n=s(t);n.masterCategoryService=t.masterCategoryService,n.upsellService=t.upsellService;var i=u(t);return i.cartCalculationListener=t.cartCalculationListener,i.vendorGeocodingView=t.vendorGeocodingView,i.cartView=t.cartView,$("#cart-icon-sticky").length>0&&(0,L.renderReactForVendorCartIcon)({cartModel:t.cartModel,gtmService:t.gtmService,root:"#cart-icon-sticky"}),o(i),t.gtmService.trackExpedition(t.expeditionType),n.vendorPageGtmService.sendVirtualPageViewEvent(),a(t),d({},e,{views:d({},e.views,i),services:d({},e.services,n)})}}).call(t,n(1))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createDishMenuNav=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),l=n(20),c=n(1),u=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"events",value:function(){return{"click .prev":this.prev,"click .next":this.next}}},{key:"initialize",value:function(e){this.slider=e.slider||this.$(".nav-holder ul"),this.container=e.container||this.$(".nav-holder"),this.update(),this.updatePosition(this.model,this.model.get("position")),this.model.on("change:position",this.updatePosition,this),this.resizeCallback=(0,c.debounce)(this.updateDimensions.bind(this),100),$(window).on("resize",this.resizeCallback),window.requestAnimationFrame(this.update.bind(this))}},{key:"update",value:function(){var e=this.getItems(this.slider[0]);this.model.set({width:e[e.length-1].right,items:e,containerWidth:this.container[0].offsetWidth})}},{key:"updateDimensions",value:function(){var e=this.container[0].offsetWidth;this.model.get("containerWidth")!==e&&this.model.set("containerWidth",e)}},{key:"getItems",value:function(e){return(0,c.map)($(e).find("li"),function(e){return{left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,anchor:$(e).find("a"),anchorHref:$(e).find("a").attr("href")}})}},{key:"prev",value:function(){this.model.prev()}},{key:"next",value:function(){this.model.next()}},{key:"unbind",value:function(){this.undelegateEvents(),this.model.off("change:position",this.updatePosition),$(window).off("resize",this.resizeCallback)}},{key:"updatePosition",value:function(e,t){e.get("useSwipe")&&!l.mobile?this.slider.css({transform:"translateX(-"+t+"px)"}):this.container.animate({scrollLeft:t})}}]),t}(s.View);t.default=u;t.createDishMenuNav=function(e){return new u(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prettyLoyaltyPercentageAmount=void 0;var i=n(1);t.prettyLoyaltyPercentageAmount=function(e){var t=(0,i.floor)(e,1);return t%1==0?Math.floor(t):t}},,,,,,,,,,function(e,t,n){"use strict";(function(e,i){function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.el,n=e.parent;return new u({el:t,parent:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.createTooltipView=o;var a=n(213),s=r(a),l=n(83),c=r(l),u=e.View.extend({initialize:function(e){e.parent&&(this.parent=e.parent,this.$el=e.el,this.listenTo(this.parent,"pickup-tooltip:stop-creation",this._setPickupCookie),this._closeAndRemoveTooltip=i.bind(this._closeAndRemoveTooltip,this),$("body").on("click",this._closeAndRemoveTooltip),$(window).on("scroll",this._closeAndRemoveTooltip))},render:function(e){return!(0,c.default)()&&(this._handleTooltipPickup(e),this)},_handleTooltipPickup:function(e){var t=this;this.$el.tooltip({animation:!0,html:!0,placement:e,trigger:"manual",template:'<div class="tooltip pickup-tip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}),(0,s.default)(this.$el,"right"),setTimeout(function(){t.$el.tooltip("show")},500)},_setPickupCookie:function(){Cookies.set("tooltip-pickup-disabled",!0,{secure:!0})},_closeAndRemoveTooltip:function(e){var t=$(e.target).parents(".pickup-tip").length||$(e.target).hasClass("pickup-tip")||"scroll"===e.type;"scroll"===e.type&&$("body").hasClass("home")||(this.$el.tooltip("destroy"),this._unbindEvents(),t&&this._setPickupCookie())},_unbindEvents:function(){$("body").off("click",this._closeAndRemoveTooltip),$(window).off("scroll",this._closeAndRemoveTooltip),this.stopListening()}})}).call(t,n(2),n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.pickupTooltipService={needsPickupTooltipOnHome:function(e,t,n){return!1},needsPickupTooltipOnRLP:function(e,t,n){return!1}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setupSecondaryBanners=void 0;var r=n(126),o=n(130),a=n(1),s=n(67),l=i(s),c=n(182),u=n(5),d=i(u),p=n(187),f=n(63),h=n(7),m=(t.setupSecondaryBanners=function(e){(0,h.validateComponentDependencies)(e,"config","models.locationModel");var t=e.models.locationModel,n=e.config,i="pickup"===n.expeditionType,r=n.languageId,o=(0,f.createVendorService)({$:$,appConfig:n}),s=(0,a.get)(e,"config.vertical","restaurants"),l=e.services.gtmService,c=function(){m(n,t,i,r,o,s,l)};return e.services.locationService.getEventLord().on("location:change",c),m(n,t,i,r,o,s,l),Object.assign({},e,{views:Object.assign({},e.views,{banner:{unbind:function(){t.off("change",c)}}})})},function(e,t,n,i,a,s,u){var f=(0,o.getPromoBannerRoot)();(0,l.default)(t,n,i,a,s).then(function(n){var i=n.message,a=n.shouldBeShown,s=n.shouldBeClose;if(a)(0,r.setupFloodBannerReactComponent)(a,i);else if(f)(0,o.setupPromoBannerReactComponent)(f);else if((0,p.skinnyBannerShouldBeDisplayed)(e)){var l=new p.SkinnyBannerService(e,t,u);l.getSkinnyBanner().then(function(e){if(e){var t=function(){return e.vendor_id&&"shop_list"===u.tagManager.pageType?l.trackShopSkinnyBannerClicked(e):l.trackSkinnyBannerClicked(e),!0};(0,c.setupSkinnyBannerReactComponent)(e,VOLO.skinnyBannerTranslations,l,t)}})}s&&(0,d.default)().emit("flood-banner:close")})})},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.setupFloodBannerReactComponent=void 0;var r=n(0),o=i(r),a=n(3),s=i(a),l=n(127),c=function(e){return e&&e.__esModule?e:{default:e}}(l);t.setupFloodBannerReactComponent=function(e,t){var n=document.getElementById("flood-banner-react-root");n&&s.render(o.createElement(c.default,{shouldBeShown:e,floodBannerText:t}),n)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(128),o=i(r),a=n(0),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),l=n(66),c=i(l),u=function(e){var t=e.shouldBeShown,n=e.floodBannerText;return s.createElement(c.default,{ariaLabelledby:"floodBannerModal",bannerText:n,bannerIcon:o.default,classNameIdentifier:"flood-banner",show:t})};t.default=u},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="warning-icon" width="48" height="48">\n    <defs>\n        <path id="a-icon-flood" d="M22 36.99H10l8.11-13.91 4.15-7.1L24 12.99l6.8 11.66L38 37H26v8h-1v-8h-2v8h-1v-8zm-1.01-29V9H19V11h-1V9h-2V8h2v-2h1v2h1.99zM42 4h1v1.99h1.99v1H43v2h-1V7h-2V6h2V4zm1 21.99v1h-2v2h-1V27L38 27v-1h2v-2h1v2h2zm-15 16v-1h18v1H28zm-5-20l.5 7h1l.5-7h-2zm.25 9v1.5h1.5v-1.5h-1.5zm12.25-17.5a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm-1 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm-23 4a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm-1 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zM2 41.99v-1h18v1H2z"/>\n    </defs>\n    <use xlink:href="#a-icon-flood" fill-rule="evenodd"/>\n</svg>\n'},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(6),c=i(l),u=n(0),d=i(u),p=n(5),f=i(p),h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bannerMessageRef=d.default.createRef(),n.bannerMessageTextRef=d.default.createRef(),n.state={isShortText:!0},n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.show&&!this.calculateIsShortText()&&this.setState({isShortText:!1}),(0,f.default)().emit("secondary-banner:loaded")}},{key:"componentDidUpdate",value:function(e,t){this.props.show&&t.isShortText&&!this.calculateIsShortText()&&this.setState({isShortText:!1})}},{key:"calculateIsShortText",value:function(){var e=void 0,t=void 0,n=this.bannerMessageRef.current,i=this.bannerMessageTextRef.current;return n&&(e=n.clientWidth),i&&(t=i.clientWidth),e!==t}},{key:"render",value:function(){var e=this.props,t=e.text,n=e.icon,i=e.classNameIdentifier,r=e.className,o=e.onMoreClick,a=e.show,s=e.translations,l=this.state.isShortText;return a?document.body.classList.add("show-"+i):document.body.classList.remove("show-"+i),a?d.default.createElement("div",{className:(0,c.default)("banner secondary-banner top-banner",i,r)},d.default.createElement("div",{className:"secondary-banner__content"},d.default.createElement("div",{className:"secondary-banner__message",ref:this.bannerMessageRef},d.default.createElement("span",{className:"secondary-banner__message-text",ref:this.bannerMessageTextRef},t),d.default.createElement("span",{className:(0,c.default)("secondary-banner__message-toggle-button",{hide:l}),onClick:o},s.button_more)),d.default.createElement("p",{className:"secondary-banner__icon",dangerouslySetInnerHTML:{__html:n}}))):null}}]),t}(u.Component);t.default=h},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.getPromoBannerRoot=t.setupPromoBannerReactComponent=void 0;var r=n(0),o=i(r),a=n(3),s=i(a),l=n(131),c=function(e){return e&&e.__esModule?e:{default:e}}(l);t.setupPromoBannerReactComponent=function(e){e&&s.render(o.createElement(c.default,{promoBannerText:e.dataset.promoBannerText}),e)},t.getPromoBannerRoot=function(){return document.getElementById("promo-banner-react-root-vendor-page")?document.getElementById("promo-banner-react-root-vendor-page"):document.getElementById("promo-banner-react-root")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(132),o=i(r),a=n(0),s=i(a),l=n(66),c=i(l),u=function(e){var t=e.promoBannerText;return s.default.createElement(c.default,{ariaLabelledby:"promoBannerModal",bannerText:t,bannerIcon:o.default,classNameIdentifier:"promo-banner",show:!0})};t.default=u},function(e,t){e.exports='<svg class="svg-stroke-container promo-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 67 77">\n    <defs>\n        <path id="promo-marketing" d="M61.43 41.39c-1.38 0-2.5-1.2-2.5-2.67s1.12-2.67 2.5-2.67c1.37 0 2.49 1.2 2.49 2.67s-1.12 2.67-2.5 2.67zM30.56 72.66c-1.37 0-2.49-1.2-2.49-2.67s1.12-2.67 2.5-2.67c1.37 0 2.48 1.2 2.48 2.67 0 1.48-1.11 2.67-2.49 2.67zM10.65 17.34c-1.38 0-2.5-1.2-2.5-2.67 0-1.48 1.12-2.67 2.5-2.67 1.37 0 2.49 1.2 2.49 2.67s-1.12 2.67-2.5 2.67zm40-12c-1.38 0-2.5-1.2-2.5-2.67 0-1.48 1.12-2.67 2.5-2.67 1.37 0 2.49 1.2 2.49 2.67s-1.12 2.67-2.5 2.67zm-30.6 45.41l2.56 3.06-2.45 2.05-2.56-3.05 2.45-2.06zm43.07 2.36L67 54l-1.2 5.2-3.88-.9 1.2-5.2zm-58.75 2l3.88.9-1.19 5.2-3.88-.9 1.2-5.2zm29.87-43.09l3.89.9-1.2 5.2-3.88-.9 1.2-5.2zM3.32 28.68l2.52.5c-.06.3.1.8.68 2.02.87 1.82 1.13 2.63.86 3.8-.24 1.1-.86 1.82-2.15 2.92l-.26.22c-1.04.88-1.4 1.28-1.48 1.59l-2.51-.51c.26-1.18.84-1.82 2.41-3.14l.25-.21c.82-.7 1.17-1.1 1.23-1.38.07-.3-.1-.82-.68-2.03-.87-1.83-1.12-2.62-.87-3.78zm49.14 3.4l-1.87-1.76c.2-.21.31-.72.43-2.07.18-2.01.36-2.84 1.17-3.71.75-.81 1.63-1.1 3.27-1.37l.32-.05c1.33-.21 1.83-.36 2.04-.6.22-.22.33-.74.45-2.09l.05-.47c.15-1.54.4-2.45 1.12-3.24l1.87 1.75c-.18.2-.31.68-.4 1.65l-.05.45c-.17 2.01-.36 2.84-1.17 3.7-.8.88-1.61 1.12-3.6 1.44l-.31.05c-1.05.17-1.54.33-1.72.53-.21.23-.33.75-.45 2.09-.17 2.03-.35 2.83-1.15 3.7zm-4.43 28.5l2.54.23c-.02.29.2.76.93 1.9 1.1 1.69 1.46 2.46 1.35 3.64-.1 1.1-.6 1.88-1.73 3.1l-.23.25c-.91.98-1.22 1.41-1.24 1.72-.03.32.2.8.93 1.94l.25.4c.83 1.3 1.19 2.17 1.1 3.24l-2.55-.22c.03-.27-.17-.73-.69-1.55l-.24-.38c-1.1-1.7-1.45-2.46-1.35-3.65.1-1.19.6-1.88 1.96-3.35l.22-.24c.72-.78 1-1.2 1.03-1.48.03-.3-.2-.8-.93-1.92-1.1-1.71-1.46-2.46-1.35-3.63z"/>\n    </defs>\n    <g fill="#276FBF" fill-rule="evenodd">\n        <path d="M26.67 27.3c.34.74.56 1.4.69 1.94l-.1.04a2.96 2.96 0 0 0-1.2 4.1 3.13 3.13 0 0 0 4.2 1.16 2.96 2.96 0 0 0 .29-5.07 11.6 11.6 0 0 0-1.16-3.62l.64-.35 8.99 3.75L51 50.28 32.98 60 21 38.96l1.83-9.58 3.84-2.07zm-.38 5.07l.5-.87c.31.17.89.42 1.27.22.85-.46.63-3.03-.95-5.8-1.57-2.75-3.7-4.3-4.54-3.84-.85.45-.63 3.03.94 5.79.1.16-.8.66-.9.48-1.85-3.24-2.08-6.32-.54-7.15 1.54-.83 4.1 1 5.95 4.24 1.85 3.25 2.08 6.32.54 7.15-.43.24-1.17.39-2.27-.22z"/>\n        <use fill-opacity=".5" xlink:href="#promo-marketing"/>\n    </g>\n</svg>\n'},function(e,t,n){"use strict";(function(e,i){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return(0,l.default)(e,["cartModel","locationModel","vendor","gtmService","intlService","el","model","appConfig","store"]),new b(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.MenuItemView=void 0,t.createMenuItemView=a;var s=n(13),l=r(s),c=n(30),u=r(c),d=n(76),p=n(77),f=r(p),h=n(42),m=n(22),v=r(m),g=n(15),_=n(46),y=n(27),b=t.MenuItemView=e.View.extend({events:{click:"addProduct","click .menu-item-allergens-icon":"_createNutritionView"},initialize:function(e){this.cartModel=e.cartModel,this.locationModel=e.locationModel,this.vendor=e.vendor,this.gtmService=e.gtmService,this.intlService=e.intlService,this.product=this.model.toJSON(),this.appConfig=e.appConfig,this.store=e.store,this.isNewCartAPI=e.appConfig.features.flags.cartapi,this.selectedToppings=e.selectedToppings,this.allergensService=e.allergensService||new f.default({appConfig:e.appConfig,$:$}),this.gtmShopDetailsService=new g.GTMShopDetailsTracker(e.gtmService,this.appConfig.currencySymbol),this.listenTo(this.cartModel.getCart(this.vendor.id),"cart:productInvalid",this._isMenuItemInvalid);var t=$('.menu__item[data-product-id="'+this.product.id+'"]');t||(t=$('.menu__item[data-variation-id*="'+this.product.id+'"]'));var n=t.data("has-priced-topping"),i="open"===this.vendor.variant;(0,_.setupDishReactComponent)(this.store,this.$(".item-react-root")[0],this.product,this.appConfig,n,this.intlService,i)},_isMenuItemInvalid:function(e){var t=i.map(this.model.get("product_variations"),function(e){return e.id});i.intersection(t,e).length>0&&this._disableMenuItem()},_createNutritionView:function(e){var t=e.target?e:e.event,n=this,r=$(t.target).data("product-id")||this.product.id,o=$(t.target).data("name")||this.product.name,a=$(t.target).data("price")||this.product.product_variations&&this.product.product_variations[0].price||0,s=$(t.target).data("description")||this.product.description,l=$(t.target).hasClass("topping-allergens-icon"),c=i.get(this.appConfig,"features.flags.dish-detailed-information",!1);(0,d.initNutritionView)({event:t,context:n,productId:r,productName:o,productPrice:a,productDescription:s,isToggleMode:l,isDishInformationEnabled:c})},_disableMenuItem:function(){this.unbind(),this.remove()},_sendGtmEventProductLayer:function(e,t){this.gtmShopDetailsService.productChoiceOpenedGtmEvent(this.locationModel,this.vendor,this.product,e,t)},addProduct:function(e){var t,n;if(this.cartModel.getCart(this.vendor.id).isValid()){var r=this.cartModel.getFirstVendorCart(),a=r.isGroupOrder(),s=i.get(this.appConfig,"features.flags.showim","Variant"),l="Variant"===s,c="true"===e.currentTarget.dataset.isPopularProduct,d="true"===e.currentTarget.dataset.isPopularCategory,p=d?"true_popular":!!c&&"true_main";if(this.model.showOrderDialog()||a&&(0,v.default)()||l){var f=l?"flow":"compulsory";this._sendGtmEventProductLayer(f,p),this._showToppingsView(e,p)}else{t=u.default.createFromMenuItem(this.product,this.appConfig),n=this.cartModel.getCart(this.vendor.id);var h=r.getParticipantsWithCurrentUser()[0];n.addItems(t,o({},h.apiId,1)),this.store.dispatch(y.Actions.addToCart(t.toJSON())),this._fireAddToCartEvent(t.get("product_variation_id"),void 0,p)}}},_showToppingsView:function(e,t){var n={el:".modal-dialogs",model:u.default.createFromMenuItem(this.product,this.appConfig),cartModel:this.cartModel,locationModel:this.locationModel,vendor:this.vendor,gtmService:this.gtmService,productId:this.product.id,appConfig:this.appConfig,mode:"create",store:this.store,selectedToppings:this.selectedToppings,popularProductsTracking:t};(0,h.createToppingsView)({toppingsViewParams:n,context:this});var i=$(e.target||e.srcElement).hasClass("nutrition-product__back")||$(e.target||e.srcElement).parents(".nutrition-product__back").length;this.toppingsView.render(i)},unbind:function(){this.stopListening(),this.undelegateEvents()},_fireAddToCartEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2],i=this.model.toJSON();this.gtmShopDetailsService.addOrRemoveCartClickedGtmEvent(this.locationModel,"add_cart",this.vendor,t,i,"menu",n)}})}).call(t,n(2),n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),o=n(135),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(e){var t=e.categories;return r.createElement("ul",null,t.map(function(e){return r.createElement(a.default,{key:e.id,id:e.id,masterCategoryId:e.master_category_id,name:e.name})}))};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),o=function(e){var t=e.id,n=e.masterCategoryId,i=e.name;return r.createElement("li",null,r.createElement("a",{href:"#menu__category-id-"+t,"data-id":t,"data-master-category-id":n,"data-anchor-nav":"",title:i},i))};t.default=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),c=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handlePhoneClick=function(){n.props.is_mobile||n.setState({show_phone_number:!0})},n.state={show_phone_number:!1},n}return o(t,e),a(t,[{key:"render",value:function(){return l.createElement("p",{className:"restaurant-contact-information"},this.props.translations.vendor_number.message,l.createElement("a",{href:this.props.is_mobile?"tel:"+this.props.phone_number:void 0,className:this.state.show_phone_number?"restaurant-contact-active":"restaurant-contact-link","data-number":this.props.phone_number,onClick:this.handlePhoneClick},this.state.show_phone_number?this.props.phone_number:this.props.translations.vendor_number.link),".")}}]),t}(l.Component);t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(58),c=n(1),u=n(0),d=i(u),p=n(8),f=n(138),h=i(f),m=n(144),v=i(m),g=n(145),_=i(g),y=n(146),b=i(y),O=n(147),w=i(O),C=n(148),k=i(C),T=function(){return window.innerWidth>=960},S=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.quantity,i=e.config,r=e.translations,o=e.hasPricedTopping,a=e.intlService,s=e.isVendorOpen,l=i.features.flags["item-counter"],p=(0,c.get)(i.features.flags,"variations",!0),f=i.allergensEnabled,m=i.features.flags["dish-detailed-information"],g=t.is_prepacked_item&&!t.exclude_dish_information,y=!t.is_prepacked_item&&!t.exclude_dish_information,O=i.features.flags["show-price-from-with-non-zero-topping-price"],C=(0,c.get)(i.features.flags,"showim","Variant"),S="Variant"===C,E="Variation1"===(0,c.get)(VOLO.configuration.features.flags,"popularproductsonrdp");return d.default.createElement(u.Fragment,null,d.default.createElement("div",{className:"dish-info-container "+(t.logo_path?" with-image":"")},d.default.createElement("div",{className:"dish-info"},d.default.createElement("h3",{className:"dish-name fn p-name"},l&&!T()&&d.default.createElement(v.default,{quantity:n}),d.default.createElement(b.default,{name:t.name}),!f&&!p&&t.product_variations[0].name&&d.default.createElement(k.default,{variation:t.product_variations[0].name}),m&&t.additives&&d.default.createElement(w.default,{additives:t.additives.join(", ")})),t.description&&d.default.createElement("p",{className:"dish-description e-description ingredients"},t.description)),t.logo_path&&d.default.createElement(_.default,{imagePath:t.logo_path.replace("%s","302")})),d.default.createElement(h.default,{product:t,translations:r,isVariationsEnabled:p,isNonZeroToppingPriceEnabled:O,isAlwaysDisplayItemModifierEnabled:S,hasPricedTopping:o,intlService:a,isVendorOpen:s,isDishInformationEnabled:m,isAllergensEnabled:f,isPrepacked:g,isNotPrepacked:y,isPopularProductsEnabled:E}))}}]),t}(d.default.Component),E=function(e,t){var n=t.item;return{quantity:(0,l.getQuantity)(e,n.id)}};t.default=(0,p.connect)(E)(S)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return e!==t&&null!==t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(139),a=i(o),s=n(0),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),c=n(28),u=n(140),d=i(u),p=n(68),f=function(e){var t=e.product,n=e.translations,i=e.isVariationsEnabled,o=e.isNonZeroToppingPriceEnabled,s=e.isAlwaysDisplayItemModifierEnabled,u=e.hasPricedTopping,f=e.intlService,h=e.isVendorOpen,m=e.isNotPrepacked,v=e.isDishInformationEnabled,g=e.isAllergensEnabled,_=e.isPrepacked,y=e.isPopularProductsEnabled,b=[],O=[],w=t.product_variations,C=w[0],k=!0,T=!1,S=void 0;try{for(var E,P=w[Symbol.iterator]();!(k=(E=P.next()).done);k=!0){var M=E.value;b.push(M.price),M.price_before_discount&&O.push(M.price_before_discount)}}catch(e){T=!0,S=e}finally{try{!k&&P.return&&P.return()}finally{if(T)throw S}}var V=Math.min.apply(Math,b),I=O.length>0?Math.min.apply(Math,O):null;return l.createElement("section",{className:"action-bar"},l.createElement("div",{className:"action-bar-content"},l.createElement("div",{className:"price-tags-container"},l.createElement("span",{className:"price p-price"},l.createElement(c.Hidden,{isHidden:!i},w.length>1||o&&u?n.priceFrom:""," ",f.formatCurrency(V),r(V,I)&&l.createElement("span",{className:"price-discount"},f.formatCurrency(I))),l.createElement(c.Hidden,{isHidden:i},o&&u?n.priceFrom:""," ",f.formatCurrency(C.price),r(C.price,C.price_before_discount)&&l.createElement("span",{className:"price-discount"},f.formatCurrency(C.price_before_discount)))),l.createElement("div",{className:"tags-container"},t.is_sold_out&&l.createElement("p",{className:"dish-tag sold-out-tag"},n.sold_out),y&&t.tags&&t.tags[0]===p.POPULAR&&l.createElement("p",{className:"dish-tag popular-tag"},l.createElement("span",{dangerouslySetInnerHTML:{__html:a.default}}),l.createElement("span",null,n.popular)))),l.createElement(d.default,{isDishInformationEnabled:v,isAllergensEnabled:g,isPrepacked:_,isNotPrepacked:m})),!s&&h?l.createElement("button",{className:"button"},"Add"):"")};t.default=f},function(e,t){e.exports='<svg  xmlns="http://www.w3.org/2000/svg" class="popular-icon" viewbox="0 0 16 16"><path d="M10.346 5.598c-1.012-.89-1.42-1.944-1.222-3.16l.03-.168a.333.333 0 00-.545-.318l-.336.298c-.8.717-1.297 1.24-1.491 1.57l-.07.129c-.363.709-.707 2.156.621 3.602.972.84.667 2.1-.551 2.1-.525 0-.912-1.055-1.162-3.166l-.047-.436a.333.333 0 00-.564-.206C2.96 7.82 2.524 9.92 3.702 12.141a4.942 4.942 0 006.752 1.809c2.364-1.365 3.327-4.14 2.213-5.95l-.231-.304c-.584-.758-.73-.902-2.09-2.098z" /></svg>'},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(141),o=i(r),a=n(142),s=i(a),l=n(143),c=i(l),u=n(0),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=function(e){var t=e.isDishInformationEnabled,n=e.isAllergensEnabled,i=e.isPrepacked,r=e.isNotPrepacked,a=null;return t?a=o.default:n&&i?a=c.default:n&&r&&(a=s.default),a?d.createElement("ul",{className:"dish-characteristics"},d.createElement("li",{className:"menu-item-allergens-icon",dangerouslySetInnerHTML:{__html:a}})):null};t.default=p},function(e,t){e.exports='<svg class="svg-stroke-container" width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" pointer-events="none">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g fill="#276FBF">\n            <path d="M8,14 C4.6862915,14 2,11.3137085 2,8 C2,4.6862915 4.6862915,2 8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 Z M8,13 C10.7614237,13 13,10.7614237 13,8 C13,5.23857625 10.7614237,3 8,3 C5.23857625,3 3,5.23857625 3,8 C3,10.7614237 5.23857625,13 8,13 Z M7.4000001,11 L7.4000001,7 L8.60000014,7 L8.60000014,11 L7.4000001,11 Z M8.03386718,6.32617188 C7.63867111,6.32617188 7.33886719,6.0390625 7.33886719,5.66308594 C7.33886719,5.28710938 7.63867111,5 8.03386718,5 C8.42906325,5 8.72886717,5.28710938 8.72886717,5.66308594 C8.72886717,6.0390625 8.42906325,6.32617188 8.03386718,6.32617188 Z" id="i"></path>\n        </g>\n    </g>\n</svg>\n'},function(e,t){e.exports='<svg width="20" class="dish-not-prepacked" height="19" viewBox="0 0 20 19" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <defs><path id="a-icon-not-prepacked" d="M.06 19H20V0H.06v19z"/></defs>\n    <g class="svg-stroke-container" fill="none" fill-rule="evenodd">\n        <mask id="b-icon-not-prepacked" fill="#fff">\n            <use xlink:href="#a-icon-not-prepacked"/>\n        </mask>\n        <path d="M20 5.11A1 1 0 0 0 19.45 4a3.75 3.75 0 0 0-1.11-.3 2.25 2.25 0 0 0 .22-.49 3.45 3.45 0 0 0-.61-2.82 1 1 0 0 0-.78-.39 1 1 0 0 0-.39.08 3.47 3.47 0 0 0-1.94 2.13 2.31 2.31 0 0 0-.05.53 3.68 3.68 0 0 0-1.15-.31h-.08a1 1 0 0 0-.94.72 3.86 3.86 0 0 0 .14 2.28 1 1 0 0 0-.94.72 3.86 3.86 0 0 0 .14 2.28 1 1 0 0 0-.94.72v.11c.375.439.694.922.95 1.44a3.15 3.15 0 0 1 0-1.31 1.87 1.87 0 0 1 1.62 2.79 1.93 1.93 0 0 1-1.39-.87 5.82 5.82 0 0 1 .3 1.69c.544.6.645 1.482.25 2.19a2.63 2.63 0 0 1-.46-.13c-.07.3-.17.6-.28.91.185.07.376.123.57.16L12 18.27a.48.48 0 0 0 .34.59h.13a.48.48 0 0 0 .47-.36l.57-2.12a3.37 3.37 0 0 0 1.1.2 3.19 3.19 0 0 0 2.92-2.47 1 1 0 0 0-.45-1.11 3.75 3.75 0 0 0 1.27-1.91 1 1 0 0 0-.46-1.09 3.76 3.76 0 0 0 1.27-1.91A1 1 0 0 0 18.7 7 3.76 3.76 0 0 0 20 5.11zM17.17 1s1.64 2.19-.83 3c-1.71-1.93.83-3 .83-3zm-3.62 2.4a1.87 1.87 0 0 1 1.62 2.78c-2.24-.4-1.62-2.78-1.62-2.78zm-.81 3a1.87 1.87 0 0 1 1.62 2.79c-2.24-.41-1.62-2.79-1.62-2.79zm1.87 9.23a2.39 2.39 0 0 1-.81-.15c.25-1.49 1.08-1.83 1.76-1.83a2.69 2.69 0 0 1 1 .22s-.44 1.76-1.94 1.76h-.01zm.81-3a2.39 2.39 0 0 1-.81-.15c.25-1.5 1.08-1.83 1.76-1.83a2.7 2.7 0 0 1 1 .22s-.44 1.75-1.94 1.75l-.01.01zm.81-3a2.39 2.39 0 0 1-.81-.15c.25-1.5 1.08-1.83 1.76-1.83a2.7 2.7 0 0 1 1 .22s-.44 1.75-1.95 1.75v.01zm.81-3a2.41 2.41 0 0 1-.81-.15C16.49 5 17.31 4.64 18 4.64a2.69 2.69 0 0 1 1 .22s-.45 1.76-2 1.76l.04.01z" fill="#D70F64" mask="url(#b-icon-not-prepacked)"/>\n        <path d="M9.28 9c-.29-.25-.62-.51-1.07-.85a4 4 0 0 0-1.88-.45 6.48 6.48 0 0 0-4 1.56 5.64 5.64 0 0 0-2.23 5.2c.192.513.423 1.011.69 1.49A6.74 6.74 0 0 0 6.26 19a5 5 0 0 0 1.54-.23h.07a1.83 1.83 0 0 1 .52-.12 2.63 2.63 0 0 0 2.39-1.95c.08-.32.14-.54.21-.85v-.06A5.56 5.56 0 0 0 9.28 9zm-3-.22h.32a8.23 8.23 0 0 1-1 .59 4.09 4.09 0 0 1-.57.28 7.26 7.26 0 0 0-1.48.82A6 6 0 0 0 2.4 11.8a7.24 7.24 0 0 1-.77 1 1.51 1.51 0 0 1-.53.34 5.4 5.4 0 0 1 5.16-4.4l.02.04zm3.68 6.63A5 5 0 0 0 6.09 18a5.84 5.84 0 0 1-3.35-1.53 4.86 4.86 0 0 1-1.47-2.2 4.22 4.22 0 0 0 1.8-1.69 4.8 4.8 0 0 1 1-1.2 4.86 4.86 0 0 1 .85-.45c.86-.42 2.08-.78 2.68-1.83a3.22 3.22 0 0 1 1 .69 4.91 4.91 0 0 1 1.34 5.58l.02.04z" fill="#D70F64" mask="url(#b-icon-not-prepacked)"/>\n    </g>\n</svg>\n'},function(e,t){e.exports='<svg width="18px" height="18px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g class="svg-stroke-container" fill="#D70F64">\n            <g id="ic_allergens_info_2" transform="translate(1.000000, 1.000000)">\n                <path d="M8,0 C3.057,0 -0.839,4.483 0.156,9.604 C0.762,12.725 3.276,15.238 6.395,15.844 C11.517,16.839 16,12.943 16,8 C16,3.582 12.418,0 8,0 M8,1 C11.895,1 15.056,4.196 14.999,8.104 C14.945,11.817 11.818,14.945 8.104,14.999 C4.197,15.056 1,11.895 1,8 C1,4.141 4.14,1 8,1" id="Fill-7"></path>\n                <path d="M8.875,3.875 C8.875,4.358 8.483,4.75 8,4.75 C7.517,4.75 7.125,4.358 7.125,3.875 C7.125,3.392 7.517,3 8,3 C8.483,3 8.875,3.392 8.875,3.875" id="Fill-8"></path>\n                <path d="M8.4238,13 L7.5758,13 C7.3958,13 7.2498,12.854 7.2498,12.674 L7.2498,6.326 C7.2498,6.146 7.3958,6 7.5758,6 L8.4238,6 C8.6038,6 8.7498,6.146 8.7498,6.326 L8.7498,12.674 C8.7498,12.854 8.6038,13 8.4238,13" id="Fill-9"></path>\n            </g>\n        </g>\n    </g>\n</svg>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),o=function(e){var t=e.quantity;return 0===t?null:r.createElement("span",{className:"dish-item-counter"},t," x")};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),o=function(e){var t=e.imagePath;return r.createElement("picture",null,r.createElement("div",{className:"photo u-photo b-lazy","data-src":t}))};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),o=function(e){var t=e.name;return r.createElement("span",null,t)};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),o=function(e){var t=e.additives;return r.createElement("sup",{className:"dish-product-superscript"},t)};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),o=function(e){var t=e.variation;return r.createElement("sup",{className:"dish-product-variation"},t)};t.default=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createMenuItemModel=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),l=n(1),c=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"defaults",value:function(){return{product_variations:[{topping_ids:[],toppings:[],choices:[]}]}}},{key:"toJSON",value:function(){var e=s.Model.prototype.toJSON.call(this);if(e.sold_out_options&&e.sold_out_options.length>0){var t=e.sold_out_options.find(function(e){return e.default});e.sold_out_option=t.option}return e}},{key:"initialize",value:function(e,t){this.appConfig=(0,l.get)(t,"appConfig")}},{key:"hasToppings",value:function(){return this.get("product_variations")[0].topping_ids.length>0}},{key:"hasChoices",value:function(){return this.get("product_variations")[0].choices.length>0}},{key:"hasMultipleVariations",value:function(){return this.get("product_variations").length>1&&(0,l.get)(this.appConfig,"features.flags.variations",!0)}},{key:"showOrderDialog",value:function(){return this.hasChoices()||this.hasToppings()||this.hasMultipleVariations()}}]),t}(s.Model);t.default=c;t.createMenuItemModel=function(e,t){return new c(e,t)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setupReorderReviewScreen=t.setupReorderComponent=void 0;var r=n(38),o=n(0),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),s=n(3),l=n(8),c=n(198),u=i(c),d=n(151),p=i(d),f=n(156),h=i(f),m=n(60),v=i(m);t.setupReorderComponent=function(e,t,n,i,o,c,d){if((0,u.default)()){var p=new v.default(t),f=p.fetchQuickReorders.bind(p);i.dispatch((0,r.fetchQuickReorders)(f,d.vendorId))}(0,s.render)(a.createElement(l.Provider,{store:i},a.createElement(h.default,{config:t,intlService:n,vendorCart:o,gtmService:c,trackingData:d,translations:VOLO.quickReorderProps.translations})),e)},t.setupReorderReviewScreen=function(e,t,n,i,o,c,u,d){var f=new v.default(t),h=f.fetchOrderCart.bind(f),m={address:{latitude:u.locationLat,longitude:u.locationLon},reorder_time:"now"};null!==d&&i.dispatch((0,r.fetchOrderCart)(h,d,m)),(0,s.render)(a.createElement(l.Provider,{store:i},a.createElement(p.default,{config:t,intlService:n,vendorCart:o,gtmService:c,trackingData:u,translations:VOLO.quickReorderProps.translations})),e)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(27),l=n(38),c=n(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),d=n(8),p=n(34),f=n(29),h=n(152),m=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showOverlay:!1},n.hideModal=n.hideModal.bind(n),n.showModal=n.showModal.bind(n),n}return o(t,e),a(t,[{key:"componentDidMount",value:function(){this.props.quickReorder.cartItems.length>0&&this.showModal()}},{key:"componentDidUpdate",value:function(){this.props.quickReorder.cartItems.length&&!this.state.showOverlay&&this.showModal()}},{key:"render",value:function(){var e=this.props,t=e.quickReorder,n=e.gtmService,i=e.trackingData,r=t.cartItems;return u.createElement("div",{className:"reorder-items"},r.length>0&&u.createElement(p.Overlay,{elementId:"quick-reorder-modal",onClose:this.hideModal},u.createElement(h.ReorderReviewScreen,{onClose:this.hideModal,onAddedToCart:this.hideModal,products:r,addToCart:this.props.addToCart,gtmService:n,addItemsToVendorCart:this.props.addItemsToVendorCart,trackingData:i,translations:this.props.translations})))}},{key:"hideModal",value:function(){this.props.setOrderCart([]),this.props.gtmService.push(Object.assign({event:"reorder_summary.closed"},this.props.trackingData,{pageType:"shop_details"})),window.location.hash===f.MODAL_HASHES.REORDER&&(0,f.unbindBackButton)(!0),this.setState({showOverlay:!1})}},{key:"showModal",value:function(){this.props.gtmService.push(Object.assign({event:"reorder.clicked"},this.props.trackingData,{pageType:"shop_details"})),this.setState({showOverlay:!0}),this.handleBackButton.apply(this)}},{key:"handleBackButton",value:function(){(0,f.bindBackButton)(f.MODAL_HASHES.REORDER,this.hideModal.bind(this))}}]),t}(u.PureComponent),v=function(e,t){return{addToCart:function(t,n){return e((0,s.addToCart)(t,n))},addItemsToVendorCart:function(n){return e((0,l.addItemsToVendorCart)(t.vendorCart,n))},setOrderCart:function(t){return e((0,l.setOrderCart)(t))}}},g=function(e){return Object.assign({},e)};t.default=(0,d.connect)(g,v)(m)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ReorderReviewScreen=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(6),u=i(c),d=n(55),p=i(d),f=n(0),h=i(f),m=n(153);t.ReorderReviewScreen=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.selectProduct=function(e){var t=n.isSelectedProduct(e),i=t.productExists,o=t.productIndex,a=t.selectedProducts;i?a.splice(o,1):a.push(e),n.setState({selectedProducts:[].concat(r(a))})},n.selectProduct=n.selectProduct.bind(n),n.addItemsToCart=n.addItemsToCart.bind(n),n.state={selectedProducts:[]},n}return s(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.products.filter(function(e){return e.is_available});this.setState({selectedProducts:e});var t=this.reorderListForTracking();this.props.gtmService.push(Object.assign({event:"reorder_summary.loaded"},this.props.trackingData,{pageType:"shop_details",reorderList:t}))}},{key:"componentWillUnmount",value:function(){localStorage.removeItem("reorderId")}},{key:"render",value:function(){var e=this,t=this.props.products.map(function(t,n){var i=e.isSelectedProduct(t),r=i.productExists;return h.default.createElement(m.ReorderReviewItem,{key:n,selectProduct:e.selectProduct,product:t,isSelectedProduct:r})}),n=(0,u.default)("button","add-cart-button",{"button--disabled":0===this.state.selectedProducts.length});return h.default.createElement("section",{className:"reorder-review-items"},h.default.createElement("div",{className:"reorder-review-content"},h.default.createElement("div",{className:"reorder-details-header"},h.default.createElement("h3",{className:"previous-order-heading"},this.props.translations.previous_order),h.default.createElement("button",{onClick:this.props.onClose,className:"reorder-details-close",dangerouslySetInnerHTML:{__html:p.default}})),h.default.createElement("h3",{className:"select-items-heading"},this.props.translations.select_items),h.default.createElement("ul",{className:"reorder-select-items"},t)),h.default.createElement("div",{className:"reorder-review-footer"},h.default.createElement("button",{className:n,onClick:this.addItemsToCart},this.props.translations.add_items_to_cart)))}},{key:"isSelectedProduct",value:function(e){for(var t=[].concat(r(this.state.selectedProducts)),n=t.length,i=!1,o=-1,a=0;a<n;a++)t[a].product_id===e.product_id&&(i=!0,o=a);return{productExists:i,productIndex:o,selectedProducts:t}}},{key:"addItemsToCart",value:function(e){var t=[].concat(r(this.state.selectedProducts));if(t.length>0){var n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,c=$('.menu__item[data-product-id="'+l.product_id+'"]');if(c){l.menu_category=c.data("menu-category"),l.menu_id=Number(c.data("menu-id"))||void 0,l.menu_category_id=Number(c.data("menu-category-id"))||void 0,l.menu_category_code=String(c.data("menu-category-code"));var u=c.data("object"),d=u.code,p=u.product_variations;l.code=String(d),l.variation_code=String(p[0].code)}this.props.addToCart(l,l.product_variation.quantity),this.props.gtmService.push(Object.assign({event:"add_cart.clicked"},this.props.trackingData,{pageType:"shop_details",eventOrigin:"reorder",productDetails:l.product_variation.toppings.length>0?"TRUE":"FALSE",productQuantity:l.product_variation.quantity,productName:l.name,productSKU:l.product_id,productVariant:l.product_variation.name,vendorType:VOLO.vendorVertical}))}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}this.props.addItemsToVendorCart(t),this.props.onClose(e);var f=this.reorderListForTracking();this.props.gtmService.push(Object.assign({event:"reorder_summary.accepted"},this.props.trackingData,{pageType:"shop_details",reorderList:f}))}}},{key:"reorderListForTracking",value:function(){var e=this.props.products.length,t=this.props.products.filter(function(e){return e.is_available}).length,n=e-t,i=this.state.selectedProducts.length,r=0,o=!0,a=!1,s=void 0;try{for(var l,c=this.state.selectedProducts[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){r=l.value.product_variation.toppings.filter(function(e){return!e.is_available}).length}}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}return{totalProducts:e,available:t,checked:i,unavailable:n,productUnavailableToppingsChecked:r}}}]),t}(h.default.PureComponent)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ReorderReviewItem=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(6),c=i(l),u=n(154),d=i(u),p=n(155),f=i(p),h=n(0),m=i(h);t.ReorderReviewItem=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.selectOption=function(){n.props.selectProduct(n.props.product)},n}return a(t,e),s(t,[{key:"render",value:function(){var e=Object.assign({},this.props),t=e.product,n=e.isSelectedProduct,i=t.product_variation.toppings.map(function(e,t){return m.default.createElement("li",{key:t,className:(0,c.default)("item-name",{"item-not-available":!e.is_available})},e.name)}),r=(0,c.default)("item-name",{"item-not-available":!t.is_available}),o=t.is_available?m.default.createElement("div",{className:"item-cost"},VOLO.formatCurrency(t.total_price)):m.default.createElement("div",{className:"sold-out-tag"},"SOLD OUT");return m.default.createElement("li",{className:"reorder-single-item",onClick:this.selectOption},m.default.createElement("span",{className:"reorder-option-container"},t.is_available&&m.default.createElement("label",{className:(0,c.default)({"reorder-option-not-selected":!n}),dangerouslySetInnerHTML:{__html:n?f.default:d.default}})),m.default.createElement("div",{className:"item-name-toppings"},m.default.createElement("span",{className:r},t.product_variation.quantity,"x ",t.name),m.default.createElement("ul",{className:"item-toppings"},i)),o)}}]),t}(m.default.Component)},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24">\n    <defs>\n        <path id="checkbox-empty-a" d="M1 1v18h18V1H1zM0 0h20v20H0V0z"/>\n    </defs>\n    <g class="fill-empty-box" fill-rule="evenodd">\n        <g transform="translate(2 2)">\n            <mask id="checkbox-empty-b" fill="#fff">\n                <use xlink:href="#checkbox-empty-a"/>\n            </mask>\n            <use fill="#858585" fill-rule="nonzero" xlink:href="#checkbox-empty-a"/>\n            <g mask="url(#checkbox-empty-b)">\n                <path d="M-2-2h24v24H-2z"/>\n            </g>\n        </g>\n        <path fill="#FFF" d="M0 0h24v24H0z"/>\n    </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24">\n    <defs>\n        <path id="checkbox-filled-a" d="M0 0h20v20H0V0zm13.267 7l-4.315 4.628-2.32-1.921-.636.772L9.04 13l4.956-5.316-.73-.684z"/>\n        <path id="checkbox-filled-c" d="M8.267 0l.73.684L4.04 6 .996 3.479l.636-.772 2.32 1.921z"/>\n    </defs>\n    <g fill="none" fill-rule="evenodd">\n        <g transform="translate(2 2)">\n            <mask id="checkbox-filled-b" fill="#fff">\n                <use xlink:href="#checkbox-filled-a"/>\n            </mask>\n            <use fill="#858585" xlink:href="#checkbox-filled-a"/>\n            <g fill="#D70F64" mask="url(#checkbox-filled-b)">\n                <path d="M-2-2h24v24H-2z"/>\n            </g>\n        </g>\n        <g transform="translate(7 9)">\n            <mask id="checkbox-filled-d" fill="#fff">\n                <use xlink:href="#checkbox-filled-c"/>\n            </mask>\n            <use fill="#858585" xlink:href="#checkbox-filled-c"/>\n            <g fill="#FFF" mask="url(#checkbox-filled-d)">\n                <path d="M-7-9h24v24H-7z"/>\n            </g>\n        </g>\n    </g>\n</svg>\n'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(27),l=n(38),c=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(c),d=n(8),p=n(157),f=function(e){function t(e){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"render",value:function(){var e=this.props.quickReorder.items,t=this.props.quickReorder.cartItems,n=e.length;return u.default.createElement(c.Fragment,null,n>0&&u.default.createElement("div",null,u.default.createElement("h3",{className:"title-flat"},this.props.translations.recent_orders),u.default.createElement(p.Swimlane,{orders:e,cartItems:t,intlService:this.props.intlService,config:this.props.config,addToCart:this.props.addToCart,addItemsToVendorCart:this.props.addItemsToVendorCart,fetchOrderCart:this.props.fetchOrderCart,vendorCart:this.props.vendorCart,gtmService:this.props.gtmService,trackingData:this.props.trackingData,translations:this.props.translations})))}}]),t}(u.default.Component),h=function(e,t){return{addToCart:function(t,n){return e((0,s.addToCart)(t,n))},addItemsToVendorCart:function(n){return e((0,l.addItemsToVendorCart)(t.vendorCart,n))},fetchOrderCart:function(t,n,i){return e((0,l.fetchOrderCart)(t,n,i))}}},m=function(e){return Object.assign({},e)};t.default=(0,d.connect)(m,h)(f)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Swimlane=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(59),c=i(l),u=n(1),d=n(0),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),f=n(158),h=i(f);t.Swimlane=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.listRef=p.createRef(),n.state={showPrevButton:!1,showNextButton:!1,scrollValue:0},n.onNextButtonClick=n.onNextButtonClick.bind(n),n.onPrevButtonClick=n.onPrevButtonClick.bind(n),n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.updateScrollButtons(),window.addEventListener("resize",(0,u.throttle)(this.updateScrollButtons.bind(this),500)),this.props.gtmService.push(Object.assign({event:"reorder.viewed"},this.props.trackingData,{pageType:"shop_details"}))}},{key:"componentDidUpdate",value:function(){this.listRef.current&&this.listRef.current.scrollTo(this.state.scrollValue,0)}},{key:"render",value:function(){var e=this,t=this.props.orders.map(function(t,n){return p.createElement(h.default,{key:n,order:t,cartItems:e.props.cartItems,intlService:e.props.intlService,config:e.props.config,addToCart:e.props.addToCart,addItemsToVendorCart:e.props.addItemsToVendorCart,fetchOrderCart:e.props.fetchOrderCart,gtmService:e.props.gtmService,trackingData:e.props.trackingData,translations:e.props.translations})});return p.createElement("div",{className:"lane-component"},this.state.showNextButton&&p.createElement("div",{className:"button-holder next"},p.createElement("button",{onClick:this.onNextButtonClick,className:"nav-scroller",dangerouslySetInnerHTML:{__html:c.default}})),this.state.showPrevButton&&p.createElement("div",{className:"button-holder prev"},p.createElement("button",{onClick:this.onPrevButtonClick,className:"nav-scroller",dangerouslySetInnerHTML:{__html:c.default}})),p.createElement("div",{className:"lane-wrapper"},p.createElement("ul",{ref:this.listRef,className:"vendor-lane"},t,p.createElement("li",null))))}},{key:"onPrevButtonClick",value:function(){var e=this;this.setState(function(t){var n=t.scrollValue;return n-=e.getScrollValue(),n<0&&(n=0),{scrollValue:n}},this.updateScrollButtons.bind(this))}},{key:"onNextButtonClick",value:function(){var e=this;this.setState(function(t){var n=t.scrollValue;return n+=e.getScrollValue(),e.listRef.current.scrollWidth-n<e.listRef.current.offsetWidth&&(n=e.listRef.current.scrollWidth-e.listRef.current.offsetWidth),{scrollValue:n}},this.updateScrollButtons.bind(this))}},{key:"getScrollValue",value:function(){if(this.listRef.current){var e=this.listRef.current.querySelector("li");if(e)return 2*e.offsetWidth}return 0}},{key:"updateScrollButtons",value:function(){this.listRef.current&&this.setState({showPrevButton:this.state.scrollValue>0,showNextButton:this.listRef.current.offsetWidth+this.state.scrollValue<this.listRef.current.scrollWidth})}}]),t}(p.Component)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(6),c=i(l),u=n(37),d=n(0),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),f=n(29),h=n(60),m=i(h),v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showOverlay:!1,showLoader:!1},n.hideModal=n.hideModal.bind(n),n.showModal=n.showModal.bind(n),n.openOverview=n.openOverview.bind(n),n.checkHash=n.checkHash.bind(n),n}return a(t,e),s(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){return{showLoader:t.showLoader&&0===e.cartItems.length}}}]),s(t,[{key:"render",value:function(){var e=Object.assign({},this.props),t=e.order,n=e.intlService,i=e.config,r=t.vendors[0].products,o=r[0].name,a=r.length>1?p.createElement("div",{className:"reorder-rest-items-count"},"+ ",r.length-1," more items"):"",s=n.formatCurrency(t.total_value),l=this.formattedOrderDate(t.date,n,i);return p.createElement("li",{className:"reorder-items"},p.createElement("div",{className:"reorder-first-item"},p.createElement("span",{className:"reorder-first-item-name"},o),p.createElement("span",{className:"reorder-first-item-cost"},s)),a,p.createElement("div",{className:"reorder-date-action"},p.createElement("span",{className:"reorder-date"},l),p.createElement("button",{className:(0,c.default)("reorder-add-action",{"button-loading-ghost":this.state.showLoader}),onClick:this.openOverview},"ADD TO CART")))}},{key:"componentDidMount",value:function(){this.checkHash()}},{key:"formattedOrderDate",value:function(e,t,n){var i=(0,u.tz)(e,n.timezone),r=i.format("YYYY-MM-DDTHH:mm:ss"),o=new Date(r),a=t.customFormatDate(o,{weekday:"long"}).substring(0,3),s=t.customFormatDate(o,{day:"numeric"});return a+", "+t.customFormatDate(o,{month:"short"})+". "+s}},{key:"hideModal",value:function(){this.props.gtmService.push(Object.assign({event:"reorder_summary.closed"},this.props.trackingData,{pageType:"shop_details"})),window.location.hash===f.MODAL_HASHES.REORDER&&(0,f.unbindBackButton)(!0)}},{key:"showModal",value:function(){this.props.gtmService.push(Object.assign({event:"reorder.clicked"},this.props.trackingData,{pageType:"shop_details"})),this.handleBackButton.apply(this)}},{key:"openOverview",value:function(){if(!this.state.showLoader){this.setState({showLoader:!0});var e=new m.default(this.props.config),t=e.fetchOrderCart.bind(e),n=this.props.order.code,i={address:{latitude:this.props.trackingData.locationLat,longitude:this.props.trackingData.locationLon},reorder_time:"now"};this.props.fetchOrderCart(t,n,i)}}},{key:"checkHash",value:function(){var e=localStorage.getItem("reorderId");window.location.hash===f.MODAL_HASHES.REORDER&&e===this.props.order.id.toString()&&this.handleBackButton.apply(this)}},{key:"handleBackButton",value:function(){(0,f.bindBackButton)(f.MODAL_HASHES.REORDER,this.hideModal.bind(this))}}]),t}(p.Component);t.default=v},function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.topStickerDecorator=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(70),s=i(a),l=n(160),c=i(l),u=n(5),d=i(u),p=function(){var e=$(".top-section").outerHeight(),t=$(".menu__postal-code-bar"),n=$(".flood-banner"),i=document.body.classList.contains("show-flood-banner"),r=$(".order-components"),o="absolute"===r.css("position"),a=$(".skinny-banner");return t.hasClass("hide")||(e+=t.outerHeight()),i&&(e+=n.outerHeight()),o&&(e+=r.outerHeight()),(e+=a.outerHeight()||0)-1},f=function(t){return function(){return e.get(t.offset(),"top",0)}},h=function(){var e=$(".menu__items");return e.offset().top+e.outerHeight()},m=function(){function e(t){r(this,e),this.$menuNav=t,this.stickOnTopMenuNav=new s.default({$container:t,stickOnTopValueGetter:p,startingPointGetter:f(t),endPointGetter:h}),this.stickOnTopMenuNav.init(this.$menuNav)}return o(e,[{key:"unbind",value:function(){return this.stickOnTopMenuNav.remove(),this}}]),e}(),v=function(){function t(n){var i=this;r(this,t),this.$menuNav=n,this.resizeCallback=e.debounce(this.setComponentTop.bind(this),16),$(window).on("resize",this.resizeCallback),(0,d.default)().on("secondary-banner:loaded",function(){return i.setComponentTop()}),(0,d.default)().on("order-components:update",function(){return i.setComponentTop()}),this.setComponentTop()}return o(t,[{key:"setComponentTop",value:function(){this.$menuNav.css("top",p()+"px")}},{key:"unbind",value:function(){return $(window).off("resize",this.resizeCallback),this}}]),t}();t.topStickerDecorator=function(e){return(0,c.default)()?new v(e):new m(e)}}).call(t,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.createElement("a"),t=e.style;return t.cssText="position:sticky;position:-webkit-sticky;position:-ms-sticky;",-1!==t.position.indexOf("sticky")}},function(e,t,n){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=64,o=function(){function t(i,o){n(this,t),this.model=o,this.view=i,this.selectedItem=-1,this.menuNavHeaderHeight=this.view.$el.outerHeight()+$(".header").outerHeight(),this.dataAnchorNav=this.view.$el.find("[data-anchor-nav]"),this._getCategoriesItems(),this.resizeCallback=e.debounce(this._getCategoriesItems,100).bind(this),this.scrollCallback=e.throttle(this._highlightCategories,16).bind(this),$(window).on("scroll",this.scrollCallback),$(window).on("resize",this.resizeCallback),this.dataAnchorNav.on("click",this._navigateToAnchor.bind(this)),this._isBannerShowed&&(this.menuNavHeaderHeight+=r)}return i(t,[{key:"unbind",value:function(){return $(window).off("scroll",this.scrollCallback),$(window).off("resize",this.resizeCallback),this.dataAnchorNav.unbind("click",this._navigateToAnchor),this}},{key:"_isBannerShowed",value:function(){return $("body").hasClass("show-banner")}},{key:"_getCategoriesItems",value:function(){var e=[];$(".menu__items .dish-category-section__inner-wrapper").each(function(t,n){var i=$(n).attr("id");i&&e.push({top:$(n).offset().top,anchorId:"#"+i})}),this.categoriesItems=e}},{key:"_highlightCategories",value:function(){var t=$(window).scrollTop()+this.menuNavHeaderHeight,n=e.sortedIndex(this.categoriesItems,{top:t},"top")-1;if(n!==this.selectedItem&&(this._isValidItemIndex()&&this._toggleHighlight(!1),this.selectedItem=n,this._isValidItemIndex())){var i=this._toggleHighlight(!0);this._updatePositionOnHighlightedElement(i)}}},{key:"_isValidItemIndex",value:function(){return this.selectedItem>=0&&this.selectedItem<this.categoriesItems.length}},{key:"_toggleHighlight",value:function(t){var n=e.find(this.model.get("items"),{anchorHref:this.categoriesItems[this.selectedItem].anchorId});return n&&$(n.anchor).toggleClass("selected",t),n}},{key:"_navigateToAnchor",value:function(t){var n=void 0,i={nextScroll:window.pageYOffset};t.preventDefault(),t.currentTarget&&(n=e.get($(t.currentTarget.getAttribute("href")).offset(),"top")),n&&$(i).animate({nextScroll:n-this.menuNavHeaderHeight+1},{duration:375,step:function(e){return window.scrollTo(0,e)}})}},{key:"_updatePositionOnHighlightedElement",value:function(e){e.left<this.model.get("position")?this.model.prev():e.right>this.model.get("position")+this.model.get("containerWidth")&&this.model.next()}}]),t}();t.highlighterDecorator=function(e,t){return new o(e,t)}}).call(t,n(1))},function(e,t,n){"use strict";(function(e,n){function i(e){return new r({el:e.$mobilePreviewCart,vendorCart:e.vendorCart})}Object.defineProperty(t,"__esModule",{value:!0}),t.createCartPreviewView=i;var r=t.CartPreviewView=e.View.extend({initialize:function(e){n.bindAll(this),this.vendorID=e.vendorID,this.vendorCart=e.vendorCart,this.maxProductCount=99,this.listenTo(this.vendorCart,"change",this.render),this.listenTo(this.vendorCart.products,"update",this.render),this.listenTo(this.vendorCart.products,"change",this.render)},render:function(){var e=this.vendorCart.getProductsCount(),t=VOLO.formatCurrency(this.vendorCart.get("subtotal"));this.$(".mobile-cart__preview__item-indicator").html(Math.min(e,this.maxProductCount)),this.$(".mobile-cart__preview__total-amount").html(t),e>0&&this.$el.addClass("is-visible")},unbind:function(){this.stopListening(),this.undelegateEvents()}})}).call(t,n(2),n(1))},function(e,t,n){"use strict";(function(e,i){function r(e){(0,a.default)(e,["appConfig"]);var t=i.get(e,"vendor",$("[data-vendor]").data("vendor")),n=i.get(e,"el",".hero-menu__info-extra__address");return new s({el:n,vendor:t,appConfig:e.appConfig,locationService:e.locationService})}Object.defineProperty(t,"__esModule",{value:!0}),t.VendorAddressView=void 0,t.createVendorAddressView=r;var o=n(13),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=t.VendorAddressView=e.View.extend({initialize:function(e){this._addressFormatter=e.locationService.getAddressFormatter(),this.format=e.appConfig.vendor_display_address_format,this.template=i.template($("#hero-menu-vendor-address").html())},render:function(){var e=this._getAddress();return e.street&&$(this.el).html(this.template({address:this._addressFormatter.getFormattedAddress(e,this.format)})),this},_getAddress:function(){return{street:$(this.el).data("street"),building:$(this.el).data("building"),city:$(this.el).data("city"),plz:$(this.el).data("postcode")}}})}).call(t,n(2),n(1))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createVendorInfoView=t.VendorInfoView=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),l=n(29),c=t.VendorInfoView=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"initialize",value:function(e){var t=e.$richDescription,n=e.vendor,i=e.locationModel,r=e.userId,o=e.gtmShopDetailsService;this.$richDescription=t,this.loadImages=this.loadImages.bind(this),this.$richDescription.on("shown.bs.modal",this.loadImages),this.$richDescription.off("shown.bs.modal",this.hideComponent.bind(this)),this.vendor=n,this.locationModel=i,this.userId=r,this.gtmShopDetailsService=o}},{key:"unbind",value:function(){this.$richDescription.off("shown.bs.modal",this.loadImages)}},{key:"addHashRoute",value:function(){(0,l.bindBackButton)(l.MODAL_HASHES.RESTAURANT_INFO,this.hideComponent.bind(this))}},{key:"hideComponent",value:function(){this.$richDescription.modal("hide"),window.location.hash===l.MODAL_HASHES.RESTAURANT_INFO&&(0,l.unbindBackButton)(!0)}},{key:"loadImages",value:function(){var e=this.$richDescription.find(".map"),t=e.data("img-url");this.addHashRoute(),e.attr("src",t),window.blazy&&window.blazy.revalidate(),this.gtmShopDetailsService.infoPageOpenedGtmEvent(this.vendor,this.locationModel,this.userId)}}]),t}(s.View);t.createVendorInfoView=function(e,t,n,i,r){return new c({$richDescription:e,gtmShopDetailsService:t,vendor:n,locationModel:i,userId:r})}},function(e,t,n){"use strict";(function(e,n){function i(e){var t=n.get(e,"el",".desktop-cart__special-instructions-tutorial");return new r({el:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.createSpecialInstructionsTutorialView=i,window.VOLO=window.VOLO||{};var r=t.SpecialInstructionsTutorialView=e.View.extend({initialize:function(){n.bindAll(this)},events:{"click .desktop-cart__special-instructions-tutorial__dismiss":"_hide"},_hide:function(){return this.$el.hide(),$.ajax({url:Routing.generate("_special_instructions_tutorial_dismiss"),type:"PUT"})},unbind:function(){this.undelegateEvents()}})}).call(t,n(2),n(1))},function(e,t,n){"use strict";(function(e,n){function i(e){return new r({el:e.el||".sticky-cart-button-container",model:e.cartModel,formatCurrency:e.formatCurrency})}Object.defineProperty(t,"__esModule",{value:!0}),t.createStickyCartButtonView=i;var r=t.StickyCartButtonView=e.View.extend({initialize:function(e){this.formatCurrency=e.formatCurrency,this.vendorCart=this.model.getFirstVendorCart(),n.bindAll(this),this._initListeners()},_initListeners:function(){this.listenTo(this.model.vendorCarts,"reset",this._handleVendorChange,this),this.vendorCart&&(this.listenTo(this.vendorCart.products,"update",this.render,this),this.listenTo(this.vendorCart.products,"change",this.render,this),this.listenTo(this.vendorCart,"cart-data:update",this._updatePrice,this),this.listenTo(this.vendorCart,"cart-expedition-type:change",this.render,this))},_updatePrice:function(){this.render("finished")},_handleVendorChange:function(){this.stopListening(),this._initListeners(),this.render()},unbind:function(){this.undelegateEvents(),this.stopListening()},render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pending",t=this.$(".sticky-cart-button"),n=this.$(".sticky-cart-button-text"),i=this.$(".sticky-cart-button-text-pickup"),r=this.vendorCart?this.vendorCart.getProductsCount():0,o=this.vendorCart?this.vendorCart.get("subtotal"):0,a=!!this.vendorCart&&this.vendorCart.isPickup();return t.toggleClass("hide",r<1),n.toggleClass("hide",a),i.toggleClass("hide",!a),t.toggleClass("loading","finished"!==e),t.find(".products-value").html(this.formatCurrency(o)),this}})}).call(t,n(2),n(1))},function(e,t,n){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0});var i=t.SELECTED_CLASS="selected",r=t.TabView=e.View.extend({events:{"click .tab":"_handleClick"},initialize:function(){this.tabs=this.$(".tab")},start:function(){this.tabs.eq(0).click()},_handleClick:function(e){var t=$(e.currentTarget),n=this.$("."+i);e.preventDefault(),n.removeClass(i),$(n.attr("href")).removeClass(i),t.addClass(i),$(t.attr("href")).addClass(i)},unbind:function(){this.undelegateEvents()}});t.createTabView=function(e){var t=n.get(e,"el",".nav-tabs");return new r({el:t})}}).call(t,n(2),n(1))},function(e,t,n){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=e.View.extend({events:{click:"_openModal"},initialize:function(e){var t=e.template;n.bindAll(this),this.isDisabled=!0,this.template=t||n.template($("#template-invite-participants-button").html()),this.listenTo(this.model,"colleagues-allowance:update",this._colleaguesSuggestionReady)},render:function(){var e=$(this.template());return e.text(e.data(this.model.isGroupOrder()?"invite-msg":"create-msg")),e.prop("disabled",this.isDisabled),this.$el.empty().append(e),this},_openModal:function(){this.isDisabled||this.trigger("click")},_colleaguesSuggestionReady:function(){this.isDisabled=!1,this.render()}})}).call(t,n(2),n(1))},function(e,t,n){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var r=n(170);t.default=e.View.extend({events:{"hidden.bs.modal .modal":"hide","show.bs.modal .modal":"_show","shown.bs.modal .modal":"_modalShown","keydown .js-participant-email":"_removeError","typeahead:select .js-participant-email":"_removeError","focus .js-participant-email":"_openSuggestion","submit .js-invite-participants-form":"_addParticipant","click .js-confirm-btn":"_confirm","click .js-remove":"_remove"},initialize:function(t){var n=t.allColleagues,o=t.modalTemplateHTML,a=t.template,s=t.vendorCart,l=t.corporateService;i.bindAll(this),this.participants=new(e.Collection.extend({modelId:function(e){return e.email}})),this.allColleagues=n,this.template=a||i.template($("#template-participant-line").html()),this.modalTemplateHTML=o||$("#template-invite-participants").html(),this.vendorCart=s,this.corporateService=l,this.colleagueMatcherFactory=r.colleagueMatcherFactory,this.searchedColleagues=[],this.serviceRequest,this._initRender(),this.listenTo(this.participants,"add",this.render),this.listenTo(this.participants,"remove",this.render),this.listenTo(this.participants,"change",this.render)},show:function(){var e=this;0===$(".modal-dialogs").find(this.$modalEl).length&&(this.render(),$(".modal-dialogs").append(this.$modalEl));var t=this.participants;this.$(".js-participant-email").typeahead({hint:!1,highlight:!0,minLength:2},{name:"colleagues",async:!0,source:function(n,i,r){e._request(t,n,r)},display:function(e){return e.email},templates:{empty:'<div class="colleague-not-found">'+$(".colleague-not-found-pre").html()+"</div>",suggestion:function(e){return"<div><div>"+e.firstName+" "+e.lastName+"</div><div>"+e.email+"</div></div>"}}}).on("typeahead:asyncrequest",function(){$(".input-button-line .calcul-animation").show()}).on("typeahead:asynccancel typeahead:asyncreceive",function(){$(".input-button-line .calcul-animation").hide()}),this.$modalEl.modal("show")},hide:function(){this.$modalEl.modal("hide"),this.$(".js-participant-email").typeahead("destroy")},render:function(){var e=this,t=this.participants.map(function(t){var n=t.toJSON(),i=$(e.template({allowance:n.allowance,name:(n.firstName+" "+n.lastName).trim()}));return i.data("email",n.email),i});return this.$modalEl.find(".js-participants").empty().append(t),this},_request:function(e,t,n){var i=this;clearTimeout(this.serviceRequest),this.serviceRequest=setTimeout(function(){var r=i.vendorCart.getCustomOrderTime();"Invalid Date"===r.toString()&&(r=new Date),i.corporateService.getSearchColleagues(r,i.vendorCart.appConfig.timeZone,t).then(function(t){var r=t.data;i.searchedColleagues=r,i.colleagueMatcherFactory(e,r,n)})},500)},_initRender:function(){this.$modalEl=$(this.modalTemplateHTML).modal({show:!1})},_showError:function(e){var t=this.$(".form__error-message");t.html(t.data("transErrorColleague"+i.capitalize(e))),t.removeClass("hide"),this.$(".input-box .twitter-typeahead, .input-box input").addClass("invalid")},_removeError:function(){this.$(".form__error-message").addClass("hide"),this.$(".input-box .twitter-typeahead, .input-box input").removeClass("invalid")},updateParticipants:function(e){this.participants.set(e)},updateAllColleagues:function(e){this.allColleagues=e},_confirm:function(){this.trigger("confirm",this.participants.toJSON()),this.hide()},_remove:function(e){var t=$(e.target).closest(".js-participant").data("email");this.participants.remove({email:t})},_addParticipant:function(e){e.preventDefault();var t=this.$(".js-participant-email:visible"),n=i.find(this.searchedColleagues,{email:t.val()});if(!n)return void this._showError("email");setTimeout(function(){$(".js-participant-email").blur()},50),this._cleanUp(),this.participants.add(n)},unbind:function(){this.stopListening(),this.undelegateEvents()},_cleanUp:function(){this.$(".js-participant-email").typeahead("val",""),this._removeError()},_openSuggestion:function(){this.$(".js-participant-email").typeahead("open")},_show:function(){this._cleanUp(),this.trigger("show")},_modalShown:function(){this.$(".js-participant-email").focus()}})}).call(t,n(2),n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.colleagueMatcherFactory=function(e,t,n){var i={},r=!0,o=!1,a=void 0;try{for(var s,l=e.toJSON()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){i[s.value.email]=!0}}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}var c=[],u=!0,d=!1,p=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;i[m.email]||c.push(m)}}catch(e){d=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(d)throw p}}n(c)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.createVendorPageGTMService=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),a=function(){function e(t,n){i(this,e),this.vendorCart=t,this.gtmService=n}return r(e,[{key:"sendVirtualPageViewEvent",value:function(){void 0===this.vendorCart.validate(this.vendorCart.attributes)?this.sendVirtualPageWithCart():this.sendVirtualPageViewWithoutCart()}},{key:"sendVirtualPageWithCart",value:function(){var e=this.vendorCart.toJSON(),t=this.vendorCart.getProductsCount(),n={};(0,o.each)(e.products,function(e){var t=e;n[t.variation_id]=t.quantity}),this.gtmService.push({event:"virtual_page_view",event_page_type:"Restaurant Detail Page",event_menu_cart_minimum_dif:e.minimum_order_amount_difference,event_menu_cart_quantity:t,event_menu_cart_order_type:e.order_time&&"now"!==e.order_time?"pre_order":"normal",event_menu_cart_value_order:e.subtotal,event_menu_cart_value_total:e.total_value,event_menu_cart_items:n,event_menu_cart_value_fee:e.delivery_fee,event_menu_cart_value_minimum:e.minimum_order_amount})}},{key:"sendVirtualPageViewWithoutCart",value:function(){var e=void 0;e=this.isChainPage()?"Chain Page":"Restaurant Detail Page",this.gtmService.push({event:"virtual_page_view",event_page_type:e})}},{key:"isChainPage",value:function(){return window.location.href.indexOf("/chain/")>-1}}]),e}();t.createVendorPageGTMService=function(e,t){return new a(e,t)}},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.setUpStartGroupOrder=void 0;var r=n(0),o=i(r),a=n(3),s=i(a),l=n(173);t.setUpStartGroupOrder=function(e){s.render(o.createElement(l.StartGroupOrder,{xhrService:e.xhr,vendorName:e.vendorName,vendorId:e.vendorId,vendorCode:e.vendorCode,brand:e.brand,countryCode:e.countryCode,translations:e.translations,iosAppStoreId:e.iosAppStoreId,firebaseApiKey:e.firebaseApiKey,vendorCart:e.vendorCart,customerModel:e.customerModel,vendor:e.vendor,appConfig:e.appConfig,cartView:e.cartView,gtmService:e.gtmService,deepLinkUrl:e.deepLinkUrl,iosBuildId:e.iosBuildId,androidBuildId:e.androidBuildId}),e.rootElement)}},function(e,t,n){"use strict";(function(e,i){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StartGroupOrder=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(6),u=r(c),d=n(174),p=r(d),f=n(0),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),m=n(34),v=n(5),g=r(v),_=n(78),y=n(175),b=n(11),O=n(25),w=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}l((i=i.apply(e,t||[])).next())})};t.StartGroupOrder=function(t){function n(t){o(this,n);var r=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return r.hoverHandler=function(){r.setState({showTooltip:!r.state.showTooltip})},r.onRedirectToLogin=function(){(0,b.setGroupOrderAutoCreate)(),(0,b.redirectToLogin)()},r.showInvitePopup=function(t){return w(r,void 0,void 0,e.mark(function n(){var r,o,a,s;return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.gtmService.push({event:""===this.state.inviteLink?"group_order.clicked":"group_order_invite_guest.clicked",pageUrlPath:window.location.href,pageType:"shop_details",groupOrderUserType:"host",groupOrderUserCount:(0,b.getGroupOrderParticipantsCountFromView)("cart")}),r=i.get(VOLO,b.groupOrderKey),!this.props.customerModel||!this.props.customerModel.get("code")||t&&(!t||r!==b.groupOrderHost)){e.next=25;break}if(""!==this.state.inviteLink){e.next=22;break}return this.setState({showLoader:!0}),o=(0,O.mapperCreateGroupOrder)(this.props.vendorCart,this.props.customerModel,this.props.vendor,this.props.translations,this.props.appConfig,this.state.expeditionTime),e.next=8,(0,_.createGroupOrder)(o,this.props.xhrService);case 8:if(a=e.sent,!a.data.groupie_id){e.next=22;break}return e.prev=10,e.next=13,(0,_.generateInviteLink)({gid:a.data.groupie_id,brand:this.props.brand,vendorName:this.props.vendorName,vendorCode:this.props.vendorCode,countryCode:this.props.countryCode,vendorId:this.props.vendorId,iosAppStoreId:this.props.iosAppStoreId,firebaseApiKey:this.props.firebaseApiKey,deepLinkUrl:this.props.deepLinkUrl,iosBuildId:this.props.iosBuildId,androidBuildId:this.props.androidBuildId});case 13:s=e.sent,(0,b.removeGroupOrderAutoCreate)(),this.setState({inviteLink:s}),(0,g.default)().emit("cart-view:group-order-initiated",{expeditionTime:this.state.expeditionTime}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),this.setState({showLoader:!1});case 22:this.setState({showModal:!0,showLoader:!1}),e.next=26;break;case 25:t?(0,b.removeGroupOrderAutoCreate)():this.onRedirectToLogin();case 26:case"end":return e.stop()}},n,this,[[10,19]])}))},r.initiateGroupOrder=function(){r.showInvitePopup(!1)},r.hideInvitePopup=function(){r.setState({showModal:!1})},r.state={showTooltip:!1,showModal:!1,inviteLink:"",showLoader:!1,showGroupOrderBtn:!1,expeditionTime:null},(0,g.default)().on("cart-view:group-order-toggle-invite",function(){r.setState({showModal:!r.state.showModal})}),(0,g.default)().on("cart-view:group-order-as-guest",function(){r.setState({showGroupOrderBtn:!1})}),(0,g.default)().on("cart-view:group-order-loaded",function(){var e=(0,b.getLocationAddress)();if(r.setState({showGroupOrderBtn:!!e}),(0,b.getGroupOrderId)()){var t=r.props.customerModel&&(0,b.isHost)(r.props.customerModel.get("code"))?"host":"guest",n={event:"group_order.loaded",pageUrlPath:window.location.href,pageType:"shop_details",groupOrderUserType:t};"host"===t&&(n.groupOrderUserCount=(0,b.getGroupOrderParticipantsCountFromView)("cart")),r.props.gtmService.push(n)}}),(0,g.default)().on("cart-view:group-order-on-leave",function(){r.setState({showTooltip:!1,showModal:!1,inviteLink:"",showGroupOrderBtn:!0})}),(0,g.default)().on("cart-lib:update-cart-data",function(e){e&&e.expedition_time&&r.setState({expeditionTime:e.expedition_time})}),r}return s(n,t),l(n,[{key:"componentDidMount",value:function(){var e=(0,b.getGroupOrderInviteLink)();e&&this.setState({inviteLink:e}),(0,b.getGroupOrderAutoCreate)()&&this.showInvitePopup(!0),this.props.customerModel.get("code")||(0,b.getGroupOrderAutoCreate)()||this.setState({showGroupOrderBtn:!0})}},{key:"render",value:function(){var e=""!==this.state.inviteLink?this.props.translations.groupOrderInviteCta:this.props.translations.groupOrderStartCta,t=(0,u.default)("start-group-order-cta-wrapper",{"start-group-order-cta":""===this.state.inviteLink,"invite-group-order-cta":""!==this.state.inviteLink,"button-loading-ghost":this.state.showLoader});return h.createElement(h.Fragment,null,this.state.showGroupOrderBtn&&h.createElement("div",{className:t,"data-testid":"group-order-cta",onClick:this.initiateGroupOrder,onMouseOver:this.hoverHandler,onMouseLeave:this.hoverHandler},h.createElement("div",{className:"start-group-order-icon"},h.createElement("span",{className:"group-order-icon",dangerouslySetInnerHTML:{__html:p.default}})),h.createElement("div",{className:"start-group-order-text"},e)),this.state.showTooltip&&h.createElement("div",{className:"tooltip bottom start-group-order-tooltip hide"},h.createElement("div",{className:"tooltip-arrow",id:"start-group-order-tooltip-arrow"}),h.createElement("div",{className:"tooltip-inner"},h.createElement("h1",null,this.props.translations.groupOrderStartTooltipHeader),h.createElement("p",null,this.props.translations.groupOrderStartTooltipMessage))),this.state.showModal&&h.createElement(m.Overlay,{elementId:"group-order-invite-modal",onClose:this.hideInvitePopup},h.createElement(y.GroupOrderInviteModal,{onClose:this.hideInvitePopup,inviteLink:this.state.inviteLink,translations:this.props.translations,vendorCart:this.props.vendorCart})))}}]),n}(h.PureComponent)}).call(t,n(4),n(1))},function(e,t){e.exports='<svg width="18px" height="18px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <defs>\n        <path d="M19,9 C21.5944935,9 23.7410671,10.9807252 23.9791087,13.5538725 L23.9948042,13.7758464 L24.0124106,14.5 C24.0124106,14.7454599 23.8355354,14.9496084 23.6022862,14.9919443 L23.5124106,15 L22.0248212,15 L21.9948042,13.7758464 C21.8633628,11.0955264 19.6686219,9 17,9 L19,9 Z M15,9 C17.5944935,9 19.7410671,10.9807252 19.9791087,13.5538725 L19.9948042,13.7758464 L20.0124106,14.5 C20.0124106,14.7454599 19.8355354,14.9496084 19.6022862,14.9919443 L19.5124106,15 L6.5,15 C6.25454011,15 6.05039163,14.8231248 6.00805567,14.5898756 L6,14.5 L6,14 C6,11.3112453 8.12230671,9.11818189 10.7831104,9.00461951 L11,9 L15,9 Z M15,11 L11,11 C9.76327665,11 8.70133775,11.7483412 8.24230244,12.8169044 L8.17,13 L17.829,13 L17.7710919,12.8478572 C17.3655561,11.8734213 16.46103,11.1611965 15.3811256,11.0240314 L15.1766673,11.0051283 L15,11 Z M4.5,3 C4.77614237,3 5,3.22385763 5,3.5 L5,6 L7.5,6 C7.77614237,6 8,6.22385763 8,6.5 L8,7.5 C8,7.77614237 7.77614237,8 7.5,8 L5,8 L5,10.5 C5,10.7761424 4.77614237,11 4.5,11 L3.5,11 C3.22385763,11 3,10.7761424 3,10.5 L3,8 L0.5,8 C0.223857625,8 0,7.77614237 0,7.5 L0,6.5 C0,6.22385763 0.223857625,6 0.5,6 L3,6 L3,3.5 C3,3.22385763 3.22385763,3 3.5,3 L4.5,3 Z M17,0 C19.209139,0 21,1.790861 21,4 C21,6.209139 19.209139,8 17,8 C16.6547311,8 16.3196794,7.95625476 16.0000851,7.87400442 C17.7251853,7.42999122 19,5.86387007 19,4 C19,2.1372214 17.7266779,0.571843105 16.0029454,0.126776773 C16.3257187,0.0425693357 16.6603405,0 17,0 Z M13,0 C15.209139,0 17,1.790861 17,4 C17,6.209139 15.209139,8 13,8 C10.790861,8 9,6.209139 9,4 C9,1.790861 10.790861,0 13,0 Z M13,2 C11.8954305,2 11,2.8954305 11,4 C11,5.1045695 11.8954305,6 13,6 C14.1045695,6 15,5.1045695 15,4 C15,2.8954305 14.1045695,2 13,2 Z" id="path-1"></path>\n    </defs>\n    <g id="Host" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="1.-RDP" transform="translate(-278.000000, -40.000000)">\n            <g id="icn-group-order" transform="translate(274.000000, 36.000000)">\n                <g id="Group" transform="translate(4.000000, 4.000000)">\n                    <g id="ic-group-add">\n                        <g id="grayscale/$color-neutral-primary" transform="translate(0.000000, 4.000000)">\n                            <mask id="mask-2" fill="white">\n                                <use xlink:href="#path-1"></use>\n                            </mask>\n                            <use id="Mask" fill="#979797" fill-rule="nonzero" xlink:href="#path-1"></use>\n                            <g id="pandora/$color-interaction-primary" mask="url(#mask-2)" fill="#D70F64">\n                                <g transform="translate(0.000000, -4.000000)" id="bg">\n                                    <rect x="0" y="0" width="24" height="24"></rect>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>\n'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GroupOrderInviteModal=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(79),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),d=n(19);t.GroupOrderInviteModal=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.copyLink=function(){n.inviteLinkRef.select(),document.execCommand("copy"),n.setState({isLinkCopied:!0})},n.state={isLinkCopied:!1},n}return o(t,e),a(t,[{key:"render",value:function(){var e=this;return u.createElement("section",{className:"group-order-invite-wrapper","data-testid":"group-order-invite-modal"},u.createElement("div",{className:"group-order-invite-content"},u.createElement("div",{className:"group-order-invite-header"},u.createElement("h3",{className:"group-order-invite-heading"},this.props.translations.groupOrderInviteHeader),u.createElement("button",{onClick:this.props.onClose,className:"group-order-invite-close","data-testid":"group-order-invite-close-cta",dangerouslySetInnerHTML:{__html:l.default}})),u.createElement("div",{className:"group-order-invite-message"},this.props.vendorCart.get("expedition_type")===d.ExpeditionType.DELIVERY?this.props.translations.groupOrderHostDeliveryIntro:this.props.translations.groupOrderHostPickupIntro),u.createElement("div",{className:"group-order-invite-link-wrapper"},u.createElement("input",{id:"group-order-invite-link-input",className:"group-order-invite-link",value:this.props.inviteLink,ref:function(t){return e.inviteLinkRef=t}}),u.createElement("a",{onClick:this.copyLink,href:"#",className:"group-order-copy-invite-link","data-testid":"group-order-invite-link-cta"},this.props.translations.groupOrderInviteCopyCta)),this.state.isLinkCopied&&u.createElement("div",{className:"group-order-invite-link-copied"},u.createElement("span",null,this.props.translations.groupOrderInviteLinkCopied))))}}]),t}(u.PureComponent)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.setupLoyaltyPercentageWithDescription=t.setupLoyaltyPercentage=t.setupLoyaltyPercentageOnVendor=void 0;var o=n(0),a=r(o),s=n(3),l=r(s),c=n(177),u=i(c),d=n(178),p=i(d),f=(t.setupLoyaltyPercentageOnVendor=function(){var e=document.getElementById("loyalty-percentage-rdp-react-root"),t=document.getElementById("loyalty-percentage-rip-react-root"),n=JSON.parse(document.getElementsByClassName("vendor-section")[0].getAttribute("data-vendor")),i=!!n.loyalty_program_enabled&&n.loyalty_program_enabled,r=!!n.loyalty_percentage_amount&&n.loyalty_percentage_amount;f(e,i,r,VOLO.loyaltyMenuTranslations),h(t,i,r,VOLO.loyaltyMenuTranslations)},t.setupLoyaltyPercentage=function(e,t,n,i){e&&t&&l.render(a.createElement(u.default,{amount:n,translation:i.menuLoyaltyTitle}),e)}),h=t.setupLoyaltyPercentageWithDescription=function(e,t,n,i){e&&t&&l.render(a.createElement(a.Fragment,null,a.createElement(u.default,{amount:n,translation:i.menuLoyaltyTitle}),a.createElement(p.default,{translation:i.menuLoyaltyDescription})),e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(113),a=function(e){var t=e.amount,n=e.translation;return r.default.createElement("div",{className:"loyalty-percentage"},(0,o.prettyLoyaltyPercentageAmount)(t),"% ",n)};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=function(e){var t=e.translation;return r.default.createElement("div",{className:"loyalty-percentage-description"},t)};t.default=o},function(e,t,n){"use strict";function i(e,t){var n=VOLO.configuration.features.flags["ignore-events"],i=window.sessionStorage.getItem(r.CURRENT_VENDOR_ID_KEY)===t,o=!(!VOLO.locationEventTracking||VOLO.locationEventTracking.type!==e);return!!(n&&i&&o)}Object.defineProperty(t,"__esModule",{value:!0}),t.findIfAllowUserDuringEvent=i;var r=n(67)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(t.findActionsWithMessageType=function(e){var t=null;return e.items?e.items.some(function(e){return!!(t=i(e.metadata.events))}):e.metadata.events&&(t=i(e.metadata.events)),t},t.findActionWithEvents=function(e){var t=null,n=null;return e&&Array.isArray(e)&&e.some(function(e){return e&&e.actions&&(n=e.actions.find(function(e){return"message"===e.type})),n&&(t=n),!!n}),t})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findVendorIsClosed=void 0;var i=n(1);t.findVendorIsClosed=function(e){return!(0,i.isEmpty)(e.close_reasons)||e.is_flood_feature_closed}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setupSkinnyBannerReactComponent=void 0;var r=n(0),o=i(r),a=n(3),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),l=n(183),c=i(l),u=n(185);t.setupSkinnyBannerReactComponent=function(e,t,n,i){var r={width:""},a=!1,l=void 0;document.getElementById("skinny-banner-react-root-vendor-page")?(l=document.getElementById("skinny-banner-react-root-vendor-page"),a=!0):l=document.getElementById("skinny-banner-react-root");var d=(0,u.getSkinnyBannerMessage)(e),p=(0,u.getSkinnyBannerLink)(e);n.trackSkinnyBannerShown(e),s.render(o.default.createElement(c.default,{message:d,link:a?null:p,orderNowText:t.orderNow,style:r,onClick:i}),l),$(window).trigger("resize")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(184),o=i(r),a=n(0),s=i(a),l=function(e){return s.default.createElement("div",{className:"skinny-banner",style:e.style},s.default.createElement("div",{className:"skinny-banner__message"},s.default.createElement("span",{className:"skinny-banner__message-text","data-testid":"skinny-banner-message"},e.message)),e.link&&s.default.createElement("a",{href:e.link,onClick:e.onClick,className:"skinny-banner__action","data-testid":"skinny-banner-action-link"},s.default.createElement("span",{className:"skinny-banner__action-text"},e.orderNowText),s.default.createElement("div",{className:"skinny-banner__action-icon",dangerouslySetInnerHTML:{__html:o.default}})))};t.default=l},function(e,t){e.exports='<svg width="12" height="14" xmlns="http://www.w3.org/2000/svg"><path stroke-linejoin="round" stroke-linecap="round" fill-rule="evenodd" fill="none" stroke="#D70F64" d="m3.5,1.5l5,5.5l-5,5.5"></path></svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSkinnyBannerMessage=t.getSkinnyBannerLink=void 0;var i=n(186);t.getSkinnyBannerLink=function(e){var t=void 0;return e.link_type===i.SkinnyBannerLinkType.LINK&&e.link&&(t=e.link),e.link_type===i.SkinnyBannerLinkType.CAMPAIGN&&e.campaign_url_key&&(t="/campaigns?url_key="+encodeURIComponent(e.campaign_url_key)),t},t.getSkinnyBannerMessage=function(e){return e?e.message:"error"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.SkinnyBannerLinkType=void 0;!function(e){e.LINK="LINK",e.CAMPAIGN="CLP",e.NO_LINK="NO_LINK"}(i||(t.SkinnyBannerLinkType=i={}))},function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SkinnyBannerService=t.skinnyBannerShouldBeDisplayed=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),a=n(18),s=n(23),l=n(188),c=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}l((i=i.apply(e,t||[])).next())})};t.skinnyBannerShouldBeDisplayed=function(e){return(0,o.get)(e,"features.flags.show-skinny-banner",!1)&&(window.location.pathname.includes("/shop")||window.location.pathname.includes("/restaurant"))},t.SkinnyBannerService=function(){function t(e,n,r){i(this,t),this.skinnyBannerProvider=new l.SkinnyBannerProvider(e,n),this.location=n,this.gtmService=r}return r(t,[{key:"getSkinnyBanner",value:function(){return c(this,void 0,void 0,e.mark(function t(){return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.skinnyBannerProvider.getSkinnyBanner();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,this)}))}},{key:"getChannelIndex",value:function(e){return e.id+";"+e.url_key+":n/a"}},{key:"trackSkinnyBannerShown",value:function(e){this.gtmService.push(Object.assign({event:"skinny_banner.shown"},(0,s.locationModelGTMAdapter)(this.gtmService.locationModel),{userId:(0,o.get)(VOLO,"customerData.id","anon."),pageType:this.gtmService.tagManager.pageType,intern_source:"na",intern_medium:"mmt",intern_campaign:e.id,intern_content:e.link_type.toLowerCase(),intern_id:e.id+";"+e.url_key+":n/a"}))}},{key:"trackSkinnyBannerClicked",value:function(e){this.gtmService.push(Object.assign({event:"skinny_banner.clicked"},(0,s.locationModelGTMAdapter)(this.gtmService.locationModel),{userId:(0,o.get)(VOLO,"customerData.id","anon."),channelIndex:this.getChannelIndex(e),pageType:this.gtmService.tagManager.pageType,eventOrigin:"skinny_banner",intern_source:"na",intern_medium:"mmt",intern_campaign:e.id,intern_content:e.link_type.toLowerCase(),intern_id:e.id+";"+e.url_key+":n/a",vendorId:null}))}},{key:"getDefaultVendorAttributes",value:function(){return{vendorId:"",vendorType:null,vendorCode:"",vendorName:"",vendorCuisine:"",vendorOfferType:"",vendorPosition:0,vendorSponsoring:!1,vendorTag:!1,vendorTagEligible:0,vendorTagShow:0,vendorTile:"",vendorWithOffer:!1,darkstoreFunnel:!1,floodActive:!1,floodEventIds:"",floodMessage:"",floodType:"",floodValue:"",vendorDeliveryTime:0,deliveryProvider:"",vendorListType:"",vendorStatus:""}}},{key:"trackShopSkinnyBannerClicked",value:function(e){this.gtmService.push(Object.assign({},this.getDefaultVendorAttributes(),(0,a.getDpsTrackingParam)(),{event:"shop.clicked"},(0,s.locationModelGTMAdapter)(this.gtmService.locationModel),{userId:(0,o.get)(VOLO,"customerData.id","anon."),channelIndex:this.getChannelIndex(e),pageType:this.gtmService.tagManager.pageType,vendorClickOrigin:"skinny_banner",vendorId:e.vendor_id}))}}]),t}()}).call(t,n(4))},function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SkinnyBannerProvider=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(9),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}l((i=i.apply(e,t||[])).next())})};t.SkinnyBannerProvider=function(){function t(e,n){i(this,t),this.appConfig=e,this.xhrService=new a.default({appConfig:e}),this.location=n}return r(t,[{key:"getSkinnyBanner",value:function(){return s(this,void 0,void 0,e.mark(function t(){var n,i,r,o,a,s,l,c,u,d,p,f;return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.xhrService.createAPIUrl("skinny-banners"),i=this.location,r=i.latitude,o=i.longitude,a=VOLO,s=a.vendorVertical,l=VOLO.configuration.global_entity_id,c=this.appConfig.locale,r&&o&&s&&c){e.next=7;break}return e.abrupt("return",null);case 7:return u=this.appConfig.expeditionType||"delivery",d=JSON.parse(localStorage.getItem("cart")),d&&(u=d.expedition_type),p={global_entity_id:l,languageCode:c,lat:r,long:o,vertical_type:s,expedition_type:u,device:"web"},e.prev=11,e.next=14,this.xhrService.send({url:n,data:p});case 14:if(!((f=e.sent)&&f.data&&f.data.length>=1)){e.next=17;break}return e.abrupt("return",f.data[0]);case 17:return e.abrupt("return",null);case 20:return e.prev=20,e.t0=e.catch(11),trackJs.console.error("Error fetching skinny banner data",n,p,e.t0),e.abrupt("return",null);case 24:case"end":return e.stop()}},t,this,[[11,20]])}))}}]),t}()}).call(t,n(4))},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getOTPTimeVariation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e["otp-time-format"];return t||null}},,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),r=n(10),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){return Math.max(document.body.scrollTop,document.documentElement.scrollTop)};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;if(!i.mobile)return function(){};var r=document.querySelector(".top-section"),s=!1,l=!1,c=!0,u=null,d=function(){v(),u=a(),f((0,o.default)(e).offset().top-n)},p=function(){s||null===u||f(u),m(),u=null},f=function(e){l=!0,(0,o.default)("html, body").animate({scrollTop:e},t,function(){l=!1})},h=function(){if(document.activeElement===e&&!l){var t=a()<64;c!==t&&(t?m():v())}},m=function(){c=!0,r.style.top="0"},v=function(){c=!1,r.style.top="-"+r.clientHeight+"px"},g=function(){s=!0,e.blur(),s=!1};return e.addEventListener("focus",d),e.addEventListener("blur",p),window.addEventListener("scroll",h),window.addEventListener("focus",g),function(){e.removeEventListener("focus",d),e.removeEventListener("blur",p),window.removeEventListener("scroll",h),window.removeEventListener("focus",g)}}},,,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundary=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s);(t.ErrorBoundary=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={error:!1,key:0},n.reRender=n.reRender.bind(n),n}return o(t,e),a(t,[{key:"componentDidCatch",value:function(e,t){this.props.logToTrackJS&&window&&window.trackJs&&trackJs.console.error("React failed to render:",t.componentStack,e.stack),this.props.onError&&this.props.onError(e,t)}},{key:"reRender",value:function(){this.setState(function(e){return{key:e.key+1,error:!1}})}},{key:"componentDidUpdate",value:function(e,t){this.props.children!==e.children&&this.reRender()}},{key:"render",value:function(){return l.createElement(l.Fragment,{key:this.state.key},this.props.children(this.state))}}],[{key:"getDerivedStateFromError",value:function(e){return{error:!0}}}]),t}(l.Component)).defaultProps={logToTrackJS:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrderStatusProgressBarsContainer=void 0;var i=n(0),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),o=n(226);t.OrderStatusProgressBarsContainer=function(e){var t=e.statusMessagesTitles;return r.createElement(r.Fragment,null,t.length>1&&r.createElement("div",{className:"order-status-progress-bars-container","data-testid":"order-status__progress-bars"},t.map(function(e,t){var n=e.bar_weight,i=e.active,a=e.is_filled;return r.createElement(o.ProgressBar,{active:i,weight:n,key:t,isFilled:a,testid:t})})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressBar=void 0;var i=n(6),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(0),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o);t.ProgressBar=function(e){var t=e.weight,n=e.isFilled,i=e.active,o=e.testid;return a.createElement(a.Fragment,null,a.createElement("div",{className:(0,r.default)("order-status-progress-bar",{"order-status-progress-bar-filled":n}),style:{width:t+"%"},"data-testid":"order-status__progress-bar__"+o},i&&a.createElement("div",{className:(0,r.default)("order-status-progress-bar",{"order-status-progress-bar-active":i}),"data-testid":"order-status__progress-bar__active__"+o})))}},function(e,t,n){"use strict";(function(e){function n(t,n){if(!e.isObject(t))return"";var i=moment.tz(t.date,t.timezone).clone().tz(n).format("YYYY-MM-DDTHH:mm:ss+00:00"),r=new Date(i);return VOLO.IntlService.customFormatDate(r,{hour:"numeric",minute:"numeric",weekday:"short",month:"short",day:"numeric",timeZone:"UTC"})}function i(t){return e.get(t,"date",!1)&&e.get(t,"timezone",!1)}function r(e,t,n){var r=0;if(i(e)&&i(t)){var o=moment.tz(e.date,e.timezone).clone().tz(n),a=moment.tz(t.date,t.timezone).clone().tz(n);r=moment(a).diff(o,"minutes")}return r}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=t.getDeliveryTimeRangeSuffix=function(e,t,n){var i=e.eta_messages[n],r=t?" ":"";return i?""+r+i:""},s=function(e,t,n){var i=r(e,t,n);return Math.floor(i/1440)},l=function(e){return new Date(e).toLocaleString("en-us",{weekday:"long"})},c=function(e){var t=e.isCancelled,i=e.isDelivered,r=e.isPickup,o=e.isPreOrder,s=e.isPreOrderActive,l=e.isVendorDelivery,c=e.timeRangeFlag,u=e.deliveryTimeRange,d=e.deliveryTimeRangeSuffix,p=e.confirmedDeliveryTime,f=e.timezone,h=e.eta,m=e.translations;switch(!0){case t:return"";case i:return m.eta_titles.OTP_DELIVERED_STATUS;case l&&!o&&p&&moment().isSame(p.date,"day"):return moment(p.date,moment.ISO_8601).format("HH:mm");case r:case l:case o&&!s:return n(p,f);case!!c:return u?""+u+a(m,!0,d):a(m,!1,d);case!h||h<5:return m.eta_messages.LESS_THAN_5MINS;case!!m:return h+" "+m.eta_messages.MINS;case!!h:return""+h;default:return""}},u=function(e){var t=e.isDelivered,n=e.isCancelled,i=e.isPickup,r=e.isPreOrder,o=e.isPreOrderActive,a=e.isVendorDelivery,s=e.translations;switch(!0){case t:return s.eta_titles.OTP_DELIVERED_TITLE;case n:return"";case i:return s.eta_titles.OTP_PICK_UP_TIME;case r&&!o:return s.eta_titles.OTP_PREORDER_SCHEDULED_FOR;case a:default:return s.eta_titles.OTP_TIME_ESTIMATE}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){return{deliveryTime:c(o({},e,{translations:t,timeRangeFlag:n})),etaTitle:u(o({},e,{translations:t,timeRangeFlag:n}))}}};t.createGetEtaDependencies=d,t.getETADifference=r,t.localizedETA=n,t.getDeliveryDay=s,t.getDeliveryDayOfTheWeek=l}).call(t,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewOrderStatus=void 0;var i=n(0),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i);t.NewOrderStatus=function(e){var t=e.currentStatusTitleString,n=e.className,i=void 0===n?"":n;return r.createElement("div",{className:"order-status-title-container order-status-block-text "+i,"data-testid":"order-status__title"},t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getCurrentTitleAttributes=function(e){var t=e.find(function(e){return e.active}),n=t?t.translation_key:"";return{getCurrentStatusTitleString:function(e){return t?e[n]:e.OTP_TRACKINGSTEPS_RECEIVED},statusImageURL:t?t.image_url:"",translationKey:n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.isTimeRange=function(e){if(!e)return!1;switch(e){case"Control":case"Variation1":return!1;default:return!0}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e,i){function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new p({el:e.el||".restaurants-search-form",model:e.model,appConfig:e.appConfig,gtmLocationService:e.gtmLocationService,input:e.input,mapModalView:e.mapModalView,focusOnRender:e.focusOnRender,expeditionType:e.expeditionType,googleMapScriptLoader:e.googleMapScriptLoader,locationService:e.locationService,addressCollection:e.addressCollection})}Object.defineProperty(t,"__esModule",{value:!0}),t.createFullAddressHomeSearchView=o;var a=n(49),s=r(a),l=n(216),c=r(l),u=n(5),d=r(u),p=e.View.extend({initialize:function(e){function t(){var t=i.get(this.appConfig,"pickupEnabled",!0);this.fullAddressSearchView=VOLO.libraries.location.setupLocationInputSearchView({locationService:e.locationService,el:this.$(".address-search-container"),suggestionsEl:this.$el.find(".address-suggestions"),appConfig:this.appConfig,mapModalView:e.mapModalView,showSavedAddress:e.showSavedAddress||!0,focusOnRender:!1!==e.focusOnRender,gtmLocationService:e.gtmLocationService,expeditionType:e.expeditionType,googleMapScriptLoader:e.googleMapScriptLoader,translations:i.get(VOLO,"locationInput.translations",{}),autoSubmit:!t,addressCollection:e.addressCollection,model:e.model,disableAutoInputValidation:!1,inputSize:"big"}),(0,d.default)().on("full-address-search:submit",this._navigateToListingPage.bind(this))}i.bindAll(this),this.appConfig=e.appConfig,t.apply(this),this._spinner=new Spinner,this.listenTo(this.fullAddressSearchView,"full-address-search:enter",this._searchAddress),(0,d.default)().on("suggestions:selected",this._searchAddress.bind(this)),this.listenTo(this.fullAddressSearchView,"full-address-search:locate-me-start",this._disableSubmitButtons),this.listenTo(this.fullAddressSearchView,"full-address-search:locate-me-end full-address-search:locate-me-error",this._enableSubmitButtons)},events:function(){var e=this;return{"click .js-restaurants-search-submit":function(){return e._submit("delivery","Manual")},"click .js-restaurants-search-pickup":function(){return e._submit("pickup","Manual")},submit:function(){return!1}}},_submit:function(e,t){"pickup"===e&&this.trigger("pickup-tooltip:stop-creation");var n={trigger:{isUpdate:!1,type:t},expeditionType:e};return(0,d.default)().emit("geocode:address",n),!1},_enableSubmitButtons:function(){this.$(".js-restaurants-search-submit, .js-restaurants-search-pickup").removeAttr("disabled")},_disableSubmitButtons:function(){this.$(".js-restaurants-search-submit, .js-restaurants-search-pickup").attr("disabled",!0)},_navigateToListingPage:function(e){this._disableSubmitButtons(),e.city=e.city||"-",s.default.navigateToVendorsList(e,i.get(this,"appConfig.address_config.required_fields"))},_searchAddress:function(){return this._isManualTriggerCTA()||(this._submit("delivery","Autocomplete"),this.fullAddressSearchView.hideSuggestions()),!1},_isManualTriggerCTA:function(){return this.$(".button-container").hasClass("two-buttons")},unbind:function(){this._spinner.stop(),this._enableSubmitButtons(),this.fullAddressSearchView.unbind(),this.stopListening(),this.undelegateEvents(),this.unbindScrollToTop()},render:function(){var e=document.getElementById("delivery-information-postal-index");return e&&(this.unbindScrollToTop=(0,c.default)(e)),this}})}).call(t,n(2),n(1))},,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isQuickApp=t.isMiniprogram=t.getAppTypeCookie=void 0;var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=["gcashmweb","paylahtile"],a=t.getAppTypeCookie=function(){return r.default.get("app-type")||""};t.isMiniprogram=function(){return o.includes(a())},t.isQuickApp=function(){return"huaweiQuickApp"===a()}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.setupTrackingCardReactComponent=void 0;var o=n(0),a=r(o),s=n(3),l=r(s),c=n(224),u=n(312),d=n(21),p=i(d),f=n(15),h=n(316),m=n(201),v=n(230),g=n(9),_=i(g);t.setupTrackingCardReactComponent=function(e){if(VOLO.isGuest||!VOLO.trackingCardProps)return e;var t=VOLO.trackingCardProps.translations,n=e.models.customerModel.toJSON().first_name,i=e.config.features.flags["tr-card-revamp"]||"fallback:old",r=e.models.customerModel.get("id"),o=e.config.features.flags,s=(0,m.getOTPTimeVariation)(o),d=(0,v.isTimeRange)(s),g=document.getElementById("tracking-card-react-root"),y=new _.default({appConfig:e.config,$:$}),b=(0,h.createTrackingCardProvider)(y),O=new f.GTMTrackingCardTracker({gtmService:e.services.gtmService,customerId:r,featureFlags:o});return l.render(a.createElement(c.ErrorBoundary,null,function(e){return e.error?null:a.createElement(p.default.Provider,{value:t},a.createElement(u.TrackingCardContainer,{provider:b,gtmTracker:O,trackingCardFeatureFlagValue:i,customerFirstName:n,isTimeRangeEnabled:d,timeVariation:s}))}),g),e}},function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TrackingCardContainer=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(59),c=i(l),u=n(0),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(313),f=n(315),h=n(21),m=i(h),v=n(15),g=n(74),_=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}l((i=i.apply(e,t||[])).next())})},y=function(){return window.innerWidth<768};t.TrackingCardContainer=function(t){function n(e){r(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.intervalId=null,t.newTrackingCard=!1,t.state={orderDetails:null,count:null,isCollapsed:y()||!1},t.trackingCardProvider=e.provider,t.gtmTrackingCardTracker=e.gtmTracker,t.fetchActiveOrders=t.fetchActiveOrders.bind(t),t.handleActiveOrders=t.handleActiveOrders.bind(t),t.initalize=t.initalize.bind(t),t.onExpand=t.onExpand.bind(t),t.onCollapse=t.onCollapse.bind(t),t.onCardClick=t.onCardClick.bind(t),t.onResize=t.onResize.bind(t),t.handlePolling=t.handlePolling.bind(t),t.getLinkPath=t.getLinkPath.bind(t),t.redirectToMyOrders=t.redirectToMyOrders.bind(t),t.handleCardDisplay=t.handleCardDisplay.bind(t),t.newTrackingCard="true"===t.props.trackingCardFeatureFlagValue,t.getGTMTrackingParams=t.getGTMTrackingParams.bind(t),t.trackTrackingCardShown=t.trackTrackingCardShown.bind(t),t.trackTrackingCardClicked=t.trackTrackingCardClicked.bind(t),t.trackTrackingCardExpanded=t.trackTrackingCardExpanded.bind(t),t.trackABTestExperiments=t.trackABTestExperiments.bind(t),t.sendGTMEvents=t.sendGTMEvents.bind(t),t}return a(n,t),s(n,[{key:"componentDidMount",value:function(){this.initalize(),this.newTrackingCard&&(window.addEventListener("resize",this.onResize),window.addEventListener("scroll",this.onCollapse),window.addEventListener("visibilitychange",this.handlePolling))}},{key:"componentWillUnmount",value:function(){this.newTrackingCard&&(window.removeEventListener("scroll",this.onCollapse),window.removeEventListener("resize",this.onResize),window.removeEventListener("visibilitychange",this.handlePolling))}},{key:"getGTMTrackingParams",value:function(e){return Object.assign({locationModel:VOLO.components.models.locationModel,orderPreorder:this.state.orderDetails.is_preorder,vendorCode:this.state.orderDetails.vendor.code,transactionId:this.state.orderDetails.code,deliveryProvider:this.state.orderDetails.delivery.delivery_provider,expeditionType:this.state.orderDetails.delivery.expedition_type,deliveryTime:this.state.orderDetails.delivery.time.eta,orderInProgress:this.state.count,featureFlagKey:"tr-card-revamp",featureFlagValue:this.props.trackingCardFeatureFlagValue},e)}},{key:"render",value:function(){var e=this;return this.newTrackingCard?this.state.orderDetails&&d.createElement("div",{tabIndex:0,className:"tracking-card",onBlur:this.onCollapse,"data-testid":"tracking-card"},d.createElement(f.TrackingCard,Object.assign({onCardClick:this.onCardClick,linkPath:this.getLinkPath(this.state.orderDetails),isCollapsed:this.state.isCollapsed,customerFirstName:this.props.customerFirstName,isTimeRangeEnabled:this.props.isTimeRangeEnabled,timeVariation:this.props.timeVariation},this.state.orderDetails)),!this.state.isCollapsed&&this.state.count>1&&d.createElement(d.Fragment,null,d.createElement("hr",{className:"tracking-card__divider"}),d.createElement(m.default.Text,{tKey:"SEE_ALL_ORDERS"},function(t){return d.createElement("div",{className:"tracking-card__my-orders-link__container",onClick:e.redirectToMyOrders,"data-destinationpage":g.PAGETYPES_ON_WEB.MY_ORDERS,"data-testid":"tracking-card__my-orders-link__container"},d.createElement("p",{className:"tracking-card__see-all-orders"},t.replace("%",e.state.count)),d.createElement("div",{dangerouslySetInnerHTML:{__html:c.default}}))}))):this.state.orderDetails&&d.createElement(p.OldTrackingCard,{onCardClick:this.trackTrackingCardClicked,linkPath:this.getLinkPath(this.state.orderDetails)})}},{key:"handleActiveOrders",value:function(){return this.fetchActiveOrders().then(this.handleCardDisplay)}},{key:"handleCardDisplay",value:function(e){var t=this;return new Promise(function(n){t.setState(Object.assign({},e),n)})}},{key:"fetchActiveOrders",value:function(){return this.trackingCardProvider.getOrderDetails(this.props.timeVariation)}},{key:"initalize",value:function(){return this.handleActiveOrders().then(this.handlePolling).then(this.trackTrackingCardShown).then(this.trackABTestExperiments)}},{key:"onExpand",value:function(e){this.state.isCollapsed&&(this.setState({isCollapsed:!1}),e&&this.trackTrackingCardExpanded())}},{key:"onCollapse",value:function(){!this.state.isCollapsed&&y()&&this.setState({isCollapsed:!0})}},{key:"onResize",value:function(){y()?this.onCollapse():this.onExpand()}},{key:"onCardClick",value:function(e){if(this.state.isCollapsed&&this.newTrackingCard)return void this.onExpand(e);this.trackTrackingCardClicked(e),window.location.assign(this.getLinkPath(this.state.orderDetails))}},{key:"trackTrackingCardClicked",value:function(e){var t=e.currentTarget.dataset.destinationpage;this.sendGTMEvents(v.TRACKING_CARD_EVENTS.clicked,{destinationPage:t})}},{key:"trackTrackingCardExpanded",value:function(){this.sendGTMEvents(v.TRACKING_CARD_EVENTS.expanded)}},{key:"trackTrackingCardShown",value:function(){this.sendGTMEvents(v.TRACKING_CARD_EVENTS.shown)}},{key:"trackABTestExperiments",value:function(){this.gtmTrackingCardTracker.trackABTestExperiments()}},{key:"sendGTMEvents",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.state.orderDetails&&this.gtmTrackingCardTracker.sendGtmEvent(e,this.getGTMTrackingParams(t))}},{key:"redirectToMyOrders",value:function(e){window.location.assign("/orders"),this.trackTrackingCardClicked(e)}},{key:"getLinkPath",value:function(e){var t=e.code;return Routing.generate("order_tracking",{orderCode:t})}},{key:"handlePolling",value:function(){return _(this,void 0,void 0,e.mark(function t(){var n=this;return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){return n.intervalId?(clearInterval(n.intervalId),n.intervalId=null,e()):n.state.orderDetails&&!n.intervalId?(n.intervalId=setInterval(n.handleActiveOrders,6e4),e()):void 0}));case 1:case"end":return e.stop()}},t,this)}))}}]),n}(d.Component)}).call(t,n(4))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.OldTrackingCard=void 0;var r=n(314),o=i(r),a=n(0),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),l=n(21),c=i(l),u=n(74);t.OldTrackingCard=function(e){var t=e.onCardClick,n=e.linkPath;return s.createElement("div",{className:"old-tracking-card","data-testid":"old-tracking-card"},s.createElement("a",{href:n,className:"old-tracking-card__content-container",onClick:t,"data-destinationpage":u.PAGETYPES_ON_WEB.OTP},s.createElement("div",{className:"old-tracking-card__content"},s.createElement("div",{className:"old-tracking-card__title"},s.createElement(c.default.Text,{tKey:"title"}))),s.createElement("div",{className:"old-tracking-card__cta-container"},s.createElement("span",{className:"old-tracking-card__cta button arrow-right-cta",dangerouslySetInnerHTML:{__html:o.default}}))))}},function(e,t){e.exports='<svg class="svg-stroke-container" xmlns="http://www.w3.org/2000/svg" width="20" height="18" viewBox="0 0 20 18"><g fill="none" fill-rule="evenodd" stroke="#FFFFFF" stroke-width="2" transform="translate(1 1)" stroke-linecap="round"><path d="M0,8 L17.5,8"></path><polyline points="4.338 13.628 15.628 13.628 15.628 2.338" stroke-linejoin="round" transform="rotate(-45 9.983 7.983)"></polyline></g></svg>'},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TrackingCard=void 0;var r=n(225),o=n(227),a=n(59),s=i(a),l=n(0),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),u=n(228),d=n(21),p=i(d),f=n(229),h=n(74);t.TrackingCard=function(e){var t=e.onCardClick,n=e.vendor,i=e.delivery,a=e.status_messages,l=(e.linkPath,e.is_preorder),d=e.is_preorder_active,m=e.customerFirstName,v=e.isTimeRangeEnabled,g=e.timeVariation,_=e.isCollapsed,y=void 0!==_&&_,b=(0,f.getCurrentTitleAttributes)(a.titles),O=b.translationKey,w=(b.statusImageURL,i.delivered_by),C=w.placeholder,k=w.message,T=i.time,S=T.time_range,E=T.eta,P=T.confirmed_delivery_time,M=i.features.show_delivered_by_vertical,V=(0,o.createGetEtaDependencies)({isCancelled:!1,isDelivered:!1,isPickup:"pickup"===i.expedition_type,isPreOrder:l,isPreOrderActive:d,isVendorDelivery:"vendor"===i.delivery_provider,deliveryTimeRange:S.range,deliveryTimeRangeSuffix:S.suffix,confirmedDeliveryTime:P,eta:E,timezone:P.timezone}),I=function(e){return c.createElement("p",{className:"tracking-card__delivery-time","data-testid":"tracking-card__delivery-time-"+(v?"time-range":"eta")},V(e,g).deliveryTime)},j=function(e){var t=e[k],n='<span class="tracking-card__delivery-by tracking-card__'+C+'">'+e[C]+"</span>";return M?c.createElement("div",{className:"tracking-card__delivery-by",dangerouslySetInnerHTML:{__html:t.replace("%provider%",n)},"data-testid":"tracking-card__delivery_by"}):null};return c.createElement("div",{className:"tracking-card__content-container",onClick:t,"data-destinationpage":h.PAGETYPES_ON_WEB.OTP,"data-testid":"tracking-card__content-container"},c.createElement("div",{className:"tracking-card__top-row"},c.createElement("div",{className:"tracking-card__restaurant-title-container pulsing-animation"},c.createElement("p",{className:"tracking-card__restaurant-title-text","data-testid":"tracking-card__restaurant-title"},n.name)),function(){return y?c.createElement("div",{dangerouslySetInnerHTML:{__html:s.default},className:"tracking-card__expand-button","data-testid":"tracking-card__expand-button"}):k&&c.createElement(p.default.Text,null,j)}()),c.createElement("div",{className:"tracking-card__bottom-row"},c.createElement("div",{className:"tracking-card__order-status"},!y&&c.createElement(r.OrderStatusProgressBarsContainer,{statusMessagesTitles:a.titles}),c.createElement(p.default.Text,{placeholders:{first_name:m,vendor:n.name,restaurant:n.name},tKey:O},function(e){return c.createElement(u.NewOrderStatus,{currentStatusTitleString:e,className:"tracking-card__status-title"})})),c.createElement(p.default.Text,null,I)))}},function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.TrackingCardProvider=t.createTrackingCardProvider=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(106),a=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}l((i=i.apply(e,t||[])).next())})},s=(t.createTrackingCardProvider=function(e){return new s(function(t){var n=e.createAPIUrl("tracking/active-orders");return(0,o.jqxhr2Promise)(e.send(Object.assign({url:n},t)))})},t.TrackingCardProvider=function(){function t(e){i(this,t),this.send=e}return r(t,[{key:"getOrderDetails",value:function(t){return a(this,void 0,void 0,e.mark(function n(){var i;return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send(t?{data:{time_variation:t}}:{});case 2:return i=e.sent,e.abrupt("return",this.hasActiveOrder(i)?{orderDetails:i.data.active_orders[0],count:i.data.count}:{orderDetails:null,count:null});case 4:case"end":return e.stop()}},n,this)}))}},{key:"hasActiveOrder",value:function(e){return void 0!==e&&200===e.status_code&&e.data&&!!e.data.count}}]),t}())}).call(t,n(4))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(661),r=n(26),o=n(665),a=n(7),s=n(125),l=n(311),c=function(){VOLO.components=(0,a.setupDependencies)(VOLO.components,[i.setupHomePageComponents,l.setupTrackingCardReactComponent,s.setupSecondaryBanners]),(0,o.addHomepageEvents)()};(0,r.addPageScriptLoadListeners)(r.HOME_BOOTSTRAP_CLASS,c,o.removeHomepageEvents)},function(e,t,n){"use strict";(function(e){function i(t){var n={};n.homeView=(0,c.createHomeView)(t);var i=(0,v.isFlexibleLocationsEnabled)();if($("#address-search-container").length&&("b2b"!==VOLO.configuration.platform||i?n.fullAddressHomeSearchView=(0,u.createFullAddressHomeSearchView)(t):(t.isDropdown=!0,n.homeLocationDropdownView=(0,d.createLocationDropdownView)(t))),f.pickupTooltipService.needsPickupTooltipOnHome($(".home .restaurants-search-form .js-restaurants-search-pickup").length,e.get(t.appConfig,"pickupEnabled"),Cookies.get("tooltip-pickup-disabled"))){var r=n.fullAddressHomeSearchView;n.pickupTooltip=(0,p.createTooltipView)({el:$(".tooltip-pickup"),parent:r})}return $(".city-tile").length>0&&(n.citiesOverviewView=(0,h.createCitiesOverviewView)(t.gtmService,".city-tile")),n}function r(e){e.fullAddressHomeSearchView&&e.fullAddressHomeSearchView.render(),e.pickupTooltip&&e.pickupTooltip.render("bottom"),e.homeLocationDropdownView&&e.homeLocationDropdownView.render()}function o(e){(0,l.default)(e,["appConfig","model","customerModel","loginButtonView","addressCollection","gtmService","expeditionType","googleMapScriptLoader","locationService","locationModel"]);var t=i({appConfig:e.appConfig,model:e.model,customerModel:e.customerModel,loginButtonView:e.loginButtonView,addressCollection:e.addressCollection,gtmService:e.gtmService,expeditionType:e.expeditionType,selectComponent:e.selectComponent,googleMapScriptLoader:e.googleMapScriptLoader,locationService:e.locationService,locationModel:e.locationModel});return r(t),e.gtmService.trackExpedition("delivery"),{views:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.setupHomePageComponents=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(13),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(662),u=n(298),d=n(663),p=n(123),f=n(124),h=n(664),m=n(7),v=n(211);t.setupHomePageComponents=function(e){(0,m.validateComponentDependencies)(e,"config","config.expeditionType","models.locationModel","models.customerModel","views.loginButtonView","collections.userAddressCollection","services.gtmService","services.googleMapScriptLoader","services.locationService");var t=o(a({},e.views,e.models,e.services,{appConfig:e.config,model:e.models.locationModel,addressCollection:e.collections.userAddressCollection,expeditionType:e.config.expeditionType,locationService:e.services.locationService})),n=t.views;return a({},e,{views:a({},e.views,n),services:a({},e.services)})}}).call(t,n(1))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.loginButtonView,n=e.gtmService;return new d({el:".home",loginButtonView:t,gtmService:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.HomeView=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.createHomeView=a;var l=n(2),c=n(1),u=n(310),d=t.HomeView=function(e){function t(e){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),s(t,[{key:"initialize",value:function(e){(0,c.bindAll)(this),this.loginButtonView=e.loginButtonView,this.gtmService=e.gtmService,this.$body=$("body"),this.hideHomeApps()}},{key:"hideHomeApps",value:function(){(0,u.isQuickApp)()&&this.$body.addClass("hide-home-apps")}},{key:"events",value:function(){return{"click .home__teaser__app-logo:eq(0)":this.sendGtmDlAppstore,"click .home__app__message-logo:eq(0)":this.sendGtmDlAppstore,"click .home__teaser__app-logo:eq(1)":this.sendGtmDlAndroid,"click .home__app__message-logo:eq(1)":this.sendGtmDlAndroid,"click .apple-store":this.sendGtmDlAppstore,"click .play-store":this.sendGtmDlAndroid,"click .home-section-corporate-button":this.sendGtmCorporate,"click .home-section-vendor-button":this.sendGtmVendor}}},{key:"unbind",value:function(){this.loginButtonView&&this.loginButtonView.unbind()}},{key:"sendGtmDlAppstore",value:function(){this.downloadAppClicked("IOS")}},{key:"sendGtmDlAndroid",value:function(){this.downloadAppClicked("AND")}},{key:"sendGtmCorporate",value:function(){this.gtmService.push({event:"gtm.click",parent_id:"cta_banner_corp_home_1"})}},{key:"sendGtmVendor",value:function(){this.gtmService.push({event:"gtm.click",parent_id:"cta_banner_vendor_home"})}},{key:"downloadAppClicked",value:function(e){this.gtmService.downloadAppStarted(e)}}]),t}(l.View)},function(e,t,n){"use strict";(function(e,i){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(0,l.default)(e,["model","locationService","locationModel","selectComponent","addressCollection"]),new f(a({},e,{el:e.el||".restaurants-search-form"}))}Object.defineProperty(t,"__esModule",{value:!0}),t.LocationDropdownView=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.createLocationDropdownView=o;var s=n(13),l=r(s),c=n(49),u=r(c),d=n(5),p=r(d),f=t.LocationDropdownView=e.View.extend({initialize:function(e){function t(){this.fullAddressSearchView=VOLO.libraries.location.setupCorporateLocationInputSearchView({appConfig:e.appConfig,locationService:e.locationService,translations:i.get(VOLO,"locationInput.translations",{}),addressCollection:e.addressCollection,el:document.getElementById("address-search-container"),wrapper:document.getElementById("address-search-container"),isDropdown:e.isDropdown}),(0,p.default)().on("full-address-search:submit",this._selectAddress.bind(this))}i.bindAll(this),this.router=e.router||u.default,this.appConfig=e.appConfig,this.locationService=e.locationService,this._spinner=new Spinner,t.apply(this)},events:function(){var e=this;return{"click .js-restaurants-search-submit":function(){return e._submitAddress("delivery")},"click .js-restaurants-search-pickup":function(){return e._submitAddress("pickup")},submit:function(){return!1}}},_enableSubmitButtons:function(){this.$(".js-restaurants-search-submit, .js-restaurants-search-pickup").removeAttr("disabled")},_disableSubmitButtons:function(){this.$(".js-restaurants-search-submit, .js-restaurants-search-pickup").attr("disabled",!0)},_selectAddress:function(e){this._displayAddress(e.address)},_submitAddress:function(e){this._disableSubmitButtons(),this._spinner.spin($(".restaurants-search-form div")[0]);var t=a({},this.locationService.getModel(),{expedition_type:e});u.default.navigateToVendorsList(t,i.get(this,"appConfig.address_config.required_fields"))},_displayAddress:function(e){this.$(".location-toggle-btn")&&this.$(".location-toggle-btn").find("span")&&this.$(".location-toggle-btn").find("span").first()&&this.$(".location-toggle-btn").find("span").first().html(e)},unbind:function(){this._spinner.stop(),this._enableSubmitButtons(),this.fullAddressSearchView.unbind(),this.stopListening(),this.undelegateEvents()},render:function(){return this}})}).call(t,n(2),n(1))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createCitiesOverviewView=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),l=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"initialize",value:function(e){this.gtmService=e.gtmService}},{key:"events",value:function(){return{click:this.ctaClicked}}},{key:"unbind",value:function(){this.stopListening(),this.undelegateEvents()}},{key:"ctaClicked",value:function(e){var t=$(e.currentTarget),n=t.data("gtm-cta");n&&this.gtmService.push({event:"event_home_CTA_click",ctaName:n})}}]),t}(s.View);t.createCitiesOverviewView=function(e,t){return new l({el:t,gtmService:e})}},function(e,t,n){"use strict";function i(){blazy&&blazy.revalidate()}Object.defineProperty(t,"__esModule",{value:!0});t.addHomepageEvents=function(){$(".city-list").on("scroll",i)},t.removeHomepageEvents=function(){$(".city-list").off("scroll",i)}}],[660]);
//# sourceMappingURL=home.bundle.js.map